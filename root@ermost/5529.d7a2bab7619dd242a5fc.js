"use strict";(self.webpackChunkmattermost_webapp=self.webpackChunkmattermost_webapp||[]).push([[5529],{2575:function(t,e,o){o(88674),o(19601),o(27852),o(23157),o(74916),o(23123),o(73210),o(15306),o(33948),o(4723);var s=this&&this.__awaiter||function(t,e,o,s){return new(o||(o=Promise))((function(i,n){function c(t){try{h(s.next(t))}catch(t){n(t)}}function a(t){try{h(s.throw(t))}catch(t){n(t)}}function h(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(c,a)}h((s=s.apply(t,e||[])).next())}))},i=this&&this.__rest||function(t,e){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(o[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(s=Object.getOwnPropertySymbols(t);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(o[s[i]]=t[s[i]])}return o};Object.defineProperty(e,"__esModule",{value:!0}),e.ClientError=e.parseAndMergeNestedHeaders=e.DEFAULT_LIMIT_AFTER=e.DEFAULT_LIMIT_BEFORE=e.HEADER_X_VERSION_ID=e.HEADER_X_CLUSTER_ID=void 0;const n=o(42896),c=o(5068),a=o(6746);e.HEADER_X_CLUSTER_ID="X-Cluster-Id",e.HEADER_X_VERSION_ID="X-Version-Id";const h=25,r=60,d=1e4;function g(t){const e=new Map;let o=new Map;return t.forEach(((t,s)=>{const i=s.replace(/\b[a-z]/g,(t=>t.toUpperCase()));let n=t;if(t&&t.match(/\n\S+:\s\S+/)){const e=t.split("\n");n=e.shift();const s=new Map(e.map((t=>t.split(/:\s/))));o=new Map([...o,...s])}e.set(i,n)})),new Map([...e,...o])}e.DEFAULT_LIMIT_BEFORE=30,e.DEFAULT_LIMIT_AFTER=30,e.default=class{constructor(){var t=this;this.logToConsole=!1,this.serverVersion="",this.clusterId="",this.token="",this.csrf="",this.url="",this.urlVersion="/api/v4",this.userAgent=null,this.enableLogging=!1,this.defaultHeaders={},this.userId="",this.diagnosticId="",this.includeCookies=!0,this.setAuthHeader=!0,this.translations={connectionError:"There appears to be a problem with your internet connection.",unknownError:"We received an unexpected status code from the server."},this.userRoles="",this.useBoardsProduct=!1,this.getWorkTemplateCategories=()=>this.doFetch("".concat(this.getBaseWorkTemplate(),"/categories"),{method:"get"}),this.getWorkTemplates=t=>this.doFetch("".concat(this.getBaseWorkTemplate(),"/categories/").concat(t,"/templates"),{method:"get"}),this.executeWorkTemplate=t=>this.doFetch("".concat(this.getBaseWorkTemplate(),"/execute"),{method:"post",body:JSON.stringify(t)}),this.createUser=(t,e,o,s)=>{this.trackEvent("api","api_users_create");const i={};return e&&(i.t=e),o&&(i.iid=o),s&&(i.r=s),this.doFetch("".concat(this.getUsersRoute()).concat((0,a.buildQueryString)(i)),{method:"post",body:JSON.stringify(t)})},this.patchMe=t=>this.doFetch("".concat(this.getUserRoute("me"),"/patch"),{method:"put",body:JSON.stringify(t)}),this.patchUser=t=>(this.trackEvent("api","api_users_patch"),this.doFetch("".concat(this.getUserRoute(t.id),"/patch"),{method:"put",body:JSON.stringify(t)})),this.updateUser=t=>(this.trackEvent("api","api_users_update"),this.doFetch("".concat(this.getUserRoute(t.id)),{method:"put",body:JSON.stringify(t)})),this.promoteGuestToUser=t=>(this.trackEvent("api","api_users_promote_guest_to_user"),this.doFetch("".concat(this.getUserRoute(t),"/promote"),{method:"post"})),this.demoteUserToGuest=t=>(this.trackEvent("api","api_users_demote_user_to_guest"),this.doFetch("".concat(this.getUserRoute(t),"/demote"),{method:"post"})),this.updateUserRoles=(t,e)=>(this.trackEvent("api","api_users_update_roles"),this.doFetch("".concat(this.getUserRoute(t),"/roles"),{method:"put",body:JSON.stringify({roles:e})})),this.updateUserMfa=(t,e,o)=>{const s={activate:e};return e&&(s.code=o),this.doFetch("".concat(this.getUserRoute(t),"/mfa"),{method:"put",body:JSON.stringify(s)})},this.updateUserPassword=(t,e,o)=>(this.trackEvent("api","api_users_newpassword"),this.doFetch("".concat(this.getUserRoute(t),"/password"),{method:"put",body:JSON.stringify({current_password:e,new_password:o})})),this.resetUserPassword=(t,e)=>(this.trackEvent("api","api_users_reset_password"),this.doFetch("".concat(this.getUsersRoute(),"/password/reset"),{method:"post",body:JSON.stringify({token:t,new_password:e})})),this.getKnownUsers=()=>this.doFetch("".concat(this.getUsersRoute(),"/known"),{method:"get"}),this.sendPasswordResetEmail=t=>(this.trackEvent("api","api_users_send_password_reset"),this.doFetch("".concat(this.getUsersRoute(),"/password/reset/send"),{method:"post",body:JSON.stringify({email:t})})),this.updateUserActive=(t,e)=>(this.trackEvent("api","api_users_update_active"),this.doFetch("".concat(this.getUserRoute(t),"/active"),{method:"put",body:JSON.stringify({active:e})})),this.uploadProfileImage=(t,e)=>{this.trackEvent("api","api_users_update_profile_picture");const o=new FormData;o.append("image",e);const s={method:"post",body:o};return this.doFetch("".concat(this.getUserRoute(t),"/image"),s)},this.setDefaultProfileImage=t=>(this.trackEvent("api","api_users_set_default_profile_picture"),this.doFetch("".concat(this.getUserRoute(t),"/image"),{method:"delete"})),this.verifyUserEmail=t=>this.doFetch("".concat(this.getUsersRoute(),"/email/verify"),{method:"post",body:JSON.stringify({token:t})}),this.updateMyTermsOfServiceStatus=(t,e)=>this.doFetch("".concat(this.getUserRoute("me"),"/terms_of_service"),{method:"post",body:JSON.stringify({termsOfServiceId:t,accepted:e})}),this.getTermsOfService=()=>this.doFetch("".concat(this.getBaseRoute(),"/terms_of_service"),{method:"get"}),this.createTermsOfService=t=>this.doFetch("".concat(this.getBaseRoute(),"/terms_of_service"),{method:"post",body:JSON.stringify({text:t})}),this.sendVerificationEmail=t=>this.doFetch("".concat(this.getUsersRoute(),"/email/verify/send"),{method:"post",body:JSON.stringify({email:t})}),this.login=function(e,o){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return s(t,void 0,void 0,(function*(){this.trackEvent("api","api_users_login"),n&&this.trackEvent("api","api_users_login_ldap");const t={login_id:e,password:o,token:i,deviceId:""};n&&(t.ldap_only="true");const{data:s,headers:c}=yield this.doFetchWithResponse("".concat(this.getUsersRoute(),"/login"),{method:"post",body:JSON.stringify(t)});return c.has("Token")&&this.setToken(c.get("Token")),s}))},this.loginById=function(e,o){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";t.trackEvent("api","api_users_login");const i={id:e,password:o,token:s,device_id:""};return t.doFetch("".concat(t.getUsersRoute(),"/login"),{method:"post",body:JSON.stringify(i)})},this.logout=()=>s(this,void 0,void 0,(function*(){this.trackEvent("api","api_users_logout");const{response:t}=yield this.doFetchWithResponse("".concat(this.getUsersRoute(),"/logout"),{method:"post"});return t.ok&&(this.token=""),this.serverVersion="",t})),this.getProfiles=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.doFetch("".concat(t.getUsersRoute()).concat((0,a.buildQueryString)(Object.assign({page:e,per_page:o},s))),{method:"get"})},this.getProfilesByIds=function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.doFetch("".concat(t.getUsersRoute(),"/ids").concat((0,a.buildQueryString)(o)),{method:"post",body:JSON.stringify(e)})},this.getProfilesByUsernames=t=>this.doFetch("".concat(this.getUsersRoute(),"/usernames"),{method:"post",body:JSON.stringify(t)}),this.getProfilesInTeam=function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return t.doFetch("".concat(t.getUsersRoute()).concat((0,a.buildQueryString)(Object.assign(Object.assign({},n),{in_team:e,page:o,per_page:s,sort:i}))),{method:"get"})},this.getProfilesNotInTeam=function(e,o){const s={not_in_team:e,page:arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,per_page:arguments.length>3&&void 0!==arguments[3]?arguments[3]:r};return o&&(s.group_constrained=!0),t.doFetch("".concat(t.getUsersRoute()).concat((0,a.buildQueryString)(s)),{method:"get"})},this.getProfilesWithoutTeam=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.doFetch("".concat(t.getUsersRoute()).concat((0,a.buildQueryString)(Object.assign(Object.assign({},s),{without_team:1,page:e,per_page:o}))),{method:"get"})},this.getProfilesInChannel=function(e){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s={in_channel:e,page:arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,per_page:arguments.length>2&&void 0!==arguments[2]?arguments[2]:r,sort:arguments.length>3&&void 0!==arguments[3]?arguments[3]:""};return t.doFetch("".concat(t.getUsersRoute()).concat((0,a.buildQueryString)(Object.assign(Object.assign({},s),o))),{method:"get"})},this.getProfilesInGroupChannels=t=>this.doFetch("".concat(this.getUsersRoute(),"/group_channels"),{method:"post",body:JSON.stringify(t)}),this.getProfilesNotInChannel=function(e,o,s){const i={in_team:e,not_in_channel:o,page:arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,per_page:arguments.length>4&&void 0!==arguments[4]?arguments[4]:r};return s&&(i.group_constrained=!0),t.doFetch("".concat(t.getUsersRoute()).concat((0,a.buildQueryString)(i)),{method:"get"})},this.getProfilesInGroup=function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return t.doFetch("".concat(t.getUsersRoute()).concat((0,a.buildQueryString)({in_group:e,page:o,per_page:s,sort:i})),{method:"get"})},this.getProfilesNotInGroup=function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;return t.doFetch("".concat(t.getUsersRoute()).concat((0,a.buildQueryString)({not_in_group:e,page:o,per_page:s})),{method:"get"})},this.getMe=()=>this.doFetch("".concat(this.getUserRoute("me")),{method:"get"}),this.getUser=t=>this.doFetch("".concat(this.getUserRoute(t)),{method:"get"}),this.getUserByUsername=t=>this.doFetch("".concat(this.getUsersRoute(),"/username/").concat(t),{method:"get"}),this.getUserByEmail=t=>this.doFetch("".concat(this.getUsersRoute(),"/email/").concat(t),{method:"get"}),this.getProfilePictureUrl=(t,e)=>{const o={};return e&&(o._=e),"".concat(this.getUserRoute(t),"/image").concat((0,a.buildQueryString)(o))},this.getDefaultProfilePictureUrl=t=>"".concat(this.getUserRoute(t),"/image/default"),this.autocompleteUsers=function(e,o,s){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{limit:h};return t.doFetch("".concat(t.getUsersRoute(),"/autocomplete").concat((0,a.buildQueryString)({in_team:o,in_channel:s,name:e,limit:i.limit})),{method:"get"})},this.getSessions=t=>this.doFetch("".concat(this.getUserRoute(t),"/sessions"),{method:"get"}),this.revokeSession=(t,e)=>this.doFetch("".concat(this.getUserRoute(t),"/sessions/revoke"),{method:"post",body:JSON.stringify({session_id:e})}),this.revokeAllSessionsForUser=t=>this.doFetch("".concat(this.getUserRoute(t),"/sessions/revoke/all"),{method:"post"}),this.revokeSessionsForAllUsers=()=>this.doFetch("".concat(this.getUsersRoute(),"/sessions/revoke/all"),{method:"post"}),this.getUserAudits=function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;return t.doFetch("".concat(t.getUserRoute(e),"/audits").concat((0,a.buildQueryString)({page:o,per_page:s})),{method:"get"})},this.checkUserMfa=t=>this.doFetch("".concat(this.getUsersRoute(),"/mfa"),{method:"post",body:JSON.stringify({login_id:t})}),this.generateMfaSecret=t=>this.doFetch("".concat(this.getUserRoute(t),"/mfa/generate"),{method:"post"}),this.searchUsers=(t,e)=>(this.trackEvent("api","api_search_users"),this.doFetch("".concat(this.getUsersRoute(),"/search"),{method:"post",body:JSON.stringify(Object.assign({term:t},e))})),this.getStatusesByIds=t=>this.doFetch("".concat(this.getUsersRoute(),"/status/ids"),{method:"post",body:JSON.stringify(t)}),this.getStatus=t=>this.doFetch("".concat(this.getUserRoute(t),"/status"),{method:"get"}),this.updateStatus=t=>this.doFetch("".concat(this.getUserRoute(t.user_id),"/status"),{method:"put",body:JSON.stringify(t)}),this.updateCustomStatus=t=>this.doFetch("".concat(this.getUserRoute("me"),"/status/custom"),{method:"put",body:JSON.stringify(t)}),this.unsetCustomStatus=()=>this.doFetch("".concat(this.getUserRoute("me"),"/status/custom"),{method:"delete"}),this.removeRecentCustomStatus=t=>this.doFetch("".concat(this.getUserRoute("me"),"/status/custom/recent/delete"),{method:"post",body:JSON.stringify(t)}),this.switchEmailToOAuth=function(e,o,s){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return t.trackEvent("api","api_users_email_to_oauth"),t.doFetch("".concat(t.getUsersRoute(),"/login/switch"),{method:"post",body:JSON.stringify({current_service:"email",new_service:e,email:o,password:s,mfa_code:i})})},this.switchOAuthToEmail=(t,e,o)=>(this.trackEvent("api","api_users_oauth_to_email"),this.doFetch("".concat(this.getUsersRoute(),"/login/switch"),{method:"post",body:JSON.stringify({current_service:t,new_service:"email",email:e,new_password:o})})),this.switchEmailToLdap=function(e,o,s,i){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return t.trackEvent("api","api_users_email_to_ldap"),t.doFetch("".concat(t.getUsersRoute(),"/login/switch"),{method:"post",body:JSON.stringify({current_service:"email",new_service:"ldap",email:e,password:o,ldap_id:s,new_password:i,mfa_code:n})})},this.switchLdapToEmail=function(e,o,s){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return t.trackEvent("api","api_users_ldap_to_email"),t.doFetch("".concat(t.getUsersRoute(),"/login/switch"),{method:"post",body:JSON.stringify({current_service:"ldap",new_service:"email",email:o,password:e,new_password:s,mfa_code:i})})},this.getAuthorizedOAuthApps=t=>this.doFetch("".concat(this.getUserRoute(t),"/oauth/apps/authorized"),{method:"get"}),this.authorizeOAuthApp=(t,e,o,s,i)=>this.doFetch("".concat(this.url,"/oauth/authorize"),{method:"post",body:JSON.stringify({client_id:e,response_type:t,redirect_uri:o,state:s,scope:i})}),this.deauthorizeOAuthApp=t=>this.doFetch("".concat(this.url,"/oauth/deauthorize"),{method:"post",body:JSON.stringify({client_id:t})}),this.createUserAccessToken=(t,e)=>(this.trackEvent("api","api_users_create_access_token"),this.doFetch("".concat(this.getUserRoute(t),"/tokens"),{method:"post",body:JSON.stringify({description:e})})),this.getUserAccessToken=t=>this.doFetch("".concat(this.getUsersRoute(),"/tokens/").concat(t),{method:"get"}),this.getUserAccessTokensForUser=function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;return t.doFetch("".concat(t.getUserRoute(e),"/tokens").concat((0,a.buildQueryString)({page:o,per_page:s})),{method:"get"})},this.getUserAccessTokens=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;return t.doFetch("".concat(t.getUsersRoute(),"/tokens").concat((0,a.buildQueryString)({page:e,per_page:o})),{method:"get"})},this.revokeUserAccessToken=t=>(this.trackEvent("api","api_users_revoke_access_token"),this.doFetch("".concat(this.getUsersRoute(),"/tokens/revoke"),{method:"post",body:JSON.stringify({token_id:t})})),this.disableUserAccessToken=t=>this.doFetch("".concat(this.getUsersRoute(),"/tokens/disable"),{method:"post",body:JSON.stringify({token_id:t})}),this.enableUserAccessToken=t=>this.doFetch("".concat(this.getUsersRoute(),"/tokens/enable"),{method:"post",body:JSON.stringify({token_id:t})}),this.createTeam=t=>(this.trackEvent("api","api_teams_create"),this.doFetch("".concat(this.getTeamsRoute()),{method:"post",body:JSON.stringify(t)})),this.deleteTeam=t=>(this.trackEvent("api","api_teams_delete"),this.doFetch("".concat(this.getTeamRoute(t)),{method:"delete"})),this.unarchiveTeam=t=>this.doFetch("".concat(this.getTeamRoute(t),"/restore"),{method:"post"}),this.archiveAllTeamsExcept=t=>this.doFetch("".concat(this.getTeamRoute(t),"/except"),{method:"delete"}),this.updateTeam=t=>(this.trackEvent("api","api_teams_update_name",{team_id:t.id}),this.doFetch("".concat(this.getTeamRoute(t.id)),{method:"put",body:JSON.stringify(t)})),this.patchTeam=t=>(this.trackEvent("api","api_teams_patch_name",{team_id:t.id}),this.doFetch("".concat(this.getTeamRoute(t.id),"/patch"),{method:"put",body:JSON.stringify(t)})),this.regenerateTeamInviteId=t=>(this.trackEvent("api","api_teams_regenerate_invite_id",{team_id:t}),this.doFetch("".concat(this.getTeamRoute(t),"/regenerate_invite_id"),{method:"post"})),this.updateTeamScheme=(t,e)=>{const o={scheme_id:e};return this.trackEvent("api","api_teams_update_scheme",Object.assign({team_id:t},o)),this.doFetch("".concat(this.getTeamSchemeRoute(t)),{method:"put",body:JSON.stringify(o)})},this.checkIfTeamExists=t=>this.doFetch("".concat(this.getTeamNameRoute(t),"/exists"),{method:"get"}),this.getTeams=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t.doFetch("".concat(t.getTeamsRoute()).concat((0,a.buildQueryString)({page:e,per_page:o,include_total_count:s,exclude_policy_constrained:i})),{method:"get"})},this.searchTeams=(t,e)=>(this.trackEvent("api","api_search_teams"),this.doFetch("".concat(this.getTeamsRoute(),"/search"),{method:"post",body:JSON.stringify(Object.assign({term:t},e))})),this.getTeam=t=>this.doFetch(this.getTeamRoute(t),{method:"get"}),this.getTeamByName=t=>(this.trackEvent("api","api_teams_get_team_by_name"),this.doFetch(this.getTeamNameRoute(t),{method:"get"})),this.getMyTeams=()=>this.doFetch("".concat(this.getUserRoute("me"),"/teams"),{method:"get"}),this.getTeamsForUser=t=>this.doFetch("".concat(this.getUserRoute(t),"/teams"),{method:"get"}),this.getMyTeamMembers=()=>this.doFetch("".concat(this.getUserRoute("me"),"/teams/members"),{method:"get"}),this.getMyTeamUnreads=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t.doFetch("".concat(t.getUserRoute("me"),"/teams/unread").concat((0,a.buildQueryString)({include_collapsed_threads:e})),{method:"get"})},this.getTeamMembers=function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r,i=arguments.length>3?arguments[3]:void 0;return t.doFetch("".concat(t.getTeamMembersRoute(e)).concat((0,a.buildQueryString)(Object.assign({page:o,per_page:s},i))),{method:"get"})},this.getTeamMembersForUser=t=>this.doFetch("".concat(this.getUserRoute(t),"/teams/members"),{method:"get"}),this.getTeamMember=(t,e)=>this.doFetch("".concat(this.getTeamMemberRoute(t,e)),{method:"get"}),this.getTeamMembersByIds=(t,e)=>this.doFetch("".concat(this.getTeamMembersRoute(t),"/ids"),{method:"post",body:JSON.stringify(e)}),this.addToTeam=(t,e)=>{this.trackEvent("api","api_teams_invite_members",{team_id:t});const o={user_id:e,team_id:t};return this.doFetch("".concat(this.getTeamMembersRoute(t)),{method:"post",body:JSON.stringify(o)})},this.addToTeamFromInvite=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t.trackEvent("api","api_teams_invite_members");const s=(0,a.buildQueryString)({token:e,invite_id:o});return t.doFetch("".concat(t.getTeamsRoute(),"/members/invite").concat(s),{method:"post"})},this.addUsersToTeam=(t,e)=>{this.trackEvent("api","api_teams_batch_add_members",{team_id:t,count:e.length});const o=[];return e.forEach((e=>o.push({team_id:t,user_id:e}))),this.doFetch("".concat(this.getTeamMembersRoute(t),"/batch"),{method:"post",body:JSON.stringify(o)})},this.addUsersToTeamGracefully=(t,e)=>{this.trackEvent("api","api_teams_batch_add_members",{team_id:t,count:e.length});const o=[];return e.forEach((e=>o.push({team_id:t,user_id:e}))),this.doFetch("".concat(this.getTeamMembersRoute(t),"/batch?graceful=true"),{method:"post",body:JSON.stringify(o)})},this.joinTeam=t=>{const e=(0,a.buildQueryString)({invite_id:t});return this.doFetch("".concat(this.getTeamsRoute(),"/members/invite").concat(e),{method:"post"})},this.removeFromTeam=(t,e)=>(this.trackEvent("api","api_teams_remove_members",{team_id:t}),this.doFetch("".concat(this.getTeamMemberRoute(t,e)),{method:"delete"})),this.getTeamStats=t=>this.doFetch("".concat(this.getTeamRoute(t),"/stats"),{method:"get"}),this.getTotalUsersStats=()=>this.doFetch("".concat(this.getUsersRoute(),"/stats"),{method:"get"}),this.getFilteredUsersStats=t=>this.doFetch("".concat(this.getUsersRoute(),"/stats/filtered").concat((0,a.buildQueryString)(t)),{method:"get"}),this.invalidateAllEmailInvites=()=>this.doFetch("".concat(this.getTeamsRoute(),"/invites/email"),{method:"delete"}),this.getTeamInviteInfo=t=>this.doFetch("".concat(this.getTeamsRoute(),"/invite/").concat(t),{method:"get"}),this.updateTeamMemberRoles=(t,e,o)=>(this.trackEvent("api","api_teams_update_member_roles",{team_id:t}),this.doFetch("".concat(this.getTeamMemberRoute(t,e),"/roles"),{method:"put",body:JSON.stringify({roles:o})})),this.sendEmailInvitesToTeam=(t,e)=>(this.trackEvent("api","api_teams_invite_members",{team_id:t}),this.doFetch("".concat(this.getTeamRoute(t),"/invite/email"),{method:"post",body:JSON.stringify(e)})),this.sendEmailGuestInvitesToChannels=(t,e,o,s)=>(this.trackEvent("api","api_teams_invite_guests",{team_id:t,channel_ids:e}),this.doFetch("".concat(this.getTeamRoute(t),"/invite-guests/email"),{method:"post",body:JSON.stringify({emails:o,channels:e,message:s})})),this.sendEmailInvitesToTeamGracefully=(t,e)=>(this.trackEvent("api","api_teams_invite_members",{team_id:t}),this.doFetch("".concat(this.getTeamRoute(t),"/invite/email?graceful=true"),{method:"post",body:JSON.stringify(e)})),this.sendEmailInvitesToTeamAndChannelsGracefully=(t,e,o,s)=>(this.trackEvent("api","api_teams_invite_members_to_channels",{team_id:t,channel_len:e.length}),this.doFetch("".concat(this.getTeamRoute(t),"/invite/email?graceful=true"),{method:"post",body:JSON.stringify({emails:o,channelIds:e,message:s})})),this.sendEmailGuestInvitesToChannelsGracefully=(t,e,o,i)=>s(this,void 0,void 0,(function*(){return this.trackEvent("api","api_teams_invite_guests",{team_id:t,channel_ids:e}),this.doFetch("".concat(this.getTeamRoute(t),"/invite-guests/email?graceful=true"),{method:"post",body:JSON.stringify({emails:o,channels:e,message:i})})})),this.getTeamIconUrl=(t,e)=>{const o={};return e&&(o._=e),"".concat(this.getTeamRoute(t),"/image").concat((0,a.buildQueryString)(o))},this.setTeamIcon=(t,e)=>{this.trackEvent("api","api_team_set_team_icon");const o=new FormData;o.append("image",e);const s={method:"post",body:o};return this.doFetch("".concat(this.getTeamRoute(t),"/image"),s)},this.removeTeamIcon=t=>(this.trackEvent("api","api_team_remove_team_icon"),this.doFetch("".concat(this.getTeamRoute(t),"/image"),{method:"delete"})),this.updateTeamMemberSchemeRoles=(t,e,o,s)=>{const i={scheme_user:o,scheme_admin:s};return this.doFetch("".concat(this.getTeamRoute(t),"/members/").concat(e,"/schemeRoles"),{method:"put",body:JSON.stringify(i)})},this.getAllChannels=function(){const e={page:arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,per_page:arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,not_associated_to_group:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",exclude_default_channels:arguments.length>3&&void 0!==arguments[3]&&arguments[3],include_total_count:arguments.length>4&&void 0!==arguments[4]&&arguments[4],include_deleted:arguments.length>5&&void 0!==arguments[5]&&arguments[5],exclude_policy_constrained:arguments.length>6&&void 0!==arguments[6]&&arguments[6]};return t.doFetch("".concat(t.getChannelsRoute()).concat((0,a.buildQueryString)(e)),{method:"get"})},this.createChannel=t=>(this.trackEvent("api","api_channels_create",{team_id:t.team_id}),this.doFetch("".concat(this.getChannelsRoute()),{method:"post",body:JSON.stringify(t)})),this.createDirectChannel=t=>(this.trackEvent("api","api_channels_create_direct"),this.doFetch("".concat(this.getChannelsRoute(),"/direct"),{method:"post",body:JSON.stringify(t)})),this.createGroupChannel=t=>(this.trackEvent("api","api_channels_create_group"),this.doFetch("".concat(this.getChannelsRoute(),"/group"),{method:"post",body:JSON.stringify(t)})),this.deleteChannel=t=>(this.trackEvent("api","api_channels_delete",{channel_id:t}),this.doFetch("".concat(this.getChannelRoute(t)),{method:"delete"})),this.unarchiveChannel=t=>(this.trackEvent("api","api_channels_unarchive",{channel_id:t}),this.doFetch("".concat(this.getChannelRoute(t),"/restore"),{method:"post"})),this.updateChannel=t=>(this.trackEvent("api","api_channels_update",{channel_id:t.id}),this.doFetch("".concat(this.getChannelRoute(t.id)),{method:"put",body:JSON.stringify(t)})),this.updateChannelPrivacy=(t,e)=>(this.trackEvent("api","api_channels_update_privacy",{channel_id:t,privacy:e}),this.doFetch("".concat(this.getChannelRoute(t),"/privacy"),{method:"put",body:JSON.stringify({privacy:e})})),this.patchChannel=(t,e)=>(this.trackEvent("api","api_channels_patch",{channel_id:t}),this.doFetch("".concat(this.getChannelRoute(t),"/patch"),{method:"put",body:JSON.stringify(e)})),this.updateChannelNotifyProps=t=>(this.trackEvent("api","api_users_update_channel_notifications",{channel_id:t.channel_id}),this.doFetch("".concat(this.getChannelMemberRoute(t.channel_id,t.user_id),"/notify_props"),{method:"put",body:JSON.stringify(t)})),this.updateChannelScheme=(t,e)=>{const o={scheme_id:e};return this.trackEvent("api","api_channels_update_scheme",Object.assign({channel_id:t},o)),this.doFetch("".concat(this.getChannelSchemeRoute(t)),{method:"put",body:JSON.stringify(o)})},this.getChannel=t=>this.doFetch("".concat(this.getChannelRoute(t)),{method:"get"}),this.getChannelByName=function(e,o){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t.doFetch("".concat(t.getTeamRoute(e),"/channels/name/").concat(o,"?include_deleted=").concat(s),{method:"get"})},this.getChannelByNameAndTeamName=function(e,o){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t.doFetch("".concat(t.getTeamNameRoute(e),"/channels/name/").concat(o,"?include_deleted=").concat(s),{method:"get"})},this.getChannels=function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;return t.doFetch("".concat(t.getTeamRoute(e),"/channels").concat((0,a.buildQueryString)({page:o,per_page:s})),{method:"get"})},this.getAllTeamsChannels=()=>this.doFetch("".concat(this.getUsersRoute(),"/me/channels"),{method:"get"}),this.getArchivedChannels=function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;return t.doFetch("".concat(t.getTeamRoute(e),"/channels/deleted").concat((0,a.buildQueryString)({page:o,per_page:s})),{method:"get"})},this.getMyChannels=function(e){let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t.doFetch("".concat(t.getUserRoute("me"),"/teams/").concat(e,"/channels").concat((0,a.buildQueryString)({include_deleted:o})),{method:"get"})},this.getAllChannelsMembers=function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;return t.doFetch("".concat(t.getUserRoute(e),"/channel_members").concat((0,a.buildQueryString)({page:o,per_page:s})),{method:"get"})},this.getMyChannelMember=t=>this.doFetch("".concat(this.getChannelMemberRoute(t,"me")),{method:"get"}),this.getMyChannelMembers=t=>this.doFetch("".concat(this.getUserRoute("me"),"/teams/").concat(t,"/channels/members"),{method:"get"}),this.getChannelMembers=function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;return t.doFetch("".concat(t.getChannelMembersRoute(e)).concat((0,a.buildQueryString)({page:o,per_page:s})),{method:"get"})},this.getChannelTimezones=t=>this.doFetch("".concat(this.getChannelRoute(t),"/timezones"),{method:"get"}),this.getChannelMember=(t,e)=>this.doFetch("".concat(this.getChannelMemberRoute(t,e)),{method:"get"}),this.getChannelMembersByIds=(t,e)=>this.doFetch("".concat(this.getChannelMembersRoute(t),"/ids"),{method:"post",body:JSON.stringify(e)}),this.addToChannel=function(e,o){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";t.trackEvent("api","api_channels_add_member",{channel_id:o});const i={user_id:e,channel_id:o,post_root_id:s};return t.doFetch("".concat(t.getChannelMembersRoute(o)),{method:"post",body:JSON.stringify(i)})},this.removeFromChannel=(t,e)=>(this.trackEvent("api","api_channels_remove_member",{channel_id:e}),this.doFetch("".concat(this.getChannelMemberRoute(e,t)),{method:"delete"})),this.updateChannelMemberRoles=(t,e,o)=>this.doFetch("".concat(this.getChannelMemberRoute(t,e),"/roles"),{method:"put",body:JSON.stringify({roles:o})}),this.getChannelStats=t=>this.doFetch("".concat(this.getChannelRoute(t),"/stats"),{method:"get"}),this.getChannelModerations=t=>this.doFetch("".concat(this.getChannelRoute(t),"/moderations"),{method:"get"}),this.patchChannelModerations=(t,e)=>this.doFetch("".concat(this.getChannelRoute(t),"/moderations/patch"),{method:"put",body:JSON.stringify(e)}),this.getChannelMemberCountsByGroup=(t,e)=>this.doFetch("".concat(this.getChannelRoute(t),"/member_counts_by_group?include_timezones=").concat(e),{method:"get"}),this.viewMyChannel=(t,e)=>{const o={channel_id:t,prev_channel_id:e,collapsed_threads_supported:!0};return this.doFetch("".concat(this.getChannelsRoute(),"/members/me/view"),{method:"post",body:JSON.stringify(o)})},this.autocompleteChannels=(t,e)=>this.doFetch("".concat(this.getTeamRoute(t),"/channels/autocomplete").concat((0,a.buildQueryString)({name:e})),{method:"get"}),this.autocompleteChannelsForSearch=(t,e)=>this.doFetch("".concat(this.getTeamRoute(t),"/channels/search_autocomplete").concat((0,a.buildQueryString)({name:e})),{method:"get"}),this.searchChannels=(t,e)=>this.doFetch("".concat(this.getTeamRoute(t),"/channels/search"),{method:"post",body:JSON.stringify({term:e})}),this.searchArchivedChannels=(t,e)=>this.doFetch("".concat(this.getTeamRoute(t),"/channels/search_archived"),{method:"post",body:JSON.stringify({term:e})}),this.searchAllChannels=function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=Object.assign({term:e},o);let i={include_deleted:Boolean(o.include_deleted)};return Boolean(o.nonAdminSearch)&&(i={system_console:!1},delete s.nonAdminSearch),t.doFetch("".concat(t.getChannelsRoute(),"/search").concat((0,a.buildQueryString)(i)),{method:"post",body:JSON.stringify(s)})},this.searchGroupChannels=t=>this.doFetch("".concat(this.getChannelsRoute(),"/group/search"),{method:"post",body:JSON.stringify({term:t})}),this.updateChannelMemberSchemeRoles=(t,e,o,s)=>{const i={scheme_user:o,scheme_admin:s};return this.doFetch("".concat(this.getChannelRoute(t),"/members/").concat(e,"/schemeRoles"),{method:"put",body:JSON.stringify(i)})},this.getChannelCategories=(t,e)=>this.doFetch("".concat(this.getChannelCategoriesRoute(t,e)),{method:"get"}),this.createChannelCategory=(t,e,o)=>this.doFetch("".concat(this.getChannelCategoriesRoute(t,e)),{method:"post",body:JSON.stringify(o)}),this.updateChannelCategories=(t,e,o)=>this.doFetch("".concat(this.getChannelCategoriesRoute(t,e)),{method:"put",body:JSON.stringify(o)}),this.getChannelCategoryOrder=(t,e)=>this.doFetch("".concat(this.getChannelCategoriesRoute(t,e),"/order"),{method:"get"}),this.updateChannelCategoryOrder=(t,e,o)=>this.doFetch("".concat(this.getChannelCategoriesRoute(t,e),"/order"),{method:"put",body:JSON.stringify(o)}),this.getChannelCategory=(t,e,o)=>this.doFetch("".concat(this.getChannelCategoriesRoute(t,e),"/").concat(o),{method:"get"}),this.updateChannelCategory=(t,e,o)=>this.doFetch("".concat(this.getChannelCategoriesRoute(t,e),"/").concat(o.id),{method:"put",body:JSON.stringify(o)}),this.deleteChannelCategory=(t,e,o)=>this.doFetch("".concat(this.getChannelCategoriesRoute(t,e),"/").concat(o),{method:"delete"}),this.createPost=t=>s(this,void 0,void 0,(function*(){var e;const o=yield this.doFetch("".concat(this.getPostsRoute()),{method:"post",body:JSON.stringify(t)}),s={channel_id:o.channel_id,post_id:o.id,user_actual_id:o.user_id,root_id:o.root_id};return(null===(e=t.metadata)||void 0===e?void 0:e.priority)&&(s.priority=t.metadata.priority.priority,s.requested_ack=t.metadata.priority.requested_ack,s.persistent_notifications=t.metadata.priority.persistent_notifications),this.trackEvent("api","api_posts_create",s),null!=o.root_id&&""!==o.root_id&&this.trackEvent("api","api_posts_replied",s),o})),this.updatePost=t=>(this.trackEvent("api","api_posts_update",{channel_id:t.channel_id,post_id:t.id}),this.doFetch("".concat(this.getPostRoute(t.id)),{method:"put",body:JSON.stringify(t)})),this.getPost=t=>this.doFetch("".concat(this.getPostRoute(t)),{method:"get"}),this.patchPost=t=>(this.trackEvent("api","api_posts_patch",{channel_id:t.channel_id,post_id:t.id}),this.doFetch("".concat(this.getPostRoute(t.id),"/patch"),{method:"put",body:JSON.stringify(t)})),this.deletePost=t=>(this.trackEvent("api","api_posts_delete"),this.doFetch("".concat(this.getPostRoute(t)),{method:"delete"})),this.getPostThread=function(e){let o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t.getPaginatedPostThread(e,{fetchThreads:o,collapsedThreads:s,collapsedThreadsExtended:i})},this.getPaginatedPostThread=(t,e)=>s(this,void 0,void 0,(function*(){const{fetchThreads:o=!0,collapsedThreads:s=!1,collapsedThreadsExtended:n=!1,direction:c="down",fetchAll:h=!1,perPage:d=(h?void 0:r)}=e,g=i(e,["fetchThreads","collapsedThreads","collapsedThreadsExtended","direction","fetchAll","perPage"]);return this.doFetch("".concat(this.getPostRoute(t),"/thread").concat((0,a.buildQueryString)(Object.assign({skipFetchThreads:!o,collapsedThreads:s,collapsedThreadsExtended:n,direction:c,perPage:d},g))),{method:"get"})})),this.getPosts=function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return t.doFetch("".concat(t.getChannelRoute(e),"/posts").concat((0,a.buildQueryString)({page:o,per_page:s,skipFetchThreads:!i,collapsedThreads:n,collapsedThreadsExtended:c})),{method:"get"})},this.getPostsUnread=function(o,s){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.DEFAULT_LIMIT_AFTER,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.DEFAULT_LIMIT_BEFORE,c=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],h=arguments.length>5&&void 0!==arguments[5]&&arguments[5],r=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return t.doFetch("".concat(t.getUserRoute(s),"/channels/").concat(o,"/posts/unread").concat((0,a.buildQueryString)({limit_after:i,limit_before:n,skipFetchThreads:!c,collapsedThreads:h,collapsedThreadsExtended:r})),{method:"get"})},this.getPostsSince=function(e,o){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return t.doFetch("".concat(t.getChannelRoute(e),"/posts").concat((0,a.buildQueryString)({since:o,skipFetchThreads:!s,collapsedThreads:i,collapsedThreadsExtended:n})),{method:"get"})},this.getPostsBefore=function(e,o){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r,n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],c=arguments.length>5&&void 0!==arguments[5]&&arguments[5],h=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return t.doFetch("".concat(t.getChannelRoute(e),"/posts").concat((0,a.buildQueryString)({before:o,page:s,per_page:i,skipFetchThreads:!n,collapsedThreads:c,collapsedThreadsExtended:h})),{method:"get"})},this.getPostsAfter=function(e,o){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r,n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],c=arguments.length>5&&void 0!==arguments[5]&&arguments[5],h=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return t.doFetch("".concat(t.getChannelRoute(e),"/posts").concat((0,a.buildQueryString)({after:o,page:s,per_page:i,skipFetchThreads:!n,collapsedThreads:c,collapsedThreadsExtended:h})),{method:"get"})},this.getUserThreads=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"me",o=arguments.length>1?arguments[1]:void 0,{before:s="",after:i="",perPage:n=r,extended:c=!1,deleted:h=!1,unread:d=!1,since:g=0,totalsOnly:u=!1,threadsOnly:l=!1}=arguments.length>2?arguments[2]:void 0;return t.doFetch("".concat(t.getUserThreadsRoute(e,o)).concat((0,a.buildQueryString)({before:s,after:i,per_page:n,extended:c,deleted:h,unread:d,since:g,totalsOnly:u,threadsOnly:l})),{method:"get"})},this.getUserThread=function(e,o,s){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const n="".concat(t.getUserThreadRoute(e,o,s));return t.doFetch("".concat(n).concat((0,a.buildQueryString)({extended:i})),{method:"get"})},this.updateThreadsReadForUser=(t,e)=>{const o="".concat(this.getUserThreadsRoute(t,e),"/read");return this.doFetch(o,{method:"put"})},this.updateThreadReadForUser=(t,e,o,s)=>{const i="".concat(this.getUserThreadRoute(t,e,o),"/read/").concat(s);return this.doFetch(i,{method:"put"})},this.markThreadAsUnreadForUser=(t,e,o,s)=>{const i="".concat(this.getUserThreadRoute(t,e,o),"/set_unread/").concat(s);return this.doFetch(i,{method:"post"})},this.updateThreadFollowForUser=(t,e,o,s)=>{const i=this.getUserThreadRoute(t,e,o)+"/following";return this.doFetch(i,{method:s?"put":"delete"})},this.getFileInfosForPost=t=>this.doFetch("".concat(this.getPostRoute(t),"/files/info"),{method:"get"}),this.getFlaggedPosts=function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:r;return t.trackEvent("api","api_posts_get_flagged",{team_id:s}),t.doFetch("".concat(t.getUserRoute(e),"/posts/flagged").concat((0,a.buildQueryString)({channel_id:o,team_id:s,page:i,per_page:n})),{method:"get"})},this.getPinnedPosts=t=>(this.trackEvent("api","api_posts_get_pinned",{channel_id:t}),this.doFetch("".concat(this.getChannelRoute(t),"/pinned"),{method:"get"})),this.markPostAsUnread=(t,e)=>(this.trackEvent("api","api_post_set_unread_post"),this.doFetch("".concat(this.getUserRoute(t),"/posts/").concat(e,"/set_unread"),{method:"post",body:JSON.stringify({collapsed_threads_supported:!0})})),this.pinPost=t=>(this.trackEvent("api","api_posts_pin"),this.doFetch("".concat(this.getPostRoute(t),"/pin"),{method:"post"})),this.unpinPost=t=>(this.trackEvent("api","api_posts_unpin"),this.doFetch("".concat(this.getPostRoute(t),"/unpin"),{method:"post"})),this.getPostsByIds=t=>this.doFetch("".concat(this.getPostsRoute(),"/ids"),{method:"post",body:JSON.stringify(t)}),this.addReaction=(t,e,o)=>(this.trackEvent("api","api_reactions_save",{post_id:e}),this.doFetch("".concat(this.getReactionsRoute()),{method:"post",body:JSON.stringify({user_id:t,post_id:e,emoji_name:o})})),this.removeReaction=(t,e,o)=>(this.trackEvent("api","api_reactions_delete",{post_id:e}),this.doFetch("".concat(this.getUserRoute(t),"/posts/").concat(e,"/reactions/").concat(o),{method:"delete"})),this.getReactionsForPost=t=>this.doFetch("".concat(this.getPostRoute(t),"/reactions"),{method:"get"}),this.getTopReactionsForTeam=(t,e,o,s)=>this.doFetch("".concat(this.getTeamRoute(t),"/top/reactions").concat((0,a.buildQueryString)({page:e,per_page:o,time_range:s})),{method:"get"}),this.getMyTopReactions=(t,e,o,s)=>this.doFetch("".concat(this.getUsersRoute(),"/me/top/reactions").concat((0,a.buildQueryString)({page:e,per_page:o,time_range:s,team_id:t})),{method:"get"}),this.getTopChannelsForTeam=(t,e,o,s)=>this.doFetch("".concat(this.getTeamRoute(t),"/top/channels").concat((0,a.buildQueryString)({page:e,per_page:o,time_range:s})),{method:"get"}),this.getMyTopChannels=(t,e,o,s)=>this.doFetch("".concat(this.getUsersRoute(),"/me/top/channels").concat((0,a.buildQueryString)({page:e,per_page:o,time_range:s,team_id:t})),{method:"get"}),this.getTopThreadsForTeam=(t,e,o,s)=>this.doFetch("".concat(this.getTeamRoute(t),"/top/threads").concat((0,a.buildQueryString)({page:e,per_page:o,time_range:s})),{method:"get"}),this.getMyTopThreads=(t,e,o,s)=>this.doFetch("".concat(this.getUsersRoute(),"/me/top/threads").concat((0,a.buildQueryString)({page:e,per_page:o,time_range:s,team_id:t})),{method:"get"}),this.getLeastActiveChannelsForTeam=(t,e,o,s)=>this.doFetch("".concat(this.getTeamRoute(t),"/top/inactive_channels").concat((0,a.buildQueryString)({page:e,per_page:o,time_range:s})),{method:"get"}),this.getMyTopDMs=(t,e,o,s)=>this.doFetch("".concat(this.getUsersRoute(),"/me/top/dms").concat((0,a.buildQueryString)({page:e,per_page:o,time_range:s,team_id:t})),{method:"get"}),this.getMyLeastActiveChannels=(t,e,o,s)=>this.doFetch("".concat(this.getUsersRoute(),"/me/top/inactive_channels").concat((0,a.buildQueryString)({page:e,per_page:o,time_range:s,team_id:t})),{method:"get"}),this.getNewTeamMembers=(t,e,o,s)=>this.doFetch("".concat(this.getTeamRoute(t),"/top/team_members").concat((0,a.buildQueryString)({page:e,per_page:o,time_range:s})),{method:"get"}),this.searchPostsWithParams=(t,e)=>{this.trackEvent("api","api_posts_search",{team_id:t});let o="".concat(this.getPostsRoute(),"/search");return t&&(o="".concat(this.getTeamRoute(t),"/posts/search")),this.doFetch(o,{method:"post",body:JSON.stringify(e)})},this.searchPosts=(t,e,o)=>this.searchPostsWithParams(t,{terms:e,is_or_search:o}),this.searchFilesWithParams=(t,e)=>(this.trackEvent("api","api_files_search",{team_id:t}),this.doFetch("".concat(this.getTeamRoute(t),"/files/search"),{method:"post",body:JSON.stringify(e)})),this.searchFiles=(t,e,o)=>this.searchFilesWithParams(t,{terms:e,is_or_search:o}),this.getOpenGraphMetadata=t=>this.doFetch("".concat(this.getBaseRoute(),"/opengraph"),{method:"post",body:JSON.stringify({url:t})}),this.doPostAction=function(e,o){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return t.doPostActionWithCookie(e,o,"",s)},this.doPostActionWithCookie=function(e,o,s){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";i?t.trackEvent("api","api_interactive_messages_menu_selected"):t.trackEvent("api","api_interactive_messages_button_clicked");const n={selected_option:i};return""!==s&&(n.cookie=s),t.doFetch("".concat(t.getPostRoute(e),"/actions/").concat(encodeURIComponent(o)),{method:"post",body:JSON.stringify(n)})},this.uploadFile=t=>{this.trackEvent("api","api_files_upload");const e={method:"post",body:t};return this.doFetch("".concat(this.getFilesRoute()),e)},this.getFilePublicLink=t=>this.doFetch("".concat(this.getFileRoute(t),"/link"),{method:"get"}),this.acknowledgePost=(t,e)=>(this.trackEvent("api","api_posts_ack"),this.doFetch("".concat(this.getUserRoute(e),"/posts/").concat(t,"/ack"),{method:"post"})),this.unacknowledgePost=(t,e)=>(this.trackEvent("api","api_posts_unack"),this.doFetch("".concat(this.getUserRoute(e),"/posts/").concat(t,"/ack"),{method:"delete"})),this.savePreferences=(t,e)=>this.doFetch("".concat(this.getPreferencesRoute(t)),{method:"put",body:JSON.stringify(e)}),this.getMyPreferences=()=>this.doFetch("".concat(this.getPreferencesRoute("me")),{method:"get"}),this.deletePreferences=(t,e)=>this.doFetch("".concat(this.getPreferencesRoute(t),"/delete"),{method:"post",body:JSON.stringify(e)}),this.ping=()=>this.doFetch("".concat(this.getBaseRoute(),"/system/ping?time=").concat(Date.now()),{method:"get"}),this.upgradeToEnterprise=()=>s(this,void 0,void 0,(function*(){return this.doFetch("".concat(this.getBaseRoute(),"/upgrade_to_enterprise"),{method:"post"})})),this.upgradeToEnterpriseStatus=()=>s(this,void 0,void 0,(function*(){return this.doFetch("".concat(this.getBaseRoute(),"/upgrade_to_enterprise/status"),{method:"get"})})),this.restartServer=()=>s(this,void 0,void 0,(function*(){return this.doFetch("".concat(this.getBaseRoute(),"/restart"),{method:"post"})})),this.logClientError=function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.LogLevel.Error;const s="".concat(t.getBaseRoute(),"/logs");if(!t.enableLogging)throw new u(t.getUrl(),{message:"Logging disabled.",url:s});return t.doFetch(s,{method:"post",body:JSON.stringify({message:e,level:o})})},this.getClientConfigOld=()=>this.doFetch("".concat(this.getBaseRoute(),"/config/client?format=old"),{method:"get"}),this.getClientLicenseOld=()=>this.doFetch("".concat(this.getBaseRoute(),"/license/client?format=old"),{method:"get"}),this.getWarnMetricsStatus=()=>s(this,void 0,void 0,(function*(){return this.doFetch("".concat(this.getBaseRoute(),"/warn_metrics/status"),{method:"get"})})),this.sendWarnMetricAck=(t,e)=>s(this,void 0,void 0,(function*(){return this.doFetch("".concat(this.getBaseRoute(),"/warn_metrics/ack/").concat(encodeURI(t)),{method:"post",body:JSON.stringify({forceAck:e})})})),this.setFirstAdminVisitMarketplaceStatus=()=>s(this,void 0,void 0,(function*(){return this.doFetch("".concat(this.getPluginsRoute(),"/marketplace/first_admin_visit"),{method:"post",body:JSON.stringify({first_admin_visit_marketplace_status:!0})})})),this.getFirstAdminVisitMarketplaceStatus=()=>s(this,void 0,void 0,(function*(){return this.doFetch("".concat(this.getPluginsRoute(),"/marketplace/first_admin_visit"),{method:"get"})})),this.getFirstAdminSetupComplete=()=>s(this,void 0,void 0,(function*(){return this.doFetch("".concat(this.getSystemRoute(),"/onboarding/complete"),{method:"get"})})),this.getTranslations=t=>this.doFetch(t,{method:"get"}),this.getWebSocketUrl=()=>"".concat(this.getBaseRoute(),"/websocket"),this.createIncomingWebhook=t=>(this.trackEvent("api","api_integrations_created",{team_id:t.team_id}),this.doFetch("".concat(this.getIncomingHooksRoute()),{method:"post",body:JSON.stringify(t)})),this.getIncomingWebhook=t=>this.doFetch("".concat(this.getIncomingHookRoute(t)),{method:"get"}),this.getIncomingWebhooks=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const o={page:arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,per_page:arguments.length>2&&void 0!==arguments[2]?arguments[2]:r};return e&&(o.team_id=e),t.doFetch("".concat(t.getIncomingHooksRoute()).concat((0,a.buildQueryString)(o)),{method:"get"})},this.removeIncomingWebhook=t=>(this.trackEvent("api","api_integrations_deleted"),this.doFetch("".concat(this.getIncomingHookRoute(t)),{method:"delete"})),this.updateIncomingWebhook=t=>(this.trackEvent("api","api_integrations_updated",{team_id:t.team_id}),this.doFetch("".concat(this.getIncomingHookRoute(t.id)),{method:"put",body:JSON.stringify(t)})),this.createOutgoingWebhook=t=>(this.trackEvent("api","api_integrations_created",{team_id:t.team_id}),this.doFetch("".concat(this.getOutgoingHooksRoute()),{method:"post",body:JSON.stringify(t)})),this.getOutgoingWebhook=t=>this.doFetch("".concat(this.getOutgoingHookRoute(t)),{method:"get"}),this.getOutgoingWebhooks=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const s={page:arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,per_page:arguments.length>3&&void 0!==arguments[3]?arguments[3]:r};return e&&(s.channel_id=e),o&&(s.team_id=o),t.doFetch("".concat(t.getOutgoingHooksRoute()).concat((0,a.buildQueryString)(s)),{method:"get"})},this.removeOutgoingWebhook=t=>(this.trackEvent("api","api_integrations_deleted"),this.doFetch("".concat(this.getOutgoingHookRoute(t)),{method:"delete"})),this.updateOutgoingWebhook=t=>(this.trackEvent("api","api_integrations_updated",{team_id:t.team_id}),this.doFetch("".concat(this.getOutgoingHookRoute(t.id)),{method:"put",body:JSON.stringify(t)})),this.regenOutgoingHookToken=t=>this.doFetch("".concat(this.getOutgoingHookRoute(t),"/regen_token"),{method:"post"}),this.getCommandsList=t=>this.doFetch("".concat(this.getCommandsRoute(),"?team_id=").concat(t),{method:"get"}),this.getCommandAutocompleteSuggestionsList=(t,e,o)=>this.doFetch("".concat(this.getTeamRoute(e),"/commands/autocomplete_suggestions").concat((0,a.buildQueryString)(Object.assign(Object.assign({},o),{user_input:t}))),{method:"get"}),this.getAutocompleteCommandsList=function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;return t.doFetch("".concat(t.getTeamRoute(e),"/commands/autocomplete").concat((0,a.buildQueryString)({page:o,per_page:s})),{method:"get"})},this.getCustomTeamCommands=t=>this.doFetch("".concat(this.getCommandsRoute(),"?team_id=").concat(t,"&custom_only=true"),{method:"get"}),this.executeCommand=(t,e)=>(this.trackEvent("api","api_integrations_used"),this.doFetch("".concat(this.getCommandsRoute(),"/execute"),{method:"post",body:JSON.stringify(Object.assign({command:t},e))})),this.addCommand=t=>(this.trackEvent("api","api_integrations_created"),this.doFetch("".concat(this.getCommandsRoute()),{method:"post",body:JSON.stringify(t)})),this.editCommand=t=>(this.trackEvent("api","api_integrations_created"),this.doFetch("".concat(this.getCommandsRoute(),"/").concat(t.id),{method:"put",body:JSON.stringify(t)})),this.regenCommandToken=t=>this.doFetch("".concat(this.getCommandsRoute(),"/").concat(t,"/regen_token"),{method:"put"}),this.deleteCommand=t=>(this.trackEvent("api","api_integrations_deleted"),this.doFetch("".concat(this.getCommandsRoute(),"/").concat(t),{method:"delete"})),this.createOAuthApp=t=>(this.trackEvent("api","api_apps_register"),this.doFetch("".concat(this.getOAuthAppsRoute()),{method:"post",body:JSON.stringify(t)})),this.editOAuthApp=t=>this.doFetch("".concat(this.getOAuthAppsRoute(),"/").concat(t.id),{method:"put",body:JSON.stringify(t)}),this.getOAuthApps=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;return t.doFetch("".concat(t.getOAuthAppsRoute()).concat((0,a.buildQueryString)({page:e,per_page:o})),{method:"get"})},this.getAppsOAuthAppIDs=()=>this.doFetch("".concat(this.getAppsProxyRoute(),"/api/v1/oauth-app-ids"),{method:"get"}),this.getAppsBotIDs=()=>this.doFetch("".concat(this.getAppsProxyRoute(),"/api/v1/bot-ids"),{method:"get"}),this.getOAuthApp=t=>this.doFetch("".concat(this.getOAuthAppRoute(t)),{method:"get"}),this.getOAuthAppInfo=t=>this.doFetch("".concat(this.getOAuthAppRoute(t),"/info"),{method:"get"}),this.deleteOAuthApp=t=>(this.trackEvent("api","api_apps_delete"),this.doFetch("".concat(this.getOAuthAppRoute(t)),{method:"delete"})),this.regenOAuthAppSecret=t=>this.doFetch("".concat(this.getOAuthAppRoute(t),"/regen_secret"),{method:"post"}),this.submitInteractiveDialog=t=>(this.trackEvent("api","api_interactive_messages_dialog_submitted"),this.doFetch("".concat(this.getBaseRoute(),"/actions/dialogs/submit"),{method:"post",body:JSON.stringify(t)})),this.createCustomEmoji=(t,e)=>{this.trackEvent("api","api_emoji_custom_add");const o=new FormData;o.append("image",e),o.append("emoji",JSON.stringify(t));const s={method:"post",body:o};return this.doFetch("".concat(this.getEmojisRoute()),s)},this.getCustomEmoji=t=>this.doFetch("".concat(this.getEmojisRoute(),"/").concat(t),{method:"get"}),this.getCustomEmojiByName=t=>this.doFetch("".concat(this.getEmojisRoute(),"/name/").concat(t),{method:"get"}),this.getCustomEmojis=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return t.doFetch("".concat(t.getEmojisRoute()).concat((0,a.buildQueryString)({page:e,per_page:o,sort:s})),{method:"get"})},this.deleteCustomEmoji=t=>(this.trackEvent("api","api_emoji_custom_delete"),this.doFetch("".concat(this.getEmojiRoute(t)),{method:"delete"})),this.getSystemEmojiImageUrl=t=>{const e=t.endsWith(".png")?"":".png";return"".concat(this.url,"/static/emoji/").concat(t).concat(e)},this.getCustomEmojiImageUrl=t=>"".concat(this.getEmojiRoute(t),"/image"),this.searchCustomEmoji=function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.doFetch("".concat(t.getEmojisRoute(),"/search"),{method:"post",body:JSON.stringify(Object.assign({term:e},o))})},this.autocompleteCustomEmoji=t=>this.doFetch("".concat(this.getEmojisRoute(),"/autocomplete").concat((0,a.buildQueryString)({name:t})),{method:"get"}),this.getDataRetentionPolicy=()=>this.doFetch("".concat(this.getDataRetentionRoute(),"/policy"),{method:"get"}),this.getDataRetentionCustomPolicies=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;return t.doFetch("".concat(t.getDataRetentionRoute(),"/policies").concat((0,a.buildQueryString)({page:e,per_page:o})),{method:"get"})},this.getDataRetentionCustomPolicy=t=>this.doFetch("".concat(this.getDataRetentionRoute(),"/policies/").concat(t),{method:"get"}),this.deleteDataRetentionCustomPolicy=t=>this.doFetch("".concat(this.getDataRetentionRoute(),"/policies/").concat(t),{method:"delete"}),this.searchDataRetentionCustomPolicyChannels=(t,e,o)=>this.doFetch("".concat(this.getDataRetentionRoute(),"/policies/").concat(t,"/channels/search"),{method:"post",body:JSON.stringify(Object.assign({term:e},o))}),this.searchDataRetentionCustomPolicyTeams=(t,e,o)=>this.doFetch("".concat(this.getDataRetentionRoute(),"/policies/").concat(t,"/teams/search"),{method:"post",body:JSON.stringify(Object.assign({term:e},o))}),this.getDataRetentionCustomPolicyTeams=function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;return t.doFetch("".concat(t.getDataRetentionRoute(),"/policies/").concat(e,"/teams").concat((0,a.buildQueryString)({page:o,per_page:s})),{method:"get"})},this.getDataRetentionCustomPolicyChannels=function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;return t.doFetch("".concat(t.getDataRetentionRoute(),"/policies/").concat(e,"/channels").concat((0,a.buildQueryString)({page:o,per_page:s})),{method:"get"})},this.createDataRetentionPolicy=t=>this.doFetch("".concat(this.getDataRetentionRoute(),"/policies"),{method:"post",body:JSON.stringify(t)}),this.updateDataRetentionPolicy=(t,e)=>this.doFetch("".concat(this.getDataRetentionRoute(),"/policies/").concat(t),{method:"PATCH",body:JSON.stringify(e)}),this.addDataRetentionPolicyTeams=(t,e)=>this.doFetch("".concat(this.getDataRetentionRoute(),"/policies/").concat(t,"/teams"),{method:"post",body:JSON.stringify(e)}),this.removeDataRetentionPolicyTeams=(t,e)=>this.doFetch("".concat(this.getDataRetentionRoute(),"/policies/").concat(t,"/teams"),{method:"delete",body:JSON.stringify(e)}),this.addDataRetentionPolicyChannels=(t,e)=>this.doFetch("".concat(this.getDataRetentionRoute(),"/policies/").concat(t,"/channels"),{method:"post",body:JSON.stringify(e)}),this.removeDataRetentionPolicyChannels=(t,e)=>this.doFetch("".concat(this.getDataRetentionRoute(),"/policies/").concat(t,"/channels"),{method:"delete",body:JSON.stringify(e)}),this.getJob=t=>this.doFetch("".concat(this.getJobsRoute(),"/").concat(t),{method:"get"}),this.getJobs=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;return t.doFetch("".concat(t.getJobsRoute()).concat((0,a.buildQueryString)({page:e,per_page:o})),{method:"get"})},this.getJobsByType=function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;return t.doFetch("".concat(t.getJobsRoute(),"/type/").concat(e).concat((0,a.buildQueryString)({page:o,per_page:s})),{method:"get"})},this.createJob=t=>this.doFetch("".concat(this.getJobsRoute()),{method:"post",body:JSON.stringify(t)}),this.cancelJob=t=>this.doFetch("".concat(this.getJobsRoute(),"/").concat(t,"/cancel"),{method:"post"}),this.getLogs=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;return t.doFetch("".concat(t.getBaseRoute(),"/logs").concat((0,a.buildQueryString)({page:e,logs_per_page:o})),{method:"get"})},this.getAudits=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;return t.doFetch("".concat(t.getBaseRoute(),"/audits").concat((0,a.buildQueryString)({page:e,per_page:o})),{method:"get"})},this.getConfig=()=>this.doFetch("".concat(this.getBaseRoute(),"/config"),{method:"get"}),this.updateConfig=t=>this.doFetch("".concat(this.getBaseRoute(),"/config"),{method:"put",body:JSON.stringify(t)}),this.patchConfig=t=>this.doFetch("".concat(this.getBaseRoute(),"/config/patch"),{method:"put",body:JSON.stringify(t)}),this.reloadConfig=()=>this.doFetch("".concat(this.getBaseRoute(),"/config/reload"),{method:"post"}),this.getEnvironmentConfig=()=>this.doFetch("".concat(this.getBaseRoute(),"/config/environment"),{method:"get"}),this.testEmail=t=>this.doFetch("".concat(this.getBaseRoute(),"/email/test"),{method:"post",body:JSON.stringify(t)}),this.testSiteURL=t=>this.doFetch("".concat(this.getBaseRoute(),"/site_url/test"),{method:"post",body:JSON.stringify({site_url:t})}),this.testS3Connection=t=>this.doFetch("".concat(this.getBaseRoute(),"/file/s3_test"),{method:"post",body:JSON.stringify(t)}),this.invalidateCaches=()=>this.doFetch("".concat(this.getBaseRoute(),"/caches/invalidate"),{method:"post"}),this.recycleDatabase=()=>this.doFetch("".concat(this.getBaseRoute(),"/database/recycle"),{method:"post"}),this.createComplianceReport=t=>this.doFetch("".concat(this.getBaseRoute(),"/compliance/reports"),{method:"post",body:JSON.stringify(t)}),this.getComplianceReport=t=>this.doFetch("".concat(this.getBaseRoute(),"/compliance/reports/").concat(t),{method:"get"}),this.getComplianceReports=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;return t.doFetch("".concat(t.getBaseRoute(),"/compliance/reports").concat((0,a.buildQueryString)({page:e,per_page:o})),{method:"get"})},this.uploadBrandImage=t=>{const e=new FormData;e.append("image",t);const o={method:"post",body:e};return this.doFetch("".concat(this.getBrandRoute(),"/image"),o)},this.deleteBrandImage=()=>this.doFetch("".concat(this.getBrandRoute(),"/image"),{method:"delete"}),this.getClusterStatus=()=>this.doFetch("".concat(this.getBaseRoute(),"/cluster/status"),{method:"get"}),this.testLdap=()=>this.doFetch("".concat(this.getBaseRoute(),"/ldap/test"),{method:"post"}),this.syncLdap=()=>this.doFetch("".concat(this.getBaseRoute(),"/ldap/sync"),{method:"post"}),this.getLdapGroups=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=Object.assign({page:e,per_page:o},s);return t.doFetch("".concat(t.getBaseRoute(),"/ldap/groups").concat((0,a.buildQueryString)(i)),{method:"get"})},this.linkLdapGroup=t=>this.doFetch("".concat(this.getBaseRoute(),"/ldap/groups/").concat(encodeURI(t),"/link"),{method:"post"}),this.unlinkLdapGroup=t=>this.doFetch("".concat(this.getBaseRoute(),"/ldap/groups/").concat(encodeURI(t),"/link"),{method:"delete"}),this.getSamlCertificateStatus=()=>this.doFetch("".concat(this.getBaseRoute(),"/saml/certificate/status"),{method:"get"}),this.uploadPublicSamlCertificate=t=>{const e=new FormData;return e.append("certificate",t),this.doFetch("".concat(this.getBaseRoute(),"/saml/certificate/public"),{method:"post",body:e})},this.uploadPrivateSamlCertificate=t=>{const e=new FormData;return e.append("certificate",t),this.doFetch("".concat(this.getBaseRoute(),"/saml/certificate/private"),{method:"post",body:e})},this.uploadPublicLdapCertificate=t=>{const e=new FormData;return e.append("certificate",t),this.doFetch("".concat(this.getBaseRoute(),"/ldap/certificate/public"),{method:"post",body:e})},this.uploadPrivateLdapCertificate=t=>{const e=new FormData;return e.append("certificate",t),this.doFetch("".concat(this.getBaseRoute(),"/ldap/certificate/private"),{method:"post",body:e})},this.uploadIdpSamlCertificate=t=>{const e=new FormData;return e.append("certificate",t),this.doFetch("".concat(this.getBaseRoute(),"/saml/certificate/idp"),{method:"post",body:e})},this.deletePublicSamlCertificate=()=>this.doFetch("".concat(this.getBaseRoute(),"/saml/certificate/public"),{method:"delete"}),this.deletePrivateSamlCertificate=()=>this.doFetch("".concat(this.getBaseRoute(),"/saml/certificate/private"),{method:"delete"}),this.deletePublicLdapCertificate=()=>this.doFetch("".concat(this.getBaseRoute(),"/ldap/certificate/public"),{method:"delete"}),this.deletePrivateLdapCertificate=()=>this.doFetch("".concat(this.getBaseRoute(),"/ldap/certificate/private"),{method:"delete"}),this.deleteIdpSamlCertificate=()=>this.doFetch("".concat(this.getBaseRoute(),"/saml/certificate/idp"),{method:"delete"}),this.testElasticsearch=t=>this.doFetch("".concat(this.getBaseRoute(),"/elasticsearch/test"),{method:"post",body:JSON.stringify(t)}),this.purgeElasticsearchIndexes=()=>this.doFetch("".concat(this.getBaseRoute(),"/elasticsearch/purge_indexes"),{method:"post"}),this.purgeBleveIndexes=()=>this.doFetch("".concat(this.getBaseRoute(),"/bleve/purge_indexes"),{method:"post"}),this.uploadLicense=t=>{this.trackEvent("api","api_license_upload");const e=new FormData;e.append("license",t);const o={method:"post",body:e};return this.doFetch("".concat(this.getBaseRoute(),"/license"),o)},this.requestTrialLicense=t=>this.doFetchWithResponse("".concat(this.getBaseRoute(),"/trial-license"),{method:"POST",body:JSON.stringify(t)}),this.removeLicense=()=>this.doFetch("".concat(this.getBaseRoute(),"/license"),{method:"delete"}),this.getPrevTrialLicense=()=>this.doFetch("".concat(this.getBaseRoute(),"/trial-license/prev"),{method:"get"}),this.getAnalytics=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"standard",o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return t.doFetch("".concat(t.getBaseRoute(),"/analytics/old").concat((0,a.buildQueryString)({name:e,team_id:o})),{method:"get"})},this.getRole=t=>this.doFetch("".concat(this.getRolesRoute(),"/").concat(t),{method:"get"}),this.getRoleByName=t=>this.doFetch("".concat(this.getRolesRoute(),"/name/").concat(t),{method:"get"}),this.getRolesByNames=t=>this.doFetch("".concat(this.getRolesRoute(),"/names"),{method:"post",body:JSON.stringify(t)}),this.patchRole=(t,e)=>this.doFetch("".concat(this.getRolesRoute(),"/").concat(t,"/patch"),{method:"put",body:JSON.stringify(e)}),this.getSchemes=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;return t.doFetch("".concat(t.getSchemesRoute()).concat((0,a.buildQueryString)({scope:e,page:o,per_page:s})),{method:"get"})},this.createScheme=t=>(this.trackEvent("api","api_schemes_create"),this.doFetch("".concat(this.getSchemesRoute()),{method:"post",body:JSON.stringify(t)})),this.getScheme=t=>this.doFetch("".concat(this.getSchemesRoute(),"/").concat(t),{method:"get"}),this.deleteScheme=t=>(this.trackEvent("api","api_schemes_delete"),this.doFetch("".concat(this.getSchemesRoute(),"/").concat(t),{method:"delete"})),this.patchScheme=(t,e)=>(this.trackEvent("api","api_schemes_patch",{scheme_id:t}),this.doFetch("".concat(this.getSchemesRoute(),"/").concat(t,"/patch"),{method:"put",body:JSON.stringify(e)})),this.getSchemeTeams=function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;return t.doFetch("".concat(t.getSchemesRoute(),"/").concat(e,"/teams").concat((0,a.buildQueryString)({page:o,per_page:s})),{method:"get"})},this.getSchemeChannels=function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;return t.doFetch("".concat(t.getSchemesRoute(),"/").concat(e,"/channels").concat((0,a.buildQueryString)({page:o,per_page:s})),{method:"get"})},this.uploadPlugin=function(e){let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return s(t,void 0,void 0,(function*(){this.trackEvent("api","api_plugin_upload");const t=new FormData;o&&t.append("force","true"),t.append("plugin",e);const s={method:"post",body:t};return this.doFetch(this.getPluginsRoute(),s)}))},this.installPluginFromUrl=function(e){let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.trackEvent("api","api_install_plugin");const s={plugin_download_url:e,force:o};return t.doFetch("".concat(t.getPluginsRoute(),"/install_from_url").concat((0,a.buildQueryString)(s)),{method:"post"})},this.getPlugins=()=>this.doFetch(this.getPluginsRoute(),{method:"get"}),this.getRemoteMarketplacePlugins=t=>this.doFetch("".concat(this.getPluginsMarketplaceRoute()).concat((0,a.buildQueryString)({filter:t||"",remote_only:!0})),{method:"get"}),this.getMarketplacePlugins=function(e){let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t.doFetch("".concat(t.getPluginsMarketplaceRoute()).concat((0,a.buildQueryString)({filter:e||"",local_only:o})),{method:"get"})},this.installMarketplacePlugin=t=>(this.trackEvent("api","api_install_marketplace_plugin"),this.doFetch("".concat(this.getPluginsMarketplaceRoute()),{method:"post",body:JSON.stringify({id:t})})),this.getMarketplaceApps=t=>this.doFetch("".concat(this.getAppsProxyRoute(),"/api/v1/marketplace").concat((0,a.buildQueryString)({filter:t||""})),{method:"get"}),this.getPluginStatuses=()=>this.doFetch("".concat(this.getPluginsRoute(),"/statuses"),{method:"get"}),this.removePlugin=t=>this.doFetch(this.getPluginRoute(t),{method:"delete"}),this.getWebappPlugins=()=>this.doFetch("".concat(this.getPluginsRoute(),"/webapp"),{method:"get"}),this.enablePlugin=t=>this.doFetch("".concat(this.getPluginRoute(t),"/enable"),{method:"post"}),this.disablePlugin=t=>this.doFetch("".concat(this.getPluginRoute(t),"/disable"),{method:"post"}),this.getBoardsTemplates=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0";return t.doFetch("".concat(t.getBoardsRoute(),"/teams/").concat(e,"/templates"),{method:"get"})},this.createBoard=t=>this.doFetch("".concat(this.getBoardsRoute(),"/boards"),{method:"POST",body:JSON.stringify(Object.assign({},t))}),this.createBoardFromTemplate=(t,e)=>this.doFetch("".concat(this.getBoardsRoute(),"/boards/").concat(t,"/duplicate?asTemplate=false&toTeam=").concat(e),{method:"POST"}),this.patchBoard=(t,e)=>this.doFetch("".concat(this.getBoardsRoute(),"/boards/").concat(t),{method:"PATCH",body:JSON.stringify(Object.assign({},e))}),this.linkGroupSyncable=(t,e,o,s)=>this.doFetch("".concat(this.getGroupRoute(t),"/").concat(o,"s/").concat(e,"/link"),{method:"post",body:JSON.stringify(s)}),this.unlinkGroupSyncable=(t,e,o)=>this.doFetch("".concat(this.getGroupRoute(t),"/").concat(o,"s/").concat(e,"/link"),{method:"delete"}),this.getGroupSyncables=(t,e)=>this.doFetch("".concat(this.getGroupRoute(t),"/").concat(e,"s"),{method:"get"}),this.getGroup=function(e){let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t.doFetch("".concat(t.getGroupRoute(e)).concat((0,a.buildQueryString)({include_member_count:o})),{method:"get"})},this.getGroupStats=t=>this.doFetch("".concat(this.getGroupRoute(t),"/stats"),{method:"get"}),this.getGroups=function(){let e=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const o={filter_allow_reference:arguments.length>0&&void 0!==arguments[0]&&arguments[0],page:arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,per_page:arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,include_member_count:arguments.length>3&&void 0!==arguments[3]&&arguments[3]};return e&&(o.filter_has_member=e),t.doFetch("".concat(t.getGroupsRoute()).concat((0,a.buildQueryString)(o)),{method:"get"})},this.getGroupsByUserId=t=>this.doFetch("".concat(this.getUsersRoute(),"/").concat(t,"/groups"),{method:"get"}),this.getGroupsNotAssociatedToTeam=function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"ldap";return t.trackEvent("api","api_groups_get_not_associated_to_team",{team_id:e}),t.doFetch("".concat(t.getGroupsRoute()).concat((0,a.buildQueryString)({not_associated_to_team:e,page:s,per_page:i,q:o,include_member_count:!0,group_source:n})),{method:"get"})},this.getGroupsNotAssociatedToChannel=function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r,n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"ldap";t.trackEvent("api","api_groups_get_not_associated_to_channel",{channel_id:e});const h={not_associated_to_channel:e,page:s,per_page:i,q:o,include_member_count:!0,filter_parent_team_permitted:n,group_source:c};return t.doFetch("".concat(t.getGroupsRoute()).concat((0,a.buildQueryString)(h)),{method:"get"})},this.createGroupWithUserIds=t=>this.doFetch(this.getGroupsRoute(),{method:"post",body:JSON.stringify(t)}),this.addUsersToGroup=(t,e)=>this.doFetch("".concat(this.getGroupRoute(t),"/members"),{method:"post",body:JSON.stringify({user_ids:e})}),this.removeUsersFromGroup=(t,e)=>this.doFetch("".concat(this.getGroupRoute(t),"/members"),{method:"delete",body:JSON.stringify({user_ids:e})}),this.searchGroups=t=>this.doFetch("".concat(this.getGroupsRoute()).concat((0,a.buildQueryString)(t)),{method:"get"}),this.executeAppCall=(t,e)=>s(this,void 0,void 0,(function*(){const o=Object.assign(Object.assign({},t),{context:Object.assign(Object.assign({},t.context),{track_as_submit:e,user_agent:"webapp"})});return this.doFetch("".concat(this.getAppsProxyRoute(),"/api/v1/call"),{method:"post",body:JSON.stringify(o)})})),this.getAppsBindings=(t,e,o)=>s(this,void 0,void 0,(function*(){const s={user_id:t,channel_id:e,team_id:o,user_agent:"webapp"};return this.doFetch("".concat(this.getAppsProxyRoute(),"/api/v1/bindings").concat((0,a.buildQueryString)(s)),{method:"get"})})),this.getGroupsAssociatedToTeam=function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r,n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return t.trackEvent("api","api_groups_get_associated_to_team",{team_id:e}),t.doFetch("".concat(t.getBaseRoute(),"/teams/").concat(e,"/groups").concat((0,a.buildQueryString)({page:s,per_page:i,q:o,include_member_count:!0,filter_allow_reference:n})),{method:"get"})},this.getGroupsAssociatedToChannel=function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r,n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return t.trackEvent("api","api_groups_get_associated_to_channel",{channel_id:e}),t.doFetch("".concat(t.getBaseRoute(),"/channels/").concat(e,"/groups").concat((0,a.buildQueryString)({page:s,per_page:i,q:o,include_member_count:!0,filter_allow_reference:n})),{method:"get"})},this.getAllGroupsAssociatedToTeam=function(e){let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t.doFetch("".concat(t.getBaseRoute(),"/teams/").concat(e,"/groups").concat((0,a.buildQueryString)({paginate:!1,filter_allow_reference:o,include_member_count:s})),{method:"get"})},this.getAllGroupsAssociatedToChannelsInTeam=function(e){let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t.doFetch("".concat(t.getBaseRoute(),"/teams/").concat(e,"/groups_by_channels").concat((0,a.buildQueryString)({paginate:!1,filter_allow_reference:o})),{method:"get"})},this.getAllGroupsAssociatedToChannel=function(e){let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t.doFetch("".concat(t.getBaseRoute(),"/channels/").concat(e,"/groups").concat((0,a.buildQueryString)({paginate:!1,filter_allow_reference:o,include_member_count:s})),{method:"get"})},this.patchGroupSyncable=(t,e,o,s)=>this.doFetch("".concat(this.getGroupRoute(t),"/").concat(o,"s/").concat(e,"/patch"),{method:"put",body:JSON.stringify(s)}),this.patchGroup=(t,e)=>this.doFetch("".concat(this.getGroupRoute(t),"/patch"),{method:"put",body:JSON.stringify(e)}),this.archiveGroup=t=>this.doFetch("".concat(this.getGroupRoute(t)),{method:"delete"}),this.createGroupTeamsAndChannels=t=>this.doFetch("".concat(this.getBaseRoute(),"/ldap/users/").concat(t,"/group_sync_memberships"),{method:"post"}),this.getRedirectLocation=t=>{if(!t.length)return Promise.resolve();const e="".concat(this.getRedirectLocationRoute()).concat((0,a.buildQueryString)({url:t}));return this.doFetch(e,{method:"get"})},this.createBot=t=>this.doFetch("".concat(this.getBotsRoute()),{method:"post",body:JSON.stringify(t)}),this.patchBot=(t,e)=>this.doFetch("".concat(this.getBotRoute(t)),{method:"put",body:JSON.stringify(e)}),this.getBot=t=>this.doFetch("".concat(this.getBotRoute(t)),{method:"get"}),this.getBots=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;return t.doFetch("".concat(t.getBotsRoute()).concat((0,a.buildQueryString)({page:e,per_page:o})),{method:"get"})},this.getBotsIncludeDeleted=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;return t.doFetch("".concat(t.getBotsRoute()).concat((0,a.buildQueryString)({include_deleted:!0,page:e,per_page:o})),{method:"get"})},this.getBotsOrphaned=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;return t.doFetch("".concat(t.getBotsRoute()).concat((0,a.buildQueryString)({only_orphaned:!0,page:e,per_page:o})),{method:"get"})},this.disableBot=t=>this.doFetch("".concat(this.getBotRoute(t),"/disable"),{method:"post"}),this.enableBot=t=>this.doFetch("".concat(this.getBotRoute(t),"/enable"),{method:"post"}),this.assignBot=(t,e)=>this.doFetch("".concat(this.getBotRoute(t),"/assign/").concat(e),{method:"post"}),this.getCloudProducts=t=>{let e="";return t&&(e="?include_legacy=true"),this.doFetch("".concat(this.getCloudRoute(),"/products").concat(e),{method:"get"})},this.bootstrapSelfHostedSignup=t=>{let e="";return t&&(e="?reset=true"),this.doFetch("".concat(this.getHostedCustomerRoute(),"/bootstrap").concat(e),{method:"post"})},this.getAvailabilitySelfHostedSignup=()=>this.doFetch("".concat(this.getHostedCustomerRoute(),"/signup_available"),{method:"get"}),this.getSelfHostedProducts=()=>this.doFetch("".concat(this.getCloudRoute(),"/products/selfhosted"),{method:"get"}),this.createCustomerSelfHostedSignup=t=>this.doFetch("".concat(this.getHostedCustomerRoute(),"/customer"),{method:"post",body:JSON.stringify(t)}),this.confirmSelfHostedSignup=(t,e)=>this.doFetch("".concat(this.getHostedCustomerRoute(),"/confirm"),{method:"post",body:JSON.stringify({stripe_setup_intent_id:t,subscription:e})}),this.createPaymentMethod=()=>s(this,void 0,void 0,(function*(){return this.doFetch("".concat(this.getCloudRoute(),"/payment"),{method:"post"})})),this.getCloudCustomer=()=>this.doFetch("".concat(this.getCloudRoute(),"/customer"),{method:"get"}),this.getLicenseExpandStatus=()=>this.doFetch("".concat(this.getCloudRoute(),"/subscription/expand"),{method:"get"}),this.updateCloudCustomer=t=>this.doFetch("".concat(this.getCloudRoute(),"/customer"),{method:"put",body:JSON.stringify(t)}),this.updateCloudCustomerAddress=t=>this.doFetch("".concat(this.getCloudRoute(),"/customer/address"),{method:"put",body:JSON.stringify(t)}),this.notifyAdmin=t=>this.doFetchWithResponse("".concat(this.getUsersRoute(),"/notify-admin"),{method:"post",body:JSON.stringify(t)}),this.confirmPaymentMethod=t=>s(this,void 0,void 0,(function*(){return this.doFetch("".concat(this.getCloudRoute(),"/payment/confirm"),{method:"post",body:JSON.stringify({stripe_setup_intent_id:t})})})),this.subscribeCloudProduct=function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.doFetch("".concat(t.getCloudRoute(),"/subscription"),{method:"put",body:JSON.stringify({product_id:e,seats:o})})},this.requestCloudTrial=function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return t.doFetchWithResponse("".concat(t.getCloudRoute(),"/request-trial"),{method:"put",body:JSON.stringify({email:o,subscription_id:e})})},this.validateBusinessEmail=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t.doFetchWithResponse("".concat(t.getCloudRoute(),"/validate-business-email"),{method:"post",body:JSON.stringify({email:e})})},this.validateWorkspaceBusinessEmail=()=>this.doFetchWithResponse("".concat(this.getCloudRoute(),"/validate-workspace-business-email"),{method:"post"}),this.getSubscription=()=>this.doFetch("".concat(this.getCloudRoute(),"/subscription"),{method:"get"}),this.getRenewalLink=()=>this.doFetch("".concat(this.getBaseRoute(),"/license/renewal"),{method:"get"}),this.getInvoices=()=>this.doFetch("".concat(this.getCloudRoute(),"/subscription/invoices"),{method:"get"}),this.getInvoicePdfUrl=t=>"".concat(this.getCloudRoute(),"/subscription/invoices/").concat(t,"/pdf"),this.getSelfHostedInvoices=()=>this.doFetch("".concat(this.getHostedCustomerRoute(),"/invoices"),{method:"get"}),this.getSelfHostedInvoicePdfUrl=t=>"".concat(this.getHostedCustomerRoute(),"/invoices/").concat(t,"/pdf"),this.getCloudLimits=()=>this.doFetch("".concat(this.getCloudRoute(),"/limits"),{method:"get"}),this.getPostsUsage=()=>this.doFetch("".concat(this.getUsageRoute(),"/posts"),{method:"get"}),this.getFilesUsage=()=>this.doFetch("".concat(this.getUsageRoute(),"/storage"),{method:"get"}),this.getTeamsUsage=()=>this.doFetch("".concat(this.getUsageRoute(),"/teams"),{method:"get"}),this.teamMembersMinusGroupMembers=(t,e,o,s)=>{const i="group_ids=".concat(e.join(","),"&page=").concat(o,"&per_page=").concat(s);return this.doFetch("".concat(this.getTeamRoute(t),"/members_minus_group_members?").concat(i),{method:"get"})},this.channelMembersMinusGroupMembers=(t,e,o,s)=>{const i="group_ids=".concat(e.join(","),"&page=").concat(o,"&per_page=").concat(s);return this.doFetch("".concat(this.getChannelRoute(t),"/members_minus_group_members?").concat(i),{method:"get"})},this.getSamlMetadataFromIdp=t=>this.doFetch("".concat(this.getBaseRoute(),"/saml/metadatafromidp"),{method:"post",body:JSON.stringify({saml_metadata_url:t})}),this.setSamlIdpCertificateFromMetadata=t=>{const e={method:"post",body:t,headers:{"Content-Type":"application/x-pem-file"}};return this.doFetch("".concat(this.getBaseRoute(),"/saml/certificate/idp"),e)},this.getInProductNotices=(t,e,o)=>this.doFetch("".concat(this.getNoticesRoute(),"/").concat(t,"?client=").concat(e,"&clientVersion=").concat(o),{method:"get"}),this.updateNoticesAsViewed=t=>(this.trackEvent("ui","notice_seen_".concat(t[0])),this.doFetch("".concat(this.getNoticesRoute(),"/view"),{method:"put",body:JSON.stringify(t)})),this.getAncillaryPermissions=t=>this.doFetch("".concat(this.getPermissionsRoute(),"/ancillary?subsection_permissions=").concat(t.join(",")),{method:"get"}),this.completeSetup=t=>this.doFetch("".concat(this.getSystemRoute(),"/onboarding/complete"),{method:"post",body:JSON.stringify(t)}),this.getAppliedSchemaMigrations=()=>this.doFetch("".concat(this.getSystemRoute(),"/schema/version"),{method:"get"}),this.fetchWithGraphQL=t=>s(this,void 0,void 0,(function*(){return this.doFetch(this.getGraphQLUrl(),{method:"post",body:t})})),this.getCallsChannelState=t=>this.doFetch("".concat(this.url,"/plugins/","com.mattermost.calls","/").concat(t),{method:"get"}),this.doFetch=(t,e)=>s(this,void 0,void 0,(function*(){const{data:o}=yield this.doFetchWithResponse(t,e);return o})),this.doFetchWithResponse=(t,o)=>s(this,void 0,void 0,(function*(){const s=yield fetch(t,this.getOptions(o)),i=g(s.headers);let n;try{n=yield s.json()}catch(e){throw new u(this.getUrl(),{message:"Received invalid response from the server.",url:t})}if(i.has(e.HEADER_X_VERSION_ID)&&!i.get("Cache-Control")){const t=i.get(e.HEADER_X_VERSION_ID);t&&this.serverVersion!==t&&(this.serverVersion=t)}if(i.has(e.HEADER_X_CLUSTER_ID)){const t=i.get(e.HEADER_X_CLUSTER_ID);t&&this.clusterId!==t&&(this.clusterId=t)}if(s.ok)return{response:s,headers:i,data:n};const c=n.message||"";throw this.logToConsole&&console.error(c),new u(this.getUrl(),{message:c,server_error_id:n.id,status_code:n.status_code,url:t})})),this.upsertDraft=(t,e)=>s(this,void 0,void 0,(function*(){return yield this.doFetch("".concat(this.getDraftsRoute()),{method:"post",body:JSON.stringify(t),headers:{"Connection-Id":"".concat(e)}})})),this.getUserDrafts=t=>this.doFetch("".concat(this.getUserRoute("me"),"/teams/").concat(t,"/drafts"),{method:"get"}),this.deleteDraft=function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2?arguments[2]:void 0,i="".concat(t.getUserRoute("me"),"/channels/").concat(e,"/drafts");return""!==o&&(i+="/".concat(o)),t.doFetch(i,{method:"delete",headers:{"Connection-Id":"".concat(s)}})},this.submitTrueUpReview=()=>this.doFetch("".concat(this.getBaseRoute(),"/license/review"),{method:"post"}),this.getTrueUpReviewStatus=()=>this.doFetch("".concat(this.getBaseRoute(),"/license/review/status"),{method:"get"}),this.cwsAvailabilityCheck=()=>this.doFetch("".concat(this.getCloudRoute(),"/check-cws-connection"),{method:"get"})}getUrl(){return this.url}getAbsoluteUrl(t){return"string"==typeof t&&t.startsWith("/")?this.getUrl()+t:t}getGraphQLUrl(){return"".concat(this.url).concat("/api/v5/graphql")}setUrl(t){this.url=t}setUserAgent(t){this.userAgent=t}getToken(){return this.token}setToken(t){this.token=t}setCSRF(t){this.csrf=t}setAcceptLanguage(t){this.defaultHeaders["Accept-Language"]=t}setEnableLogging(t){this.enableLogging=t}setIncludeCookies(t){this.includeCookies=t}setUserId(t){this.userId=t}setUserRoles(t){this.userRoles=t}setDiagnosticId(t){this.diagnosticId=t}setTelemetryHandler(t){this.telemetryHandler=t}setUseBoardsProduct(t){this.useBoardsProduct=t}getServerVersion(){return this.serverVersion}getUrlVersion(){return this.urlVersion}getBaseRoute(){return"".concat(this.url).concat(this.urlVersion)}getAppsProxyRoute(){return"".concat(this.url,"/plugins/com.mattermost.apps")}getUsersRoute(){return"".concat(this.getBaseRoute(),"/users")}getUserRoute(t){return"".concat(this.getUsersRoute(),"/").concat(t)}getTeamsRoute(){return"".concat(this.getBaseRoute(),"/teams")}getTeamRoute(t){return"".concat(this.getTeamsRoute(),"/").concat(t)}getTeamSchemeRoute(t){return"".concat(this.getTeamRoute(t),"/scheme")}getTeamNameRoute(t){return"".concat(this.getTeamsRoute(),"/name/").concat(t)}getTeamMembersRoute(t){return"".concat(this.getTeamRoute(t),"/members")}getTeamMemberRoute(t,e){return"".concat(this.getTeamMembersRoute(t),"/").concat(e)}getChannelsRoute(){return"".concat(this.getBaseRoute(),"/channels")}getChannelRoute(t){return"".concat(this.getChannelsRoute(),"/").concat(t)}getChannelMembersRoute(t){return"".concat(this.getChannelRoute(t),"/members")}getChannelMemberRoute(t,e){return"".concat(this.getChannelMembersRoute(t),"/").concat(e)}getChannelSchemeRoute(t){return"".concat(this.getChannelRoute(t),"/scheme")}getChannelCategoriesRoute(t,e){return"".concat(this.getBaseRoute(),"/users/").concat(t,"/teams/").concat(e,"/channels/categories")}getPostsRoute(){return"".concat(this.getBaseRoute(),"/posts")}getPostRoute(t){return"".concat(this.getPostsRoute(),"/").concat(t)}getReactionsRoute(){return"".concat(this.getBaseRoute(),"/reactions")}getCommandsRoute(){return"".concat(this.getBaseRoute(),"/commands")}getBaseWorkTemplate(){return"".concat(this.getBaseRoute(),"/worktemplates")}getFilesRoute(){return"".concat(this.getBaseRoute(),"/files")}getFileRoute(t){return"".concat(this.getFilesRoute(),"/").concat(t)}getPreferencesRoute(t){return"".concat(this.getUserRoute(t),"/preferences")}getIncomingHooksRoute(){return"".concat(this.getBaseRoute(),"/hooks/incoming")}getIncomingHookRoute(t){return"".concat(this.getBaseRoute(),"/hooks/incoming/").concat(t)}getOutgoingHooksRoute(){return"".concat(this.getBaseRoute(),"/hooks/outgoing")}getOutgoingHookRoute(t){return"".concat(this.getBaseRoute(),"/hooks/outgoing/").concat(t)}getOAuthRoute(){return"".concat(this.url,"/oauth")}getOAuthAppsRoute(){return"".concat(this.getBaseRoute(),"/oauth/apps")}getOAuthAppRoute(t){return"".concat(this.getOAuthAppsRoute(),"/").concat(t)}getEmojisRoute(){return"".concat(this.getBaseRoute(),"/emoji")}getEmojiRoute(t){return"".concat(this.getEmojisRoute(),"/").concat(t)}getBrandRoute(){return"".concat(this.getBaseRoute(),"/brand")}getBrandImageUrl(t){return"".concat(this.getBrandRoute(),"/image?t=").concat(t)}getDataRetentionRoute(){return"".concat(this.getBaseRoute(),"/data_retention")}getJobsRoute(){return"".concat(this.getBaseRoute(),"/jobs")}getPluginsRoute(){return"".concat(this.getBaseRoute(),"/plugins")}getPluginRoute(t){return"".concat(this.getPluginsRoute(),"/").concat(t)}getPluginsMarketplaceRoute(){return"".concat(this.getPluginsRoute(),"/marketplace")}getRolesRoute(){return"".concat(this.getBaseRoute(),"/roles")}getSchemesRoute(){return"".concat(this.getBaseRoute(),"/schemes")}getRedirectLocationRoute(){return"".concat(this.getBaseRoute(),"/redirect_location")}getBotsRoute(){return"".concat(this.getBaseRoute(),"/bots")}getBotRoute(t){return"".concat(this.getBotsRoute(),"/").concat(t)}getGroupsRoute(){return"".concat(this.getBaseRoute(),"/groups")}getGroupRoute(t){return"".concat(this.getGroupsRoute(),"/").concat(t)}getNoticesRoute(){return"".concat(this.getBaseRoute(),"/system/notices")}getCloudRoute(){return"".concat(this.getBaseRoute(),"/cloud")}getHostedCustomerRoute(){return"".concat(this.getBaseRoute(),"/hosted_customer")}getUsageRoute(){return"".concat(this.getBaseRoute(),"/usage")}getPermissionsRoute(){return"".concat(this.getBaseRoute(),"/permissions")}getUserThreadsRoute(t,e){return"".concat(this.getUserRoute(t),"/teams/").concat(e,"/threads")}getUserThreadRoute(t,e,o){return"".concat(this.getUserThreadsRoute(t,e),"/").concat(o)}getSystemRoute(){return"".concat(this.getBaseRoute(),"/system")}getDraftsRoute(){return"".concat(this.getBaseRoute(),"/drafts")}getBoardsRoute(){return"".concat(this.url,"/plugins/").concat(this.useBoardsProduct?"boards":"focalboard","/api/v2")}getCSRFFromCookie(){if("undefined"!=typeof document&&void 0!==document.cookie){const t=document.cookie.split(";");for(let e=0;e<t.length;e++){const o=t[e].trim();if(o.startsWith("MMCSRF="))return o.replace("MMCSRF=","")}}return""}getOptions(t){const e=Object.assign({},t),o=Object.assign({"X-Requested-With":"XMLHttpRequest"},this.defaultHeaders);this.setAuthHeader&&this.token&&(o.Authorization="".concat("BEARER"," ").concat(this.token));const s=this.csrf||this.getCSRFFromCookie();return t.method&&"get"!==t.method.toLowerCase()&&s&&(o["X-CSRF-Token"]=s),this.includeCookies&&(e.credentials="include"),this.userAgent&&(o["User-Agent"]=this.userAgent),t.body&&(t.body instanceof FormData||(o["Content-Type"]="application/json")),e.headers&&Object.assign(o,e.headers),Object.assign(Object.assign({},e),{headers:o})}getFileUrl(t,e){let o="".concat(this.getFileRoute(t));return e&&(o+="?".concat(e)),o}getFileThumbnailUrl(t,e){let o="".concat(this.getFileRoute(t),"/thumbnail");return e&&(o+="?".concat(e)),o}getFilePreviewUrl(t,e){let o="".concat(this.getFileRoute(t),"/preview");return e&&(o+="?".concat(e)),o}trackEvent(t,e,o){this.telemetryHandler&&this.telemetryHandler.trackEvent(this.userId,this.userRoles,t,e,o)}pageVisited(t,e){this.telemetryHandler&&this.telemetryHandler.pageVisited(this.userId,this.userRoles,t,e)}},e.parseAndMergeNestedHeaders=g;class u extends Error{constructor(t,e){super(e.message+": "+(0,c.cleanUrlForLogging)(t,e.url||"")),this.message=e.message,this.url=e.url,this.server_error_id=e.server_error_id,this.status_code=e.status_code,Object.defineProperty(this,"message",{enumerable:!0})}}e.ClientError=u},5068:(t,e,o)=>{o(74916),o(23123),Object.defineProperty(e,"__esModule",{value:!0}),e.cleanUrlForLogging=void 0,e.cleanUrlForLogging=function(t,e){let o=e;o=o.substring(t.length);const s=o.indexOf("?");-1!==s&&(o=o.substring(0,s));const i=["api","v4","users","teams","scheme","name","members","channels","posts","reactions","commands","files","preferences","hooks","incoming","outgoing","oauth","apps","emoji","brand","image","data_retention","jobs","plugins","roles","system","timezones","schemes","redirect_location","patch","mfa","password","reset","send","active","verify","terms_of_service","login","logout","ids","usernames","me","username","email","default","sessions","revoke","all","audits","device","status","search","switch","authorized","authorize","deauthorize","tokens","disable","enable","exists","unread","invite","batch","stats","import","schemeRoles","direct","group","convert","view","search_autocomplete","thread","info","flagged","pinned","pin","unpin","opengraph","actions","thumbnail","preview","link","delete","logs","ping","config","client","license","websocket","webrtc","token","regen_token","autocomplete","execute","regen_secret","policy","type","cancel","reload","environment","s3_test","file","caches","invalidate","database","recycle","compliance","reports","cluster","ldap","test","sync","saml","certificate","public","private","idp","elasticsearch","purge_indexes","analytics","old","webapp","fake"];return o=o.split("/").map((t=>""!==t&&-1===i.indexOf(t)?"<filtered>":t)).join("/"),-1!==s&&(o+="?<filtered>"),o}},6746:(t,e,o)=>{o(33948),Object.defineProperty(e,"__esModule",{value:!0}),e.buildQueryString=void 0,e.buildQueryString=function(t){if(0===Object.keys(t).length)return"";const e=Object.entries(t).filter((t=>{let[e,o]=t;return void 0!==o})).map((t=>{let[e,o]=t;return"".concat(e,"=").concat(encodeURIComponent(o))})).join("&");return e.length>0?"?".concat(e):""}},85529:function(t,e,o){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.WebSocketClient=e.DEFAULT_LIMIT_BEFORE=e.DEFAULT_LIMIT_AFTER=e.ClientError=e.Client4=void 0;var i=o(2575);Object.defineProperty(e,"Client4",{enumerable:!0,get:function(){return s(i).default}}),Object.defineProperty(e,"ClientError",{enumerable:!0,get:function(){return i.ClientError}}),Object.defineProperty(e,"DEFAULT_LIMIT_AFTER",{enumerable:!0,get:function(){return i.DEFAULT_LIMIT_AFTER}}),Object.defineProperty(e,"DEFAULT_LIMIT_BEFORE",{enumerable:!0,get:function(){return i.DEFAULT_LIMIT_BEFORE}});var n=o(17050);Object.defineProperty(e,"WebSocketClient",{enumerable:!0,get:function(){return s(n).default}})},17050:(t,e,o)=>{o(33948),Object.defineProperty(e,"__esModule",{value:!0});const s=3e5;e.default=class{constructor(){this.eventCallback=null,this.firstConnectCallback=null,this.reconnectCallback=null,this.missedEventCallback=null,this.errorCallback=null,this.closeCallback=null,this.messageListeners=new Set,this.firstConnectListeners=new Set,this.reconnectListeners=new Set,this.missedMessageListeners=new Set,this.errorListeners=new Set,this.closeListeners=new Set,this.conn=null,this.connectionUrl=null,this.responseSequence=1,this.serverSequence=0,this.connectFailCount=0,this.responseCallbacks={},this.connectionId=""}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.connectionUrl,e=arguments.length>1?arguments[1]:void 0;this.conn||(null!=t?(0===this.connectFailCount&&console.log("websocket connecting to "+t),this.conn=new WebSocket("".concat(t,"?connection_id=").concat(this.connectionId,"&sequence_number=").concat(this.serverSequence)),this.connectionUrl=t,this.conn.onopen=()=>{var t,o;e&&this.sendMessage("authentication_challenge",{token:e}),this.connectFailCount>0?(console.log("websocket re-established connection"),null===(t=this.reconnectCallback)||void 0===t||t.call(this),this.reconnectListeners.forEach((t=>t()))):(this.firstConnectCallback||this.firstConnectListeners.size>0)&&(null===(o=this.firstConnectCallback)||void 0===o||o.call(this),this.firstConnectListeners.forEach((t=>t()))),this.connectFailCount=0},this.conn.onclose=()=>{var o;this.conn=null,this.responseSequence=1,0===this.connectFailCount&&console.log("websocket closed"),this.connectFailCount++,null===(o=this.closeCallback)||void 0===o||o.call(this,this.connectFailCount),this.closeListeners.forEach((t=>t(this.connectFailCount)));let i=3e3;this.connectFailCount>7&&(i=3e3*this.connectFailCount*this.connectFailCount,i>s&&(i=s)),i+=2e3*Math.random(),setTimeout((()=>{this.initialize(t,e)}),i)},this.conn.onerror=t=>{var e;this.connectFailCount<=1&&(console.log("websocket error"),console.log(t)),null===(e=this.errorCallback)||void 0===e||e.call(this,t),this.errorListeners.forEach((e=>e(t)))},this.conn.onmessage=t=>{var e,o,s;const i=JSON.parse(t.data);if(i.seq_reply)i.error&&console.log(i),this.responseCallbacks[i.seq_reply]&&(this.responseCallbacks[i.seq_reply](i),Reflect.deleteProperty(this.responseCallbacks,i.seq_reply));else if(this.eventCallback||this.messageListeners.size>0){if("hello"===i.event&&(this.missedEventCallback||this.missedMessageListeners.size>0)&&(console.log("got connection id ",i.data.connection_id),""!==this.connectionId&&this.connectionId!==i.data.connection_id&&(console.log("long timeout, or server restart, or sequence number is not found."),null===(e=this.missedEventCallback)||void 0===e||e.call(this),this.missedMessageListeners.forEach((t=>t())),this.serverSequence=0),this.connectionId=i.data.connection_id),i.seq!==this.serverSequence)return console.log("missed websocket event, act_seq="+i.seq+" exp_seq="+this.serverSequence),this.connectFailCount=0,this.responseSequence=1,void(null===(o=this.conn)||void 0===o||o.close());this.serverSequence=i.seq+1,null===(s=this.eventCallback)||void 0===s||s.call(this,i),this.messageListeners.forEach((t=>t(i)))}}):console.log("websocket must have connection url"))}setEventCallback(t){this.eventCallback=t}addMessageListener(t){this.messageListeners.add(t)}removeMessageListener(t){this.messageListeners.delete(t)}setFirstConnectCallback(t){this.firstConnectCallback=t}addFirstConnectListener(t){this.firstConnectListeners.add(t)}removeFirstConnectListener(t){this.firstConnectListeners.delete(t)}setReconnectCallback(t){this.reconnectCallback=t}addReconnectListener(t){this.reconnectListeners.add(t)}removeReconnectListener(t){this.reconnectListeners.delete(t)}setMissedEventCallback(t){this.missedEventCallback=t}addMissedMessageListener(t){this.missedMessageListeners.add(t)}removeMissedMessageListener(t){this.missedMessageListeners.delete(t)}setErrorCallback(t){this.errorCallback=t}addErrorListener(t){this.errorListeners.add(t)}removeErrorListener(t){this.errorListeners.delete(t)}setCloseCallback(t){this.closeCallback=t}addCloseListener(t){this.closeListeners.add(t)}removeCloseListener(t){this.closeListeners.delete(t)}close(){this.connectFailCount=0,this.responseSequence=1,this.conn&&this.conn.readyState===WebSocket.OPEN&&(this.conn.onclose=()=>{},this.conn.close(),this.conn=null,console.log("websocket closed"))}sendMessage(t,e,o){const s={action:t,seq:this.responseSequence++,data:e};o&&(this.responseCallbacks[s.seq]=o),this.conn&&this.conn.readyState===WebSocket.OPEN?this.conn.send(JSON.stringify(s)):this.conn&&this.conn.readyState!==WebSocket.CLOSED||(this.conn=null,this.initialize())}userTyping(t,e,o){const s={channel_id:t,parent_id:e};this.sendMessage("user_typing",s,o)}userUpdateActiveStatus(t,e,o){const s={user_is_active:t,manual:e};this.sendMessage("user_update_active_status",s,o)}getStatuses(t){this.sendMessage("get_statuses",null,t)}getStatusesByIds(t,e){const o={user_ids:t};this.sendMessage("get_statuses_by_ids",o,e)}}},27852:(t,e,o)=>{var s,i=o(82109),n=o(1702),c=o(31236).f,a=o(17466),h=o(41340),r=o(3929),d=o(84488),g=o(84964),u=o(31913),l=n("".endsWith),m=n("".slice),p=Math.min,_=g("endsWith");i({target:"String",proto:!0,forced:!(!u&&!_&&(s=c(String.prototype,"endsWith"),s&&!s.writable)||_)},{endsWith:function(t){var e=h(d(this));r(t);var o=arguments.length>1?arguments[1]:void 0,s=e.length,i=void 0===o?s:p(a(o),s),n=h(t);return l?l(e,n,i):m(e,i-n.length,i)===n}})}}]);
//# sourceMappingURL=5529.d7a2bab7619dd242a5fc.js.map