(self.webpackChunkmattermost_webapp=self.webpackChunkmattermost_webapp||[]).push([[9769,2896],{10322:(t,e,n)=>{"use strict";n.d(e,{v:()=>o});var r=n(54156),a=n.n(r);function o(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r=t=>a().createElement(a().Suspense,{fallback:n},a().createElement(e,t));return r.displayName=t,r}},54385:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var r=n(54156),a=n(64323),o=n(89754),i=n(35588);const s=()=>{const t=(0,a.useDispatch)(),e=(0,a.useSelector)(o.ym),n=(0,r.useRef)(!1);return(0,r.useEffect)((()=>{n.current?t((0,i.uz)()):n.current=!0}),[e]),null}},94094:(t,e,n)=>{"use strict";n.d(e,{No:()=>C,Sn:()=>T,Wp:()=>m,Wr:()=>A,Yw:()=>N,ay:()=>R,cN:()=>I,k4:()=>g,t6:()=>L,uN:()=>S,uu:()=>v,yz:()=>O}),n(88674),n(33948),n(85827),n(41817);var r=n(63241),a=n(28808),o=n(4215),i=n(10386),s=n(28399),c=n(3626),u=n(85886),E=n(69588),_=n(12707),d=n(64784),l=n(13473);function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){y(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function y(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function C(t,e){return h(t,{collapsed:e})}function m(t,e){return h(t,{sorting:e})}function h(t,e){return async(n,r)=>{const c=r(),u=(0,_.rc)(c),d=(0,E.n3)(c,t),l=f(f({},d),e);n({type:a.Y.RECEIVED_CATEGORY,data:l});try{await o.je.updateChannelCategory(u,d.team_id,l)}catch(t){return n({type:a.Y.RECEIVED_CATEGORY,data:d}),(0,s._f)(t,n,r),n((0,i.H)(t)),{error:t}}return{data:l}}}function S(t,e){return async(n,c)=>{const u=c(),d=(0,E.n3)(u,t),l=await n(function(t){return async(e,n)=>{const r=n(),a=(0,_.rc)(r);let c;try{c=await o.je.updateChannelCategory(a,t.team_id,t)}catch(t){return(0,s._f)(t,e,n),e((0,i.H)(t)),{error:t}}return{data:c}}}(f(f({},d),{},{muted:e})));if("error"in l)return l;const p=l.data;return n((0,r.$C)([{type:a.Y.RECEIVED_CATEGORY,data:p},...p.channel_ids.map((t=>({type:a.d4.SET_CHANNEL_MUTED,data:{channelId:t,muted:e}})))]))}}function I(t){return async(e,n)=>{const c=(0,_.rc)(n());let u;try{u=await o.je.getChannelCategories(c,t)}catch(t){return(0,s._f)(t,e,n),e((0,i.H)(t)),{error:t}}return e((0,r.$C)([{type:a.Y.RECEIVED_CATEGORIES,data:u.categories},{type:a.Y.RECEIVED_CATEGORY_ORDER,data:{teamId:t,order:u.order}}]))}}function T(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(n,r)=>{const o=r(),i=Object.values((0,E.Hj)(o));if(t.type===c.LQ.DM_CHANNEL||t.type===c.LQ.GM_CHANNEL){const e=i.filter((t=>t.type===u.y.DIRECT_MESSAGES)),r=i.filter((e=>-1!==e.channel_ids.findIndex((e=>e===t.id)))),o=e.filter((t=>-1===r.findIndex((e=>t.team_id===e.team_id))));return n({type:a.Y.RECEIVED_CATEGORIES,data:o.map((e=>f(f({},e),{},{channel_ids:(0,l.cA)(e.channel_ids,t.id,0)})))})}if(i.some((e=>e.channel_ids.some((e=>e===t.id)))))return{data:!1};const s=(0,E.Ah)(o,t.team_id,u.y.CHANNELS);return s?n(e?R(s.id,t.id):{type:a.Y.RECEIVED_CATEGORY,data:f(f({},s),{},{channel_ids:(0,l.cA)(s.channel_ids,t.id,0)})}):{data:!1}}}function R(t,e){return function(t,e,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return async(c,p)=>{const y=p(),C=(0,E.n3)(y,t),m=(0,_.rc)(y);let h=C.sorting;r&&C.type!==u.y.DIRECT_MESSAGES&&C.sorting===d.r.Default&&(h=d.r.Manual);const S=[f(f({},C),{},{sorting:h,channel_ids:(0,l.cA)(C.channel_ids,e,n)})],I=(0,E.Me)(p(),C.team_id,e);I&&I.id!==C.id&&S.push(f(f({},I),{},{channel_ids:(0,l.cl)(I.channel_ids,e)}));const T=c({type:a.Y.RECEIVED_CATEGORIES,data:S});try{await o.je.updateChannelCategories(m,C.team_id,S)}catch(t){(0,s._f)(t,c,p),c((0,i.H)(t));const e=[C];return I&&I.id!==C.id&&e.push(I),c({type:a.Y.RECEIVED_CATEGORIES,data:e}),{error:t}}return T}}(t,e,0,!1)}function N(t,e,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return async(c,p)=>{const y=p(),C=(0,E.n3)(y,t),m=(0,_.rc)(y);let h=C.sorting;r&&C.type!==u.y.DIRECT_MESSAGES&&C.sorting===d.r.Default&&(h=d.r.Manual);let S={[C.id]:f(f({},C),{},{sorting:h,channel_ids:(0,l.FY)(C.channel_ids,e,n)})},I={[C.id]:C},T={};e.forEach((t=>{const e=(0,E.Me)(p(),C.team_id,t);e&&e.id!==C.id&&(I=f(f({},I),{},{[e.id]:e}),T=f(f({},T),{},{[t]:e.id}),S=f(f({},S),{},{[e.id]:f(f({},S[e.id]||e),{},{channel_ids:(0,l.cl)((S[e.id]||e).channel_ids,t)})}))}));const R=Object.values(S).reduce(((t,e)=>(t.push(e),t)),[]),N=c({type:a.Y.RECEIVED_CATEGORIES,data:R});try{await o.je.updateChannelCategories(m,C.team_id,R)}catch(t){(0,s._f)(t,c,p),c((0,i.H)(t));const e=Object.values(I).reduce(((t,e)=>(t.push(e),t)),[]);return c({type:a.Y.RECEIVED_CATEGORIES,data:e}),{error:t}}return N}}function A(t,e,n){return async(r,c)=>{const u=c(),d=(0,E.on)(u,t),p=(0,_.rc)(u),f=(0,l.cA)(d,e,n),y=r({type:a.Y.RECEIVED_CATEGORY_ORDER,data:{teamId:t,order:f}});try{await o.je.updateChannelCategoryOrder(p,t,f)}catch(e){return(0,s._f)(e,r,c),r((0,i.H)(e)),r({type:a.Y.RECEIVED_CATEGORY_ORDER,data:{teamId:t,order:d}}),{error:e}}return y}}function O(t,e){return{type:a.Y.RECEIVED_CATEGORY_ORDER,data:{teamId:t,order:e}}}function g(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return async(r,a)=>{const c=(0,_.rc)(a());let u;try{u=await o.je.createChannelCategory(c,t,{team_id:t,user_id:c,display_name:e,channel_ids:n})}catch(t){return(0,s._f)(t,r,a),r((0,i.H)(t)),{error:t}}return{data:u}}}function L(t,e){return h(t,{display_name:e})}function v(t){return async(e,n)=>{const r=n(),a=(0,E.n3)(r,t),c=(0,_.rc)(r);try{await o.je.deleteChannelCategory(c,a.team_id,a.id)}catch(t){return(0,s._f)(t,e,n),e((0,i.H)(t)),{error:t}}return{data:!0}}}},88229:(t,e,n)=>{"use strict";n.d(e,{Ao:()=>b,Ar:()=>pt,Av:()=>X,CT:()=>D,Dn:()=>lt,Eo:()=>at,Fk:()=>V,Ft:()=>U,Gc:()=>O,IU:()=>J,J3:()=>W,JJ:()=>G,Ky:()=>$,L1:()=>_t,Ny:()=>Z,O0:()=>rt,Or:()=>Et,PP:()=>tt,QE:()=>N,SU:()=>Q,TL:()=>F,WQ:()=>Y,X1:()=>ct,XK:()=>nt,Z$:()=>q,ZE:()=>dt,aL:()=>Ct,aO:()=>v,aU:()=>L,am:()=>mt,bg:()=>j,ey:()=>x,f_:()=>yt,g$:()=>K,gI:()=>B,hg:()=>ut,mi:()=>A,mr:()=>P,mx:()=>et,n$:()=>M,ng:()=>w,oD:()=>H,oY:()=>ft,r6:()=>z,vX:()=>it,wE:()=>ot,xO:()=>g,y5:()=>st,zz:()=>k}),n(88674),n(74916),n(23123),n(33948),n(39714),n(91058),n(41817);var r=n(63241),a=n(28808),o=n(4215),i=n(3626),s=n(85886),c=n(32524),u=n(69588),E=n(9276),_=n(22742),d=n(5596),l=n(80555),p=n(16794),f=n(94094),y=n(10386),C=n(28399),m=n(33969),h=n(74147),S=n(73396);function I(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function T(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?I(Object(n),!0).forEach((function(e){R(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function R(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function N(t){return{type:a.d4.SELECT_CHANNEL,data:t}}function A(t,e){return async(n,s)=>{let c;try{c=await o.je.createChannel(t)}catch(t){return(0,C._f)(t,n,s),n({type:a.d4.CREATE_CHANNEL_FAILURE,error:t}),n((0,y.H)(t)),{error:t}}const u={channel_id:c.id,user_id:e,roles:"".concat(i.LQ.CHANNEL_USER_ROLE," ").concat(i.LQ.CHANNEL_ADMIN_ROLE),last_viewed_at:0,msg_count:0,mention_count:0,notify_props:{desktop:"default",mark_unread:"all"},last_update_at:c.create_at},E=[],{channels:_,myMembers:d}=s().entities.channels;return _[c.id]||E.push({type:a.d4.RECEIVED_CHANNEL,data:c}),d[c.id]||(E.push({type:a.d4.RECEIVED_MY_CHANNEL_MEMBER,data:u}),n((0,h.k3)(u.roles.split(" ")))),n((0,r.$C)([...E,{type:a.d4.CREATE_CHANNEL_SUCCESS}])),n((0,f.Sn)(c,!0)),{data:c}}}function O(t,e){return async(n,s)=>{let c;n({type:a.d4.CREATE_CHANNEL_REQUEST,data:null});try{c=await o.je.createDirectChannel([t,e])}catch(t){return(0,C._f)(t,n,s),n({type:a.d4.CREATE_CHANNEL_FAILURE,error:t}),n((0,y.H)(t)),{error:t}}const u={channel_id:c.id,user_id:t,roles:"".concat(i.LQ.CHANNEL_USER_ROLE),last_viewed_at:0,msg_count:0,mention_count:0,notify_props:{desktop:"default",mark_unread:"all"},last_update_at:c.create_at},E=[{user_id:t,category:i.uP.CATEGORY_DIRECT_CHANNEL_SHOW,name:e,value:"true"},{user_id:t,category:i.uP.CATEGORY_CHANNEL_OPEN_TIME,name:c.id,value:(new Date).getTime().toString()}];return(0,m.$A)(t,E)(n),n((0,r.$C)([{type:a.d4.RECEIVED_CHANNEL,data:c},{type:a.d4.RECEIVED_MY_CHANNEL_MEMBER,data:u},{type:a.wT.RECEIVED_PREFERENCES,data:E},{type:a.d4.CREATE_CHANNEL_SUCCESS},{type:a.bZ.RECEIVED_PROFILES_LIST_IN_CHANNEL,id:c.id,data:[{id:t},{id:e}]}])),n((0,f.Sn)(c)),n((0,h.k3)(u.roles.split(" "))),{data:c}}}function g(t){return async(e,n)=>{const{currentUserId:r}=n().entities.users,a=[{user_id:r,category:i.uP.CATEGORY_GROUP_CHANNEL_SHOW,name:t,value:"true"},{user_id:r,category:i.uP.CATEGORY_CHANNEL_OPEN_TIME,name:t,value:(new Date).getTime().toString()}];return e((0,m.$A)(r,a))}}function L(t){return async(e,n)=>{e({type:a.d4.CREATE_CHANNEL_REQUEST,data:null});const{currentUserId:s}=n().entities.users;let c;try{c=await o.je.createGroupChannel(t)}catch(t){return(0,C._f)(t,e,n),e({type:a.d4.CREATE_CHANNEL_FAILURE,error:t}),e((0,y.H)(t)),{error:t}}let u={channel_id:c.id,user_id:s,roles:"".concat(i.LQ.CHANNEL_USER_ROLE),last_viewed_at:0,msg_count:0,mention_count:0,msg_count_root:0,mention_count_root:0,notify_props:{desktop:"default",mark_unread:"all"},last_update_at:c.create_at};if(c.total_msg_count>0){const t=(0,E.Or)(n(),c.id);if(null===t)try{u=await o.je.getMyChannelMember(c.id)}catch(t){e((0,y.H)(t))}else u=t}e(g(c.id));const _=t.map((t=>({id:t})));return _.push({id:s}),e((0,r.$C)([{type:a.d4.RECEIVED_CHANNEL,data:c},{type:a.d4.RECEIVED_MY_CHANNEL_MEMBER,data:u},{type:a.d4.CREATE_CHANNEL_SUCCESS},{type:a.bZ.RECEIVED_PROFILES_LIST_IN_CHANNEL,id:c.id,data:_}])),e((0,f.Sn)(c)),e((0,h.k3)(u&&u.roles&&u.roles.split(" ")||[])),{data:c}}}function v(t,e){return async(n,i)=>{let s;n({type:a.d4.UPDATE_CHANNEL_REQUEST,data:null});try{s=await o.je.patchChannel(t,e)}catch(t){return(0,C._f)(t,n,i),n({type:a.d4.UPDATE_CHANNEL_FAILURE,error:t}),n((0,y.H)(t)),{error:t}}return n((0,r.$C)([{type:a.d4.RECEIVED_CHANNEL,data:s},{type:a.d4.UPDATE_CHANNEL_SUCCESS}])),{data:s}}}function D(t,e){return async(n,i)=>{let s;n({type:a.d4.UPDATE_CHANNEL_REQUEST,data:null});try{s=await o.je.updateChannelPrivacy(t,e)}catch(t){return(0,C._f)(t,n,i),n({type:a.d4.UPDATE_CHANNEL_FAILURE,error:t}),n((0,y.H)(t)),{error:t}}return n((0,r.$C)([{type:a.d4.RECEIVED_CHANNEL,data:s},{type:a.d4.UPDATE_CHANNEL_SUCCESS}])),{data:s}}}function M(t,e,n){return async(r,i)=>{const s=T({user_id:t,channel_id:e},n);try{await o.je.updateChannelNotifyProps(s)}catch(t){return(0,C._f)(t,r,i),r((0,y.H)(t)),{error:t}}const c=(i().entities.channels.myMembers[e]||{}).notify_props||{};return r({type:a.d4.RECEIVED_CHANNEL_PROPS,data:{channel_id:e,notifyProps:T(T({},c),s)}}),{data:!0}}}function U(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return async(r,i)=>{let s;try{s=await o.je.getChannelByNameAndTeamName(t,e,n)}catch(t){return(0,C._f)(t,r,i),r({type:a.d4.CHANNELS_FAILURE,error:t}),r((0,y.H)(t)),{error:t}}return r({type:a.d4.RECEIVED_CHANNEL,data:s}),{data:s}}}function P(t){return async(e,n)=>{let r;try{r=await o.je.getChannel(t)}catch(t){return(0,C._f)(t,e,n),e({type:a.d4.CHANNELS_FAILURE,error:t}),e((0,y.H)(t)),{error:t}}return e({type:a.d4.RECEIVED_CHANNEL,data:r}),{data:r}}}function b(t){return async(e,n)=>{let i,s;try{const e=o.je.getChannel(t),n=o.je.getMyChannelMember(t);i=await e,s=await n}catch(t){return(0,C._f)(t,e,n),e({type:a.d4.CHANNELS_FAILURE,error:t}),e((0,y.H)(t)),{error:t}}return e((0,r.$C)([{type:a.d4.RECEIVED_CHANNEL,data:i},{type:a.d4.RECEIVED_MY_CHANNEL_MEMBER,data:s}])),e((0,h.k3)(s.roles.split(" "))),{data:{channel:i,member:s}}}}function w(t){return async(e,n)=>{let r;try{const e=o.je.getChannelTimezones(t);r=await e}catch(t){return(0,C._f)(t,e,n),e((0,y.H)(t)),{error:t}}return{data:r}}}function j(t){return async(e,n)=>{let i,s;e({type:a.d4.CHANNELS_REQUEST,data:null});const c=n(),u=(0,p.mu)((0,_.HF)(c),5,21);try{[i,s]=await Promise.all([o.je.getMyChannels(t,u),o.je.getMyChannelMembers(t)])}catch(t){return(0,C._f)(t,e,n),e({type:a.d4.CHANNELS_FAILURE,error:t}),e((0,y.H)(t)),{error:t}}const{currentUserId:E}=c.entities.users,{currentChannelId:d}=c.entities.channels;e((0,r.$C)([{type:a.d4.RECEIVED_CHANNELS,teamId:t,data:i,currentChannelId:d},{type:a.d4.CHANNELS_SUCCESS},{type:a.d4.RECEIVED_MY_CHANNEL_MEMBERS,data:s,sync:!u,channels:i,remove:(0,l.h$)(c,t),currentUserId:E,currentChannelId:d}]));const f=new Set;for(const t of s)for(const e of t.roles.split(" "))f.add(e);return f.size>0&&e((0,h.k3)(f)),{data:{channels:i,members:s}}}}function H(){return async(t,e)=>{const n=e(),{currentUserId:i}=n.entities.users;let s,c=[],u=!0,E=0;do{try{await o.je.getAllChannelsMembers(i,E,200).then((t=>{c=[...c,...t],E++,t.length<200&&(u=!1)}))}catch(n){return(0,C._f)(n,t,e),t((0,y.H)(n)),{error:n}}}while(u&&E<=2);try{s=await o.je.getAllTeamsChannels()}catch(n){return(0,C._f)(n,t,e),t((0,y.H)(n)),{error:n}}return t((0,r.$C)([{type:a.d4.RECEIVED_ALL_CHANNELS,data:s},{type:a.d4.RECEIVED_MY_CHANNEL_MEMBERS,data:c,currentUserId:i}])),{data:{channels:s,channelsMembers:c}}}}function V(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.LQ.CHANNELS_CHUNK_SIZE;return async(r,i)=>{let s;try{const r=o.je.getChannelMembers(t,e,n);s=await r}catch(t){return(0,C._f)(t,r,i),r((0,y.H)(t)),{error:t}}const c=s.map((t=>t.user_id));return(0,S.C4)(c)(r,i),r({type:a.d4.RECEIVED_CHANNEL_MEMBERS,data:s}),{data:s}}}function F(t){return async(e,n)=>{const i=n(),{currentUserId:s}=i.entities.users,{channels:c,myMembers:u}=i.entities.channels,E=c[t],_=u[t];return o.je.trackEvent("action","action_channels_leave",{channel_id:t}),e({type:a.d4.LEAVE_CHANNEL,data:{id:t,user_id:s,team_id:E.team_id,type:E.type}}),async function(){try{await o.je.removeFromChannel(s,t)}catch(t){e((0,r.$C)([{type:a.d4.RECEIVED_CHANNEL,data:E},{type:a.d4.RECEIVED_MY_CHANNEL_MEMBER,data:_}])),e((0,f.Sn)(E,!1))}}(),{data:!0}}}function G(t,e,n,s){return async(c,u)=>{if(!n&&!s)return{data:null};let E,_;try{n?(E=await o.je.addToChannel(t,n),_=await o.je.getChannel(n)):(_=await o.je.getChannelByName(e,s,!0),E=_.type===i.LQ.GM_CHANNEL||_.type===i.LQ.DM_CHANNEL?await o.je.getChannelMember(_.id,t):await o.je.addToChannel(t,_.id))}catch(t){return(0,C._f)(t,c,u),c((0,y.H)(t)),{error:t}}return o.je.trackEvent("action","action_channels_join",{channel_id:n}),c((0,r.$C)([{type:a.d4.RECEIVED_CHANNEL,data:_},{type:a.d4.RECEIVED_MY_CHANNEL_MEMBER,data:E}])),c((0,f.Sn)(_)),E&&c((0,h.k3)(E.roles.split(" "))),{data:{channel:_,member:E}}}}function k(t){return async(e,n)=>{let r=n();const i="true"===r.entities.general.config.ExperimentalViewArchivedChannels;try{await o.je.deleteChannel(t)}catch(t){return(0,C._f)(t,e,n),e((0,y.H)(t)),{error:t}}r=n();const{currentChannelId:s}=r.entities.channels;if(t===s&&!i){const t=(0,d.ev)(r),n=(0,E.iC)(r,t),o=(0,l.ZO)(n,(0,E.fG)(r,t));o&&o.id&&e({type:a.d4.SELECT_CHANNEL,data:o.id})}return e({type:a.d4.DELETE_CHANNEL_SUCCESS,data:{id:t,viewArchivedChannels:i}}),{data:!0}}}function Z(t){return async(e,n)=>{try{await o.je.unarchiveChannel(t)}catch(t){return(0,C._f)(t,e,n),e((0,y.H)(t)),{error:t}}const r=n(),i="true"===(0,_.iE)(r).ExperimentalViewArchivedChannels;return e({type:a.d4.UNARCHIVED_CHANNEL_SUCCESS,data:{id:t,viewArchivedChannels:i}}),{data:!0}}}function Q(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return async(n,s)=>{const{currentUserId:c}=s().entities.users,{myPreferences:u}=s().entities.preferences,_=u["".concat(i.uP.CATEGORY_CHANNEL_APPROXIMATE_VIEW_TIME,"--").concat(t)],d=_?parseInt(_.value,10):0,l=(0,E.Zm)(s(),e);if(d<(new Date).getTime()-108e5){const e=[{user_id:c,category:i.uP.CATEGORY_CHANNEL_APPROXIMATE_VIEW_TIME,name:t,value:(new Date).getTime().toString()}];(0,m.$A)(c,e)(n)}try{await o.je.viewMyChannel(t,l?"":e)}catch(t){return(0,C._f)(t,n,s),n((0,y.H)(t)),{error:t}}const p=[],{myMembers:f}=s().entities.channels,S=f[t];S&&((0,E.Zm)(s(),t)&&p.push({type:a.d4.REMOVE_MANUALLY_UNREAD,data:{channelId:t}}),p.push({type:a.d4.RECEIVED_MY_CHANNEL_MEMBER,data:T(T({},S),{},{last_viewed_at:(new Date).getTime()})}),n((0,h.k3)(S.roles.split(" "))));const I=f[e];return!l&&I&&(p.push({type:a.d4.RECEIVED_MY_CHANNEL_MEMBER,data:T(T({},I),{},{last_viewed_at:(new Date).getTime()})}),n((0,h.k3)(I.roles.split(" ")))),n((0,r.$C)(p)),{data:!0}}}function B(t,e){return(n,a)=>{const o=Y(a,t,e);return n((0,r.$C)(o))}}function Y(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const r=[],o=t(),{myMembers:i}=o.entities.channels,s=i[e];s&&(r.push({type:a.d4.RECEIVED_MY_CHANNEL_MEMBER,data:T(T({},s),{},{last_viewed_at:Date.now()})}),(0,E.Zm)(o,e)&&r.push({type:a.d4.REMOVE_MANUALLY_UNREAD,data:{channelId:e}}));const c=i[n];return c&&!(0,E.Zm)(o,n)&&r.push({type:a.d4.RECEIVED_MY_CHANNEL_MEMBER,data:T(T({},c),{},{last_viewed_at:Date.now()})}),r}function $(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.LQ.CHANNELS_CHUNK_SIZE;return async(i,s)=>{let c;i({type:a.d4.GET_CHANNELS_REQUEST,data:null});try{c=await o.je.getChannels(t,e,n)}catch(t){return(0,C._f)(t,i,s),i({type:a.d4.GET_CHANNELS_FAILURE,error:t}),i((0,y.H)(t)),{error:t}}return i((0,r.$C)([{type:a.d4.RECEIVED_CHANNELS,teamId:t,data:c},{type:a.d4.GET_CHANNELS_SUCCESS}])),{data:c}}}function x(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.LQ.CHANNELS_CHUNK_SIZE;return async(r,i)=>{let s;try{s=await o.je.getArchivedChannels(t,e,n)}catch(t){return(0,C._f)(t,r,i),{error:t}}return r({type:a.d4.RECEIVED_CHANNELS,teamId:t,data:s}),{data:s}}}function K(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.LQ.CHANNELS_CHUNK_SIZE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return async(i,E)=>{let _;i({type:a.d4.GET_ALL_CHANNELS_REQUEST,data:null});try{_=await o.je.getAllChannels(t,e,n,s,!0,c,u)}catch(t){return(0,C._f)(t,i,E),i({type:a.d4.GET_ALL_CHANNELS_FAILURE,error:t}),i((0,y.H)(t)),{error:t}}return i((0,r.$C)([{type:a.d4.RECEIVED_ALL_CHANNELS,data:_.channels},{type:a.d4.GET_ALL_CHANNELS_SUCCESS},{type:a.d4.RECEIVED_TOTAL_CHANNEL_COUNT,data:_.total_count}])),{data:_}}}function J(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.LQ.CHANNELS_CHUNK_SIZE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return async(i,u)=>{let E;i({type:a.d4.GET_ALL_CHANNELS_REQUEST,data:null});try{E=await o.je.getAllChannels(t,e,n,s,!1,!1,c)}catch(t){return(0,C._f)(t,i,u),i({type:a.d4.GET_ALL_CHANNELS_FAILURE,error:t}),i((0,y.H)(t)),{error:t}}return i((0,r.$C)([{type:a.d4.RECEIVED_ALL_CHANNELS,data:E},{type:a.d4.GET_ALL_CHANNELS_SUCCESS}])),{data:E}}}function W(t,e){return async(n,i)=>{let s;n({type:a.d4.GET_CHANNELS_REQUEST,data:null});try{s=await o.je.autocompleteChannels(t,e)}catch(t){return(0,C._f)(t,n,i),n({type:a.d4.GET_CHANNELS_FAILURE,error:t}),n((0,y.H)(t)),{error:t}}return n((0,r.$C)([{type:a.d4.RECEIVED_CHANNELS,teamId:t,data:s},{type:a.d4.GET_CHANNELS_SUCCESS}])),{data:s}}}function q(t,e){return async(n,i)=>{let s;n({type:a.d4.GET_CHANNELS_REQUEST,data:null});try{s=await o.je.autocompleteChannelsForSearch(t,e)}catch(t){return(0,C._f)(t,n,i),n({type:a.d4.GET_CHANNELS_FAILURE,error:t}),n((0,y.H)(t)),{error:t}}return n((0,r.$C)([{type:a.d4.RECEIVED_CHANNELS,teamId:t,data:s},{type:a.d4.GET_CHANNELS_SUCCESS}])),{data:s}}}function z(t,e,n){return async(i,s)=>{let c;i({type:a.d4.GET_CHANNELS_REQUEST,data:null});try{c=n?await o.je.searchArchivedChannels(t,e):await o.je.searchChannels(t,e)}catch(t){return(0,C._f)(t,i,s),i({type:a.d4.GET_CHANNELS_FAILURE,error:t}),i((0,y.H)(t)),{error:t}}return i((0,r.$C)([{type:a.d4.RECEIVED_CHANNELS,teamId:t,data:c},{type:a.d4.GET_CHANNELS_SUCCESS}])),{data:c}}}function X(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async(n,i)=>{let s;n({type:a.d4.GET_ALL_CHANNELS_REQUEST,data:null});try{s=await o.je.searchAllChannels(t,e)}catch(t){return(0,C._f)(t,n,i),n({type:a.d4.GET_ALL_CHANNELS_FAILURE,error:t}),n((0,y.H)(t)),{error:t}}const c=s.channels||s;return n((0,r.$C)([{type:a.d4.RECEIVED_ALL_CHANNELS,data:c},{type:a.d4.GET_ALL_CHANNELS_SUCCESS}])),{data:s}}}function tt(t){return(0,C.Vs)({clientFunc:o.je.searchGroupChannels,params:[t]})}function et(t){return async(e,n)=>{let r;try{r=await o.je.getChannelStats(t)}catch(t){return(0,C._f)(t,e,n),e((0,y.H)(t)),{error:t}}return e({type:a.d4.RECEIVED_CHANNEL_STATS,data:r}),{data:r}}}function nt(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return async(i,s)=>{let c;try{c=await o.je.addToChannel(e,t,n)}catch(t){return(0,C._f)(t,i,s),i((0,y.H)(t)),{error:t}}return o.je.trackEvent("action","action_channels_add_member",{channel_id:t}),i((0,r.$C)([{type:a.bZ.RECEIVED_PROFILE_IN_CHANNEL,data:{id:t,user_id:e}},{type:a.d4.RECEIVED_CHANNEL_MEMBER,data:c},{type:a.d4.ADD_CHANNEL_MEMBER_SUCCESS,id:t}],"ADD_CHANNEL_MEMBER.BATCH")),{data:c}}}function rt(t,e){return async(n,i)=>{try{await o.je.removeFromChannel(e,t)}catch(t){return(0,C._f)(t,n,i),n((0,y.H)(t)),{error:t}}return o.je.trackEvent("action","action_channels_remove_member",{channel_id:t}),n((0,r.$C)([{type:a.bZ.RECEIVED_PROFILE_NOT_IN_CHANNEL,data:{id:t,user_id:e}},{type:a.d4.REMOVE_CHANNEL_MEMBER_SUCCESS,id:t}],"REMOVE_CHANNEL_MEMBER.BATCH")),{data:!0}}}function at(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return async(o,i)=>{const s=i(),c=(0,E.Zm)(s,e),u=it(i,t,e);if(n){o(ot(t,c?"":e));const n=Date.now();u.push({type:a.d4.RECEIVED_LAST_VIEWED_AT,data:{channel_id:t,last_viewed_at:n}}),e&&!c&&u.push({type:a.d4.RECEIVED_LAST_VIEWED_AT,data:{channel_id:e,last_viewed_at:n}})}return u.length>0&&o((0,r.$C)(u)),{data:!0}}}function ot(t,e){return(n,r)=>(o.je.viewMyChannel(t,e).then().catch((t=>((0,C._f)(t,n,r),n((0,y.H)(t)),{error:t}))),{data:!0})}function it(t,e,n){const r=t(),{channels:o,messageCounts:i,myMembers:s}=r.entities.channels,c=(0,E.Zm)(r,n),u=o[e],_=i[e],d=!c&&n?o[n]:null,l=!c&&n?i[n]:null,p=s[e],f=!c&&n?s[n]:null,y=[];return u&&p&&(y.push({type:a.d4.DECREMENT_UNREAD_MSG_COUNT,data:{teamId:u.team_id,channelId:e,amount:_.total-p.msg_count,amountRoot:_.root-p.msg_count_root}}),y.push({type:a.d4.DECREMENT_UNREAD_MENTION_COUNT,data:{teamId:u.team_id,channelId:e,amount:p.mention_count,amountRoot:p.mention_count_root,amountUrgent:p.urgent_mention_count}})),u&&(0,E.Zm)(t(),e)&&y.push({type:a.d4.REMOVE_MANUALLY_UNREAD,data:{channelId:e}}),d&&f&&l&&(y.push({type:a.d4.DECREMENT_UNREAD_MSG_COUNT,data:{teamId:d.team_id,channelId:n,amount:l.total-f.msg_count,amountRoot:l.root-f.msg_count_root}}),y.push({type:a.d4.DECREMENT_UNREAD_MENTION_COUNT,data:{teamId:d.team_id,channelId:n,amount:f.mention_count,amountRoot:f.mention_count_root,amountUrgent:f.urgent_mention_count}})),y}function st(t,e,n,r){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"";const u=t(),{myMembers:E}=u.entities.channels,{currentUserId:_}=u.entities.users,d=[{type:a.d4.INCREMENT_UNREAD_MSG_COUNT,data:{teamId:e,channelId:n,amount:1,amountRoot:i?1:0,onlyMentions:E[n]&&E[n].notify_props&&E[n].notify_props.mark_unread===c.F.MENTION,fetchedChannelMember:o}}];return o||d.push({type:a.d4.INCREMENT_TOTAL_MSG_COUNT,data:{channelId:n,amountRoot:i?1:0,amount:1}}),r&&-1!==r.indexOf(_)&&d.push({type:a.d4.INCREMENT_UNREAD_MENTION_COUNT,data:{teamId:e,channelId:n,amountRoot:i?1:0,amount:1,amountUrgent:"urgent"===s?1:0,fetchedChannelMember:o}}),d}function ct(t,e){return(0,C.Vs)({clientFunc:o.je.getChannelMembersByIds,onSuccess:a.d4.RECEIVED_CHANNEL_MEMBERS,params:[t,e]})}function ut(t,e){return(0,C.Vs)({clientFunc:o.je.getChannelMember,onSuccess:a.d4.RECEIVED_CHANNEL_MEMBER,params:[t,e]})}function Et(t){return(0,C.Vs)({clientFunc:o.je.getMyChannelMember,onSuccess:a.d4.RECEIVED_MY_CHANNEL_MEMBER,params:[t]})}function _t(t){return async(e,n)=>{var r;const a=null===(r=(await Et(t)(e,n)).data)||void 0===r?void 0:r.roles.split(" ");return a&&a.length>0&&e((0,h.k3)(a)),{data:!0}}}function dt(t){return async(e,n)=>{const r=n(),a=(0,E.mr)(r,t),i=(0,u.Ah)(r,a.team_id||(0,d.ev)(r),s.y.FAVORITES);return o.je.trackEvent("action","action_channels_favorite"),i?e((0,f.ay)(i.id,t)):{data:!1}}}function lt(t){return async(e,n)=>{const r=n(),a=(0,E.mr)(r,t),c=(0,u.Ah)(r,a.team_id||(0,d.ev)(r),a.type===i.LQ.DM_CHANNEL||a.type===i.LQ.GM_CHANNEL?s.y.DIRECT_MESSAGES:s.y.CHANNELS);return o.je.trackEvent("action","action_channels_unfavorite"),c?e((0,f.ay)(c.id,a.id)):{data:!1}}}function pt(t,e,n,r){return(0,C.Vs)({clientFunc:async()=>(await o.je.updateChannelMemberSchemeRoles(t,e,n,r),{channelId:t,userId:e,isSchemeUser:n,isSchemeAdmin:r}),onSuccess:a.d4.UPDATED_CHANNEL_MEMBER_SCHEME_ROLES})}function ft(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i.LQ.PROFILE_CHUNK_SIZE;return(0,C.Vs)({clientFunc:o.je.channelMembersMinusGroupMembers,onSuccess:a.d4.RECEIVED_CHANNEL_MEMBERS_MINUS_GROUP_MEMBERS,params:[t,e,n,r]})}function yt(t){return(0,C.Vs)({clientFunc:async()=>{const e=await o.je.getChannelModerations(t);return{channelId:t,moderations:e}},onSuccess:a.d4.RECEIVED_CHANNEL_MODERATIONS,params:[t]})}function Ct(t,e){return(0,C.Vs)({clientFunc:async()=>{const n=await o.je.patchChannelModerations(t,e);return{channelId:t,moderations:n}},onSuccess:a.d4.RECEIVED_CHANNEL_MODERATIONS,params:[t]})}function mt(t,e){return(0,C.Vs)({clientFunc:async()=>{const n=await o.je.getChannelMemberCountsByGroup(t,e);return{channelId:t,memberCounts:n}},onSuccess:a.d4.RECEIVED_CHANNEL_MEMBER_COUNTS_BY_GROUP,params:[t]})}},24377:(t,e,n)=>{"use strict";n.d(e,{E2:()=>I,Ll:()=>p,RH:()=>f,_2:()=>h,cc:()=>C,i:()=>y,kS:()=>_,pL:()=>S,uK:()=>l,xW:()=>d}),n(33948),n(88674);var r=n(4215),a=n(28808),o=n(3626),i=n(74327),s=n(54891),c=n(10386),u=n(28399),E=n(73396);let _=new Set;function d(t){_=t}function l(t,e){return(0,u.Vs)({clientFunc:r.je.createCustomEmoji,onSuccess:a.Bw.RECEIVED_CUSTOM_EMOJI,params:[t,e]})}function p(t){return async(e,n)=>{let o;try{o=await r.je.getCustomEmojiByName(t)}catch(r){return(0,u._f)(r,e,n),404===r.status_code?e({type:a.Bw.CUSTOM_EMOJI_DOES_NOT_EXIST,data:t}):e((0,c.H)(r)),{error:r}}return e({type:a.Bw.RECEIVED_CUSTOM_EMOJI,data:o}),{data:o}}}function f(t){return async e=>{if(!t||0===t.length)return{data:!0};const n=[];return t.forEach((t=>n.push(e(p(t))))),await Promise.all(n),{data:!0}}}function y(t){return async(e,n)=>{if(!t)return{data:!0};const r=n(),a=r.entities.emojis.nonExistentEmoji,o=(0,i.RH)(r),c=(0,s.Eq)(t,_,o,a);return f(Array.from(c))(e,n)}}function C(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.LQ.PAGE_SIZE_DEFAULT,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.dy.SORT_BY_NAME,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return async(o,s)=>{let E;try{E=await r.je.getCustomEmojis(t,e,n)}catch(t){return(0,u._f)(t,o,s),o((0,c.H)(t)),{error:t}}return i&&o(m(E)),o({type:a.Bw.RECEIVED_CUSTOM_EMOJIS,data:E}),{data:E}}}function m(t){return async(e,n)=>{const r={};t.forEach((t=>{n().entities.users.profiles[t.creator_id]||(r[t.creator_id]=!0)}));const a=Object.keys(r);return a.length>0&&await e((0,E.Ef)(a)),{data:!0}}}function h(t){return async(e,n)=>{try{await r.je.deleteCustomEmoji(t)}catch(t){return(0,u._f)(t,e,n),e((0,c.H)(t)),{error:t}}return e({type:a.Bw.DELETED_CUSTOM_EMOJI,data:{id:t}}),{data:!0}}}function S(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return async(o,i)=>{let s;try{s=await r.je.searchCustomEmoji(t,e)}catch(t){return(0,u._f)(t,o,i),o((0,c.H)(t)),{error:t}}return n&&o(m(s)),o({type:a.Bw.RECEIVED_CUSTOM_EMOJIS,data:s}),{data:s}}}function I(t){return async(e,n)=>{let o;try{o=await r.je.autocompleteCustomEmoji(t)}catch(t){return(0,u._f)(t,e,n),e((0,c.H)(t)),{error:t}}return e({type:a.Bw.RECEIVED_CUSTOM_EMOJIS,data:o}),{data:o}}}},10386:(t,e,n)=>{"use strict";n.d(e,{H:()=>u,YN:()=>s,b9:()=>E,mF:()=>c}),n(88674),n(26699),n(32023),n(39714);var r=n(7710),a=n(28808),o=n(4215),i=n(42896);function s(t){return async e=>(e(function(t){return{type:a.ZB.DISMISS_ERROR,index:t,data:null}}(t)),{data:!0})}function c(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:a.ZB.LOG_ERROR,displayable:e,error:t,data:null}}function u(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return async(a,s)=>{var u,E,_;if("api.context.session_expired.app_error"===t.server_error_id)return{data:!0};let d=!0;(t.stack||"").includes("TypeError: Failed to fetch")&&(d=!1),t.server_error_id&&(d=!1);const l=(0,r.serializeError)(t);if(d)try{const t=JSON.stringify(l).toString();await o.je.logClientError(t,i.LogLevel.Debug)}catch(t){}n&&(l.message="A JavaScript error has occurred. Please use the JavaScript console to capture and report the error");const p="true"===(null===(u=s())||void 0===u||null===(E=u.entities.general)||void 0===E||null===(_=E.config)||void 0===_?void 0:_.EnableDeveloper);let f=e;return p&&"developer"===t.type&&(f=!0),a(c(l,f)),{data:!0}}}function E(){return async t=>(t({type:a.ZB.CLEAR_ERRORS,data:null}),{data:!0})}},25062:(t,e,n)=>{"use strict";n.d(e,{HD:()=>E,J2:()=>d,Y$:()=>l,Zb:()=>c,ut:()=>u,x:()=>_}),n(88674),n(41817),n(63241);var r=n(4215),a=n(28808),o=(n(22742),n(16794),n(42896),n(10386)),i=n(74147),s=n(28399);function c(){return async(t,e)=>{let n;try{n=await r.je.getClientConfigOld()}catch(n){return(0,s._f)(n,t,e),{error:n}}return r.je.setEnableLogging("true"===n.EnableDeveloper),r.je.setDiagnosticId(n.DiagnosticId),t({type:a.P.CLIENT_CONFIG_RECEIVED,data:n}),{data:n}}}function u(){return(0,s.Vs)({clientFunc:r.je.getClientLicenseOld,onSuccess:[a.P.CLIENT_LICENSE_RECEIVED]})}function E(t){return async e=>(e({type:a.P.RECEIVED_SERVER_VERSION,data:t}),e((0,i.k3)([])),{data:!0})}function _(t){return r.je.setUrl(t),!0}function d(){return async t=>{try{await r.je.setFirstAdminVisitMarketplaceStatus()}catch(e){return t((0,o.H)(e)),{error:e.message}}return t({type:a.P.FIRST_ADMIN_VISIT_MARKETPLACE_STATUS_RECEIVED,data:!0}),{data:!0}}}function l(){return async(t,e)=>{let n;try{n=await r.je.getFirstAdminSetupComplete()}catch(n){return(0,s._f)(n,t,e),{error:n}}return n=JSON.parse(n.value),t({type:a.P.FIRST_ADMIN_COMPLETE_SETUP_RECEIVED,data:n}),{data:n}}}},28399:(t,e,n)=>{"use strict";n.d(e,{Ds:()=>_,SB:()=>d,Vs:()=>E,_f:()=>s}),n(88674),n(33948),n(41817);var r=n(4215),a=n(28808),o=n(10386);const i=401;function s(t,e,n){const{currentUserId:o}=n().entities.users;"status_code"in t&&t.status_code===i&&t.url&&-1===t.url.indexOf("/login")&&o&&(r.je.setToken(""),e({type:a.bZ.LOGOUT_SUCCESS,data:{}}))}function c(t,e,n){-1===t.indexOf("SUCCESS")?n(function(t,e){return{type:t,data:e}}(t,e)):n(u(t))}function u(t){return{type:t,data:null}}function E(t){let{clientFunc:e,onRequest:n,onSuccess:r,onFailure:a,params:i=[]}=t;return async(t,E)=>{n&&t(u(n));let _=null;try{_=await e(...i)}catch(e){return s(e,t,E),a&&t(function(t,e){return{type:t,error:e}}(a,e)),t((0,o.H)(e)),{error:e}}return Array.isArray(r)?r.forEach((e=>{c(e,_,t)})):r&&c(r,_,t),{data:_}}}function _(t,e,n,r){let a;return function(){for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];const c=n&&!a;a&&clearTimeout(a),a=setTimeout((()=>{a=null,n||(Reflect.apply(t,null,i),r&&r())}),e),c&&(Reflect.apply(t,null,i),r&&r())}}class d extends Error{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var r,a,o;super(e),r=this,o=void 0,(a=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(a="intl"))in r?Object.defineProperty(r,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[a]=o,this.intl={id:t,defaultMessage:e,values:n}}}},35588:(t,e,n)=>{"use strict";n.d(e,{$s:()=>it,Es:()=>Q,Gw:()=>et,Jh:()=>J,Jq:()=>K,M8:()=>rt,Ot:()=>st,Pc:()=>ct,QQ:()=>nt,Rc:()=>ut,T:()=>ot,US:()=>W,Vn:()=>G,WO:()=>Z,Xu:()=>_t,Y$:()=>V,aw:()=>w,co:()=>B,ct:()=>$,d_:()=>q,dq:()=>H,el:()=>tt,fR:()=>j,gh:()=>R,hX:()=>x,iS:()=>z,jM:()=>X,mU:()=>N,pq:()=>dt,qb:()=>P,rU:()=>k,uB:()=>M,uz:()=>Et,wy:()=>F,x_:()=>b,xk:()=>at,xl:()=>U,y3:()=>A}),n(88674),n(33948),n(19601),n(26699),n(32023),n(74916),n(41817);var r=n(63241),a=n(4215),o=n(3626),i=n(28808),s=n(9276),c=n(74327),u=n(81618),E=n(12707),_=n(74713),d=n(89754),l=n(73396),p=n(33969),f=n(28399),y=n(10386),C=n(24377),m=n(88229),h=n(73032);function S(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function I(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?S(Object(n),!0).forEach((function(e){T(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function T(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function R(t,e){return{type:i.tk.RECEIVED_POST,data:t,features:{crtEnabled:e}}}function N(t,e){return{type:i.tk.RECEIVED_NEW_POST,data:t,features:{crtEnabled:e}}}function A(t){return{type:i.tk.RECEIVED_POSTS,data:t}}function O(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return{type:i.tk.RECEIVED_POSTS_AFTER,channelId:e,data:t,afterPostId:n,recent:r}}function g(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return{type:i.tk.RECEIVED_POSTS_BEFORE,channelId:e,data:t,beforePostId:n,oldest:r}}function L(t,e){return{type:i.tk.RECEIVED_POSTS_SINCE,channelId:e,data:t}}function v(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return{type:i.tk.RECEIVED_POSTS_IN_CHANNEL,channelId:e,data:t,recent:n,oldest:r}}function D(t,e){return{type:i.tk.RECEIVED_POSTS_IN_THREAD,data:t,rootId:e}}function M(t){return{type:i.tk.POST_DELETED,data:t}}function U(t){return async(e,n)=>{let o;const s=(0,d.ym)(n());try{o=await a.je.getPost(t),et([o],e,n)}catch(t){return(0,f._f)(t,e,n),e({type:i.tk.GET_POSTS_FAILURE,error:t}),e((0,y.H)(t)),{error:t}}return e((0,r.$C)([R(o,s),{type:i.tk.GET_POSTS_SUCCESS}])),{data:o}}}function P(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return async(n,o)=>{const s=o(),c=s.entities.users.currentUserId,E=Date.now(),_=t.pending_post_id||"".concat(c,":").concat(E);let l=[];if(u.QW(s,_))return{data:!0};let p=I(I({},t),{},{pending_post_id:_,create_at:E,update_at:E,reply_count:0});if(t.root_id&&(p.reply_count=u.HF(s,t.root_id)+1),p.file_ids&&!e.length&&(e=p.file_ids.map((t=>s.entities.files.files[t]))),e.length){const t=e.map((t=>t.id));p=I(I({},p),{},{file_ids:t}),l.push({type:i.ml.RECEIVED_FILES_FOR_POST,postId:_,data:e},{type:i.d4.INCREMENT_FILE_COUNT,amount:e.length,id:p.channel_id})}const f=(0,d.ym)(o());return l.push({type:i.tk.RECEIVED_NEW_POST,data:I(I({},p),{},{id:_}),features:{crtEnabled:f}}),n((0,r.$C)(l,"BATCH_CREATE_POST_INIT")),async function(){try{const t=await a.je.createPost(I(I({},p),{},{create_at:0}));l=[R(t,f),{type:i.tk.CREATE_POST_SUCCESS},{type:i.d4.INCREMENT_TOTAL_MSG_COUNT,data:{channelId:p.channel_id,amount:1,amountRoot:""===t.root_id?1:0}},{type:i.d4.DECREMENT_UNREAD_MSG_COUNT,data:{channelId:p.channel_id,amount:1,amountRoot:""===t.root_id?1:0}}],e&&l.push({type:i.ml.RECEIVED_FILES_FOR_POST,postId:t.id,data:e}),n((0,r.$C)(l,"BATCH_CREATE_POST"))}catch(t){const e=I(I({},p),{},{id:_,failed:!0,update_at:Date.now()});l=[{type:i.tk.CREATE_POST_FAILURE,error:t}],"api.post.create_post.root_id.app_error"===t.server_error_id||"api.post.create_post.town_square_read_only"===t.server_error_id||"plugin.message_will_be_posted.dismiss_post"===t.server_error_id?l.push(rt(e)):l.push(R(e,f)),n((0,r.$C)(l,"BATCH_CREATE_POST_FAILED"))}}(),{data:!0}}}function b(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return async(n,o)=>{const s=o(),c=s.entities.users.currentUserId,E=Date.now(),_="".concat(c,":").concat(E);let l=I(I({},t),{},{pending_post_id:_,create_at:E,update_at:E,reply_count:0});if(t.root_id&&(l.reply_count=u.HF(s,t.root_id)+1),e.length){const t=e.map((t=>t.id));l=I(I({},l),{},{file_ids:t}),n({type:i.ml.RECEIVED_FILES_FOR_POST,postId:_,data:e}),n({type:i.d4.INCREMENT_FILE_COUNT,amount:e.length,id:l.channel_id})}const p=(0,d.ym)(s);n(N(I(I({},l),{},{id:_}),p));try{const t=await a.je.createPost(I(I({},l),{},{create_at:0}));l.id=t.id,l.reply_count=t.reply_count}catch(t){return(0,f._f)(t,n,o),n({type:i.tk.CREATE_POST_FAILURE,data:l,error:t}),n(rt(I(I({},l),{},{id:_}))),n((0,y.H)(t)),{error:t}}const C=[R(l,p),{type:i.tk.CREATE_POST_SUCCESS},{type:i.d4.INCREMENT_TOTAL_MSG_COUNT,data:{channelId:l.channel_id,amount:1,amountRoot:""===l.root_id?1:0}},{type:i.d4.DECREMENT_UNREAD_MSG_COUNT,data:{channelId:l.channel_id,amount:1,amountRoot:""===l.root_id?1:0}}];return e&&C.push({type:i.ml.RECEIVED_FILES_FOR_POST,postId:l.id,data:e}),n((0,r.$C)(C)),{data:l}}}function w(){return{type:i.tk.CREATE_POST_RESET_REQUEST}}function j(t){return async(e,n)=>{const r=n(),s=I({},t);return!t.root_id&&(0,d.ym)(r)&&e((0,h.Cq)(t)),s.type===o.V8.POST_TYPES.COMBINED_USER_ACTIVITY&&s.system_post_ids?s.system_post_ids.forEach((t=>{const n=u.xl(r,t);n&&e(j(n))})):async function(){try{e({type:i.tk.POST_DELETED,data:s}),await a.je.deletePost(t.id)}catch(t){console.error("failed to delete post",t)}}(),{data:!0}}}function H(t){return(0,f.Vs)({clientFunc:a.je.patchPost,onRequest:i.tk.EDIT_POST_REQUEST,onSuccess:[i.tk.RECEIVED_POST,i.tk.EDIT_POST_SUCCESS],onFailure:i.tk.EDIT_POST_FAILURE,params:[t]})}function V(t,e){return async(n,r)=>{let o=r();const c=u.xl(o,e);let E;try{if((0,_.mM)(e))return{};n({type:i.d4.ADD_MANUALLY_UNREAD,data:{channelId:c.channel_id}}),E=await a.je.markPostAsUnread(t,e)}catch(t){return(0,f._f)(t,n,r),n((0,y.H)(t)),n({type:i.d4.REMOVE_MANUALLY_UNREAD,data:{channelId:c.channel_id}}),{error:t}}o=r();const d=function(t,e){const n=(0,s.Or)(e,t.channel_id),r=n?n.msg_count-t.msg_count:t.msg_count,a=n?n.msg_count_root-t.msg_count_root:t.msg_count_root;return{teamId:t.team_id,channelId:t.channel_id,msgCount:t.msg_count,mentionCount:t.mention_count,msgCountRoot:t.msg_count_root,mentionCountRoot:t.mention_count_root,urgentMentionCount:t.urgent_mention_count,lastViewedAt:t.last_viewed_at,deltaMsgs:r,deltaMsgsRoot:a}}(E,o);return n({type:i.d4.POST_UNREAD_SUCCESS,data:d}),{data:d}}}function F(t){return async(e,n)=>{let o;e({type:i.tk.EDIT_POST_REQUEST});try{o=await a.je.pinPost(t)}catch(t){return(0,f._f)(t,e,n),e({type:i.tk.EDIT_POST_FAILURE,error:t}),e((0,y.H)(t)),{error:t}}const s=[{type:i.tk.EDIT_POST_SUCCESS}],c=n(),E=u.xl(c,t);return E&&s.push(R(I(I({},E),{},{is_pinned:!0,update_at:Date.now()}),(0,d.ym)(c)),{type:i.d4.INCREMENT_PINNED_POST_COUNT,id:E.channel_id}),e((0,r.$C)(s)),{data:o}}}function G(t){return async(e,n)=>{let o;e({type:i.tk.EDIT_POST_REQUEST});try{o=await a.je.unpinPost(t)}catch(t){return(0,f._f)(t,e,n),e({type:i.tk.EDIT_POST_FAILURE,error:t}),e((0,y.H)(t)),{error:t}}const s=[{type:i.tk.EDIT_POST_SUCCESS}],c=n(),E=u.xl(c,t);return E&&s.push(R(I(I({},E),{},{is_pinned:!1,update_at:Date.now()}),(0,d.ym)(c)),{type:i.d4.DECREMENT_PINNED_POST_COUNT,id:E.channel_id}),e((0,r.$C)(s)),{data:o}}}function k(t,e){return async(n,r)=>{const o=r().entities.users.currentUserId;let s;try{s=await a.je.addReaction(o,t,e)}catch(t){return(0,f._f)(t,n,r),n((0,y.H)(t)),{error:t}}return n({type:i.tk.RECEIVED_REACTION,data:s}),{data:!0}}}function Z(t,e){return async(n,r)=>{const o=r().entities.users.currentUserId;try{await a.je.removeReaction(o,t,e)}catch(t){return(0,f._f)(t,n,r),n((0,y.H)(t)),{error:t}}return n({type:i.tk.REACTION_DELETED,data:{user_id:o,post_id:t,emoji_name:e}}),{data:!0}}}function Q(t){return async(e,n)=>{const r=n().entities.emojis.nonExistentEmoji,a=(0,c.RH)(n());return C.kS.has(t)||r.has(t)||a.has(t)?{data:!0}:e((0,C.Ll)(t))}}function B(t){return async(e,n)=>{const{currentUserId:r}=n().entities.users,i={user_id:r,category:o.uP.CATEGORY_FLAGGED_POST,name:t,value:"true"};return a.je.trackEvent("action","action_posts_flag"),(0,p.$A)(r,[i])(e)}}async function Y(t,e,n){const r=n?JSON.parse(JSON.stringify(n)):{order:[t],posts:{},prev_post_id:"",next_post_id:"",first_inaccessible_post_time:0},o=await a.je.getPaginatedPostThread(t,e);if(o.first_inaccessible_post_time&&(r.first_inaccessible_post_time=r.first_inaccessible_post_time?Math.min(o.first_inaccessible_post_time,r.first_inaccessible_post_time):o.first_inaccessible_post_time),r.order.push(...o.order.slice(1)),r.posts=Object.assign(r.posts,o.posts),o.has_next){const[n]=r.order.slice(-1),a=r.posts[n];return Y(t,I(I({},e),{},{fromCreateAt:a.create_at,fromPost:n}),r)}return r}function $(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return async(n,a)=>{n({type:i.tk.GET_POST_THREAD_REQUEST});const o=(0,d.ym)(a());let s;try{s=await Y(t,{fetchThreads:e,collapsedThreads:o}),et(s.posts,n,a)}catch(t){return(0,f._f)(t,n,a),n({type:i.tk.GET_POST_THREAD_FAILURE,error:t}),n((0,y.H)(t)),{error:t}}return n((0,r.$C)([A(s),D(s,t),{type:i.tk.GET_POST_THREAD_SUCCESS}])),{data:s}}}function x(t){const e=u.Zf();return async(n,a)=>{n({type:i.tk.GET_POST_THREAD_REQUEST});const o=(0,d.ym)(a()),s=e(a(),t),c=null==s?void 0:s[0],u={fetchThreads:!0,collapsedThreads:o,direction:"down",fromCreateAt:null==c?void 0:c.create_at,fromPost:null==c?void 0:c.id};let E;try{E=await Y(t,u),et(E.posts,n,a)}catch(t){return(0,f._f)(t,n,a),n({type:i.tk.GET_POST_THREAD_FAILURE,error:t}),n((0,y.H)(t)),{error:t}}return n((0,r.$C)([A(E),D(E,t),{type:i.tk.GET_POST_THREAD_SUCCESS}])),{data:E}}}function K(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.V8.POST_CHUNK_SIZE,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return async(o,c)=>{let u;const E=(0,d.ym)(c());try{u=await a.je.getPosts(t,e,n,i,E,s),et(u.posts,o,c)}catch(t){return(0,f._f)(t,o,c),o((0,y.H)(t)),{error:t}}return o((0,r.$C)([A(u),v(u,t,0===e,""===u.prev_post_id)])),{data:u}}}function J(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return async(s,c)=>{const u=(0,d.mw)(c())===o.uP.UNREAD_SCROLL_POSITION_START_FROM_NEWEST,_=(0,d.ym)(c()),l=(0,E.rc)(c());let p,C;try{p=await a.je.getPostsUnread(t,l,a.Ev,a.su,e,_,n),p.next_post_id&&u&&(C=await a.je.getPosts(t,0,o.V8.POST_CHUNK_SIZE/2,e,_,n)),et(p.posts,s,c)}catch(t){return(0,f._f)(t,s,c),s((0,y.H)(t)),{error:t}}const m=C?[A(C),v(C,t,""===C.next_post_id,""===C.prev_post_id)]:[];return s((0,r.$C)([A(p),v(p,t,""===p.next_post_id,""===p.prev_post_id),...m])),s({type:i.tk.RECEIVED_POSTS,data:p,channelId:t}),{data:p}}}function W(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return async(s,c)=>{let u;try{const r=(0,d.ym)(c());u=await a.je.getPostsSince(t,e,n,r,o),et(u.posts,s,c)}catch(t){return(0,f._f)(t,s,c),s((0,y.H)(t)),{error:t}}return s((0,r.$C)([A(u),L(u,t),{type:i.tk.GET_POSTS_SINCE_SUCCESS}])),{data:u}}}function q(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o.V8.POST_CHUNK_SIZE,s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],c=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return async(o,u)=>{let E;try{const r=(0,d.ym)(u());E=await a.je.getPostsBefore(t,e,n,i,s,r,c),et(E.posts,o,u)}catch(t){return(0,f._f)(t,o,u),o((0,y.H)(t)),{error:t}}return o((0,r.$C)([A(E),g(E,t,e,""===E.prev_post_id)])),{data:E}}}function z(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o.V8.POST_CHUNK_SIZE,s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],c=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return async(o,u)=>{let E;try{const r=(0,d.ym)(u());E=await a.je.getPostsAfter(t,e,n,i,s,r,c),et(E.posts,o,u)}catch(t){return(0,f._f)(t,o,u),o((0,y.H)(t)),{error:t}}return o((0,r.$C)([A(E),O(E,t,e,""===E.next_post_id)])),{data:E}}}function X(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.V8.POST_CHUNK_SIZE/2,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return async(o,c)=>{let u,E,_;try{const r=(0,d.ym)(c());[u,E,_]=await Promise.all([a.je.getPostsAfter(t,e,0,n,i,r,s),a.je.getPostThread(e,i,r,s),a.je.getPostsBefore(t,e,0,n,i,r,s)])}catch(t){return(0,f._f)(t,o,c),o((0,y.H)(t)),{error:t}}const l={posts:I(I(I({},u.posts),E.posts),_.posts),order:[...u.order,e,..._.order],next_post_id:u.next_post_id,prev_post_id:_.prev_post_id,first_inaccessible_post_time:Math.max(_.first_inaccessible_post_time,u.first_inaccessible_post_time,E.first_inaccessible_post_time)||0};return et(l.posts,o,c),o((0,r.$C)([A(l),v(l,t,""===u.next_post_id,""===_.prev_post_id)])),{data:l}}}function tt(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=new Set;return(r,a)=>{if(!Array.isArray(t)||!t.length)return{data:!0};const o=a(),i=[];return t.forEach((t=>{t.root_id&&(u.xl(o,t.root_id)||n.add(t.root_id))})),n.forEach((t=>{i.push(r($(t,e)))})),Promise.all(i)}}function et(t,e,n){if(!t)return Promise.resolve();const r=Array.isArray(t)?t:Object.values(t);if(0===r.length)return Promise.resolve();const a={};for(let t=0;t<r.length;t++)a[r[t].id]=r[t];const i=n(),{currentUserId:s,profiles:c,statuses:u}=i.entities.users,_=new Set,d=new Set;r.forEach((t=>{const e=t.user_id;t.metadata&&(t.metadata.embeds&&t.metadata.embeds.forEach((t=>{var e,n;"permalink"===t.type&&t.data&&(null!==(e=t.data.post)&&void 0!==e&&e.user_id&&!c[t.data.post.user_id]&&t.data.post.user_id!==s&&_.add(t.data.post.user_id),null!==(n=t.data.post)&&void 0!==n&&n.user_id&&!u[t.data.post.user_id]&&d.add(t.data.post.user_id))})),t.metadata.acknowledgements&&t.metadata.acknowledgements.forEach((t=>{t.acknowledged_at>0&&_.add(t.user_id)}))),u[e]||d.add(e),e!==s&&(c[e]||_.add(e))}));const p=[];_.size>0&&p.push((0,l.Ef)(Array.from(_))(e,n)),d.size>0&&p.push((0,l.W7)(Array.from(d))(e,n));const f=function(t,e){let n;const r=new Set;return e.forEach((e=>{if(!e.message.includes("@"))return;n||(n=(0,E.Td)(t));const a=/\B@(([a-z0-9_.-]*[a-z0-9_])[.-]*)/gi;let i;for(;null!==(i=a.exec(e.message));)-1===o.LQ.SPECIAL_MENTIONS.indexOf(i[2])&&(n[i[1]]||n[i[2]]||(r.add(i[1]),r.add(i[2])))})),r}(i,r);return f.size>0&&p.push((0,l.Wi)(Array.from(f))(e,n)),Promise.all(p)}function nt(t){return async(e,n)=>{let r;try{r=await a.je.getPostsByIds(t)}catch(t){return(0,f._f)(t,e,n),e((0,y.H)(t)),{error:t}}return e({type:i.tk.RECEIVED_POSTS,data:{posts:r}}),{data:{posts:r}}}}function rt(t){return(e,n)=>{if(t.type===o.V8.POST_TYPES.COMBINED_USER_ACTIVITY&&t.system_post_ids){const r=n();for(const n of t.system_post_ids){const t=u.xl(r,n);t&&e(rt(t))}}else e(function(t){return{type:i.tk.POST_REMOVED,data:t}}(t)),t.is_pinned&&e({type:i.d4.DECREMENT_PINNED_POST_COUNT,id:t.channel_id});return{data:!0}}}function at(t){return async(e,n)=>{const{currentUserId:r}=n().entities.users,i={user_id:r,category:o.uP.CATEGORY_FLAGGED_POST,name:t};return a.je.trackEvent("action","action_posts_unflag"),(0,p.ks)(r,[i])(e,n)}}function ot(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return async(o,s)=>{let c;try{c=await a.je.doPostActionWithCookie(t,e,n,r)}catch(t){return(0,f._f)(t,o,s),o((0,y.H)(t)),{error:t}}return c&&c.trigger_id&&o({type:i.bK.RECEIVED_DIALOG_TRIGGER_ID,data:c.trigger_id}),{data:c}}}function it(t){return async e=>(e({type:i.tk.ADD_MESSAGE_INTO_HISTORY,data:t}),{data:!0})}function st(t){return async e=>(e({type:i.tk.RESET_HISTORY_INDEX,data:t}),{data:!0})}function ct(t){return async e=>(e({type:i.tk.MOVE_HISTORY_INDEX_BACK,data:t}),{data:!0})}function ut(t){return async e=>(e({type:i.tk.MOVE_HISTORY_INDEX_FORWARD,data:t}),{data:!0})}function Et(){return async(t,e)=>{t({type:i.tk.RESET_POSTS_IN_CHANNEL});const n=(0,s.gO)(e());return n&&(await t((0,m.QE)("")),t((0,m.QE)(n))),{data:!0}}}function _t(t){return async(e,n)=>{const r=(0,E.rc)(n());let o;try{o=await a.je.acknowledgePost(t,r)}catch(t){return(0,f._f)(t,e,n),e((0,y.H)(t)),{error:t}}return e({type:i.tk.CREATE_ACK_POST_SUCCESS,data:o}),{data:o}}}function dt(t){return async(e,n)=>{const r=(0,E.rc)(n());try{await a.je.unacknowledgePost(t,r)}catch(t){return(0,f._f)(t,e,n),e((0,y.H)(t)),{error:t}}const o={post_id:t,user_id:r,acknowledged_at:0};return e({type:i.tk.DELETE_ACK_POST_SUCCESS,data:o}),{data:o}}}},33969:(t,e,n)=>{"use strict";n.d(e,{$A:()=>f,DV:()=>y,Ih:()=>p,VJ:()=>_,ks:()=>E,pE:()=>l,q6:()=>d,w_:()=>C}),n(88674);var r=n(28808),a=n(4215),o=n(89754),i=n(12707),s=n(23459),c=n(3626),u=(n(88229),n(28399));function E(t,e){return async(n,i)=>{const c=i(),u=(0,o.VJ)(c),E=e.map((t=>u[(0,s.g)(t.category,t.name)]));return async function(){try{n({type:r.wT.DELETED_PREFERENCES,data:e}),await a.je.deletePreferences(t,e)}catch(t){n({type:r.wT.RECEIVED_PREFERENCES,data:E})}}(),{data:!0}}}function _(){return(0,u.Vs)({clientFunc:a.je.getMyPreferences,onSuccess:r.wT.RECEIVED_ALL_PREFERENCES})}function d(t){return async(e,n)=>{const r=n(),a=(0,i.rc)(r),o={user_id:a,category:c.uP.CATEGORY_ACTIONS_MENU,name:c.uP.NAME_ACTIONS_MENU_TUTORIAL_STATE,value:JSON.stringify(t)};await e(f(a,[o]))}}function l(t){return async(e,n)=>{const r=n(),a=(0,i.rc)(r),o={user_id:a,category:c.uP.CATEGORY_INSIGHTS,name:c.uP.NAME_INSIGHTS_TUTORIAL_STATE,value:JSON.stringify(t)};await e(f(a,[o]))}}function p(t){return async(e,n)=>{const r=n(),a=(0,i.rc)(r),o={user_id:a,category:c.uP.CATEGORY_CUSTOM_STATUS,name:c.uP.NAME_CUSTOM_STATUS_TUTORIAL_STATE,value:JSON.stringify(t)};await e(f(a,[o]))}}function f(t,e){return async n=>(async function(){try{n({type:r.wT.RECEIVED_PREFERENCES,data:e}),await a.je.savePreferences(t,e)}catch(t){n({type:r.wT.DELETED_PREFERENCES,data:e})}}(),{data:!0})}function y(t,e){return async(n,r)=>{const a=r(),o=(0,i.rc)(a),s={user_id:o,category:c.uP.CATEGORY_THEME,name:t||"",value:JSON.stringify(e)};return await f(o,[s])(n),{data:!0}}}function C(){return async(t,e)=>{const n=e(),r=(0,o.YX)()(n,c.uP.CATEGORY_THEME),a=(0,i.rc)(n),s=r.filter((t=>""!==t.name));return s.length>0&&await E(a,s)(t,e),{data:!0}}}n(73396)},74147:(t,e,n)=>{"use strict";n.d(e,{Aq:()=>s,F$:()=>E,k3:()=>u}),n(88674),n(33948),n(73210);var r=n(4215),a=n(28808),o=n(89757),i=n(28399);function s(t){return(0,i.Vs)({clientFunc:r.je.patchRole,onRequest:a.dC.EDIT_ROLE_REQUEST,onSuccess:[a.dC.RECEIVED_ROLE,a.dC.EDIT_ROLE_SUCCESS],onFailure:a.dC.EDIT_ROLE_FAILURE,params:[t.id,t]})}function c(t){return async e=>(e({type:a.dC.SET_PENDING_ROLES,data:t}),{data:t})}function u(t){return async(e,n)=>{const s=n();let E=new Set;try{E=new Set(s.entities.roles.pending)}catch(t){}for(const e of t)E.add(e);if(!s.entities.general.serverVersion)return e(c(Array.from(E))),setTimeout((()=>e(u([]))),500),{data:[]};const _=(0,o.F3)(s),d=new Set;for(const t of E)_[t]||""===t.trim()||d.add(t);return s.entities.roles.pending&&await e(c([])),d.size>0?(l=Array.from(d),(0,i.Vs)({clientFunc:r.je.getRolesByNames,onRequest:a.dC.ROLES_BY_NAMES_REQUEST,onSuccess:[a.dC.RECEIVED_ROLES,a.dC.ROLES_BY_NAMES_SUCCESS],onFailure:a.dC.ROLES_BY_NAMES_FAILURE,params:[l]}))(e,n):{data:s.entities.roles.roles};var l}}function E(t){var e;return null!==(e=t.map((t=>t.name)).join(" "))&&void 0!==e?e:""}},92743:(t,e,n)=>{"use strict";n.d(e,{$B:()=>G,AG:()=>k,Cm:()=>R,Dc:()=>C,II:()=>x,Ih:()=>K,Jw:()=>m,LK:()=>I,L_:()=>b,MA:()=>y,PB:()=>M,Pb:()=>g,QL:()=>$,UG:()=>q,UI:()=>j,VP:()=>h,WO:()=>F,Xv:()=>S,YY:()=>D,Ye:()=>z,_x:()=>U,aF:()=>L,aJ:()=>H,dA:()=>J,e$:()=>Z,fC:()=>N,hv:()=>O,iw:()=>B,k1:()=>A,kx:()=>Y,o7:()=>V,oY:()=>W,r8:()=>v,sS:()=>Q,sj:()=>P,zG:()=>w,zf:()=>T}),n(88674),n(26699),n(33948),n(74916),n(23123),n(41817);var r=n(63241),a=n(4215),o=n(3626),i=n(28808),s=n(6356),c=(n(22742),n(5596)),u=n(12707),E=(n(89754),n(73396)),_=n(10386),d=n(88229),l=n(28399),p=n(74147);async function f(t,e,n){const{currentUserId:r,profiles:a,statuses:o}=n().entities.users,i=[],s=[];t.forEach((t=>{a[t]||i.includes(t)||t===r||i.push(t),o[t]||s.includes(t)||t===r||s.push(t)}));const c=[];i.length&&c.push(e((0,E.Ef)(i))),s.length&&c.push(e((0,E.W7)(s))),await Promise.all(c)}function y(t){const e="string"==typeof t?t:t.id;return{type:i.OU.SELECT_TEAM,data:e}}function C(){return(0,l.Vs)({clientFunc:a.je.getMyTeams,onRequest:i.OU.MY_TEAMS_REQUEST,onSuccess:[i.OU.RECEIVED_TEAMS_LIST,i.OU.MY_TEAMS_SUCCESS],onFailure:i.OU.MY_TEAMS_FAILURE})}function m(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return async(n,r)=>{let o;try{o=await a.je.getMyTeamUnreads(t)}catch(t){return(0,l._f)(t,n,r),n((0,_.H)(t)),{error:t}}if(e){const t=(0,c.ev)(r());if(t){const e=o.findIndex((e=>e.team_id===t));e>=0&&o.splice(e,1)}}return n({type:i.OU.RECEIVED_MY_TEAM_UNREADS,data:o}),{data:o}}}function h(t){return(0,l.Vs)({clientFunc:a.je.getTeam,onSuccess:i.OU.RECEIVED_TEAM,params:[t]})}function S(t){return(0,l.Vs)({clientFunc:a.je.getTeamByName,onSuccess:i.OU.RECEIVED_TEAM,params:[t]})}function I(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.LQ.TEAMS_CHUNK_SIZE,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return async(o,c)=>{let u;o({type:i.OU.GET_TEAMS_REQUEST,data:u});try{u=await a.je.getTeams(t,e,n,s)}catch(t){return(0,l._f)(t,o,c),o({type:i.OU.GET_TEAMS_FAILURE,data:u}),o((0,_.H)(t)),{error:t}}const E=[{type:i.OU.RECEIVED_TEAMS_LIST,data:n?u.teams:u},{type:i.OU.GET_TEAMS_SUCCESS,data:u}];return n&&E.push({type:i.OU.RECEIVED_TOTAL_TEAM_COUNT,data:u.total_count}),o((0,r.$C)(E)),{data:u}}}function T(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async(n,o)=>{let s,c;n({type:i.OU.GET_TEAMS_REQUEST,data:null});try{s=await a.je.searchTeams(t,e)}catch(t){return(0,l._f)(t,n,o),n({type:i.OU.GET_TEAMS_FAILURE,error:t}),n((0,_.H)(t)),{error:t}}return c=e.page&&e.per_page?s.teams:s,n((0,r.$C)([{type:i.OU.RECEIVED_TEAMS_LIST,data:c},{type:i.OU.GET_TEAMS_SUCCESS}])),{data:s}}}function R(t){return async(e,n)=>{let s;try{s=await a.je.createTeam(t)}catch(t){return(0,l._f)(t,e,n),e((0,_.H)(t)),{error:t}}const c={team_id:s.id,user_id:n().entities.users.currentUserId,roles:"".concat(o.LQ.TEAM_ADMIN_ROLE," ").concat(o.LQ.TEAM_USER_ROLE),delete_at:0,msg_count:0,mention_count:0};return e((0,r.$C)([{type:i.OU.CREATED_TEAM,data:s},{type:i.OU.RECEIVED_MY_TEAM_MEMBER,data:c},{type:i.OU.SELECT_TEAM,data:s.id}])),e((0,p.k3)(c.roles.split(" "))),{data:s}}}function N(t){return async(e,n)=>{try{await a.je.deleteTeam(t)}catch(t){return(0,l._f)(t,e,n),e((0,_.H)(t)),{error:t}}const o=n().entities,{currentTeamId:c}=o.teams,u=[];return t===c&&(s.Z.emit("leave_team"),u.push({type:i.d4.SELECT_CHANNEL,data:""})),u.push({type:i.OU.RECEIVED_TEAM_DELETED,data:{id:t}}),e((0,r.$C)(u)),{data:!0}}}function A(t){return async(e,n)=>{let r;try{r=await a.je.unarchiveTeam(t)}catch(t){return(0,l._f)(t,e,n),e((0,_.H)(t)),{error:t}}return e({type:i.OU.RECEIVED_TEAM_UNARCHIVED,data:r}),{data:!0}}}function O(t){return async()=>{try{await a.je.archiveAllTeamsExcept(t)}catch(t){return{error:t}}return{data:!0}}}function g(t){return(0,l.Vs)({clientFunc:a.je.patchTeam,onSuccess:i.OU.PATCHED_TEAM,params:[t]})}function L(t){return(0,l.Vs)({clientFunc:a.je.regenerateTeamInviteId,onSuccess:i.OU.REGENERATED_TEAM_INVITE_ID,params:[t]})}function v(){return async(t,e)=>{const n=(0,l.Vs)({clientFunc:a.je.getMyTeamMembers,onSuccess:i.OU.RECEIVED_MY_TEAM_MEMBERS}),r=await n(t,e);if("data"in r&&r.data){const e=new Set;for(const t of r.data)for(const n of t.roles.split(" "))e.add(n);e.size>0&&t((0,p.k3)([...e]))}return r}}function D(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.LQ.TEAMS_CHUNK_SIZE,r=arguments.length>3?arguments[3]:void 0;return(0,l.Vs)({clientFunc:a.je.getTeamMembers,onRequest:i.OU.GET_TEAM_MEMBERS_REQUEST,onSuccess:[i.OU.RECEIVED_MEMBERS_IN_TEAM,i.OU.GET_TEAM_MEMBERS_SUCCESS],onFailure:i.OU.GET_TEAM_MEMBERS_FAILURE,params:[t,e,n,r]})}function M(t,e){return async(n,r)=>{let o;try{const i=a.je.getTeamMember(t,e);f([e],n,r),o=await i}catch(t){return(0,l._f)(t,n,r),n((0,_.H)(t)),{error:t}}return n({type:i.OU.RECEIVED_MEMBERS_IN_TEAM,data:[o]}),{data:o}}}function U(t,e){return async(n,r)=>{let o;try{const i=a.je.getTeamMembersByIds(t,e);f(e,n,r),o=await i}catch(t){return(0,l._f)(t,n,r),n((0,_.H)(t)),{error:t}}return n({type:i.OU.RECEIVED_MEMBERS_IN_TEAM,data:o}),{data:o}}}function P(t){return(0,l.Vs)({clientFunc:a.je.getTeamsForUser,onRequest:i.OU.GET_TEAMS_REQUEST,onSuccess:[i.OU.RECEIVED_TEAMS_LIST,i.OU.GET_TEAMS_SUCCESS],onFailure:i.OU.GET_TEAMS_FAILURE,params:[t]})}function b(t){return(0,l.Vs)({clientFunc:a.je.getTeamMembersForUser,onSuccess:i.OU.RECEIVED_TEAM_MEMBERS,params:[t]})}function w(t){return(0,l.Vs)({clientFunc:a.je.getTeamStats,onSuccess:i.OU.RECEIVED_TEAM_STATS,params:[t]})}function j(t,e){return(0,l.Vs)({clientFunc:a.je.addToTeamFromInvite,onRequest:i.OU.ADD_TO_TEAM_FROM_INVITE_REQUEST,onSuccess:i.OU.ADD_TO_TEAM_FROM_INVITE_SUCCESS,onFailure:i.OU.ADD_TO_TEAM_FROM_INVITE_FAILURE,params:[t,e]})}function H(t,e){return async(n,o)=>{let s;try{s=await a.je.addToTeam(t,e)}catch(t){return(0,l._f)(t,n,o),n((0,_.H)(t)),{error:t}}return n((0,r.$C)([{type:i.bZ.RECEIVED_PROFILE_IN_TEAM,data:{id:t,user_id:e}},{type:i.OU.RECEIVED_MEMBER_IN_TEAM,data:s}])),{data:s}}}function V(t,e){return async(n,o)=>{let s;try{s=await a.je.addUsersToTeamGracefully(t,e)}catch(t){return(0,l._f)(t,n,o),n((0,_.H)(t)),{error:t}}const c=s?s.filter((t=>!t.error)):[],u=c.map((t=>({id:t.user_id}))),E=c.map((t=>t.member));return n((0,r.$C)([{type:i.bZ.RECEIVED_PROFILES_LIST_IN_TEAM,data:u,id:t},{type:i.OU.RECEIVED_MEMBERS_IN_TEAM,data:E}])),{data:s}}}function F(t,e){return async(n,o)=>{try{await a.je.removeFromTeam(t,e)}catch(t){return(0,l._f)(t,n,o),n((0,_.H)(t)),{error:t}}const s={team_id:t,user_id:e},E=[{type:i.bZ.RECEIVED_PROFILE_NOT_IN_TEAM,data:{id:t,user_id:e}},{type:i.OU.REMOVE_MEMBER_FROM_TEAM,data:s}],p=o(),f=(0,u.rc)(p);if(e===f){const{channels:e,myMembers:n}=p.entities.channels;for(const r of Object.values(n)){const n=e[r.channel_id];n&&n.team_id===t&&E.push({type:i.d4.LEAVE_CHANNEL,data:n})}t===(0,c.ev)(p)&&E.push((0,d.QE)(""))}return n((0,r.$C)(E)),{data:!0}}}function G(t,e){return(0,l.Vs)({clientFunc:a.je.sendEmailInvitesToTeamGracefully,params:[t,e]})}function k(t,e,n,r){return(0,l.Vs)({clientFunc:a.je.sendEmailGuestInvitesToChannelsGracefully,params:[t,e,n,r]})}function Z(t,e,n,r){return(0,l.Vs)({clientFunc:a.je.sendEmailInvitesToTeamAndChannelsGracefully,params:[t,e,n,r]})}function Q(t){return(0,l.Vs)({clientFunc:a.je.getTeamInviteInfo,onRequest:i.OU.TEAM_INVITE_INFO_REQUEST,onSuccess:i.OU.TEAM_INVITE_INFO_SUCCESS,onFailure:i.OU.TEAM_INVITE_INFO_FAILURE,params:[t]})}function B(t){return async(e,n)=>{let r;try{r=await a.je.checkIfTeamExists(t)}catch(t){return(0,l._f)(t,e,n),e((0,_.H)(t)),{error:t}}return{data:r.exists}}}function Y(t,e){return(0,l.Vs)({clientFunc:a.je.setTeamIcon,params:[t,e]})}function $(t){return(0,l.Vs)({clientFunc:a.je.removeTeamIcon,params:[t]})}function x(t,e){return(0,l.Vs)({clientFunc:async()=>(await a.je.updateTeamScheme(t,e),{teamId:t,schemeId:e}),onSuccess:i.OU.UPDATED_TEAM_SCHEME})}function K(t,e,n,r){return(0,l.Vs)({clientFunc:async()=>(await a.je.updateTeamMemberSchemeRoles(t,e,n,r),{teamId:t,userId:e,isSchemeUser:n,isSchemeAdmin:r}),onSuccess:i.OU.UPDATED_TEAM_MEMBER_SCHEME_ROLES})}function J(){return(0,l.Vs)({clientFunc:a.je.invalidateAllEmailInvites})}function W(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o.LQ.PROFILE_CHUNK_SIZE;return(0,l.Vs)({clientFunc:a.je.teamMembersMinusGroupMembers,onSuccess:i.OU.RECEIVED_TEAM_MEMBERS_MINUS_GROUP_MEMBERS,params:[t,e,n,r]})}function q(t,e,n){return(0,l.Vs)({clientFunc:a.je.getInProductNotices,params:[t,e,n]})}function z(t){return(0,l.Vs)({clientFunc:a.je.updateNoticesAsViewed,params:[t]})}},73032:(t,e,n)=>{"use strict";n.d(e,{Cq:()=>V,Gx:()=>U,KA:()=>v,NC:()=>j,U2:()=>b,VS:()=>g,Zj:()=>M,bJ:()=>L,bl:()=>P,hj:()=>O,hr:()=>N,ii:()=>w,lL:()=>D,qN:()=>A,v5:()=>H}),n(41817);var r=n(44908),a=n.n(r),o=(n(88674),n(84944),n(33792),n(33948),n(63241)),i=n(28808),s=n(4215),c=n(4305),u=n(73396),E=n(3930),_=n(12707),d=n(5596),l=n(53672),p=n(9276),f=n(89754),y=n(81618),C=n(10386),m=n(28399),h=n(35588);function S(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function I(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?S(Object(n),!0).forEach((function(e){T(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function T(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function R(t,e){let{before:n="",after:r="",perPage:a=c.Z.THREADS_CHUNK_SIZE,unread:o=!1,totalsOnly:i=!1,threadsOnly:u=!1,extended:E=!1,since:_=0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return async(c,d)=>{let l;try{l=await s.je.getUserThreads(t,e,{before:n,after:r,perPage:a,extended:E,unread:o,totalsOnly:i,threadsOnly:u,since:_})}catch(t){return(0,m._f)(t,c,d),c((0,C.H)(t)),{error:t}}return{data:l}}}function N(t,e){let{before:n="",after:r="",perPage:o=c.Z.THREADS_CHUNK_SIZE,unread:s=!1,extended:_=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return async c=>{var d,l,p;const f=await c(R(t,e,{before:n,after:r,perPage:o,unread:s,totalsOnly:!1,threadsOnly:!0,extended:_}));if(f.error)return f;const y=null==f?void 0:f.data;return y?(null!=y&&null!==(d=y.threads)&&void 0!==d&&d.length&&(await c((0,u.C4)(a()(y.threads.map((t=>{let{participants:e}=t;return e.map((t=>{let{id:e}=t;return e}))})).flat()))),c({type:i.tk.RECEIVED_POSTS,data:{posts:y.threads.map((t=>{let{post:e}=t;return I(I({},e),{},{update_at:0})}))}}),c((0,E.SM)(a()(y.threads.map((t=>{let{post:e}=t;return e})))))),c({type:s?i.TN.RECEIVED_UNREAD_THREADS:i.TN.RECEIVED_THREADS,data:{threads:null!==(l=null==y||null===(p=y.threads)||void 0===p?void 0:p.map((t=>I(I({},t),{},{is_following:!0}))))&&void 0!==l?l:[],team_id:e}}),{data:y}):{error:!0}}}function A(t,e){return async n=>{const r=await n(R(t,e,{totalsOnly:!0,threadsOnly:!1}));if(r.error)return r;const a=null==r?void 0:r.data;if(!a)return{error:!0};const o={total:a.total,total_unread_threads:a.total_unread_threads,total_unread_mentions:a.total_unread_mentions,total_unread_urgent_mentions:a.total_unread_urgent_mentions};return n({type:i.TN.RECEIVED_THREAD_COUNTS,data:I(I({},o),{},{team_id:e})}),{data:o}}}function O(t,e,n){return async r=>{var s,c,E;const _=await r(R(t,e,{since:n,totalsOnly:!1,threadsOnly:!1,extended:!0}));if(_.error)return _;const d=null==_?void 0:_.data;if(!d)return{error:!0};const l=[];null!=d&&null!==(s=d.threads)&&void 0!==s&&s.length&&(await r((0,u.C4)(a()(d.threads.map((t=>{let{participants:e}=t;return e.map((t=>{let{id:e}=t;return e}))})).flat()))),l.push({type:i.tk.RECEIVED_POSTS,data:{posts:d.threads.map((t=>{let{post:e}=t;return I(I({},e),{},{update_at:0})}))}})),l.push({type:i.TN.RECEIVED_THREADS,data:{threads:null!==(c=null==d||null===(E=d.threads)||void 0===E?void 0:E.map((t=>I(I({},t),{},{is_following:!0}))))&&void 0!==c?c:[],team_id:e}});const p={total:d.total,total_unread_threads:d.total_unread_threads,total_unread_mentions:d.total_unread_mentions,total_unread_urgent_mentions:d.total_unread_urgent_mentions};return l.push({type:i.TN.RECEIVED_THREAD_COUNTS,data:I(I({},p),{},{team_id:e})}),r((0,o.$C)(l)),{data:d}}}function g(t,e,n,r,a,o){const s=e(),c=(0,_.rc)(s),u=(0,f.ym)(s),E=I(I({},n),{},{is_following:!0});t({type:i.bZ.RECEIVED_PROFILES_LIST,data:E.participants.filter((t=>t.id!==c))}),t({type:i.tk.RECEIVED_POST,data:I(I({},E.post),{},{update_at:0}),features:{crtEnabled:u}}),t({type:i.TN.RECEIVED_THREAD,data:{thread:E,team_id:r}});const d=s.entities.threads.threads[n.id];var l,p;return(null!=o&&null!=a||null!=d)&&t(b(E.id,r,E.post.channel_id,{lastViewedAt:E.last_viewed_at,prevUnreadMentions:null!==(l=null==d?void 0:d.unread_mentions)&&void 0!==l?l:o,newUnreadMentions:E.unread_mentions,prevUnreadReplies:null!==(p=null==d?void 0:d.unread_replies)&&void 0!==p?p:a,newUnreadReplies:E.unread_replies})),E}function L(t,e,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return async(a,o)=>{let i;try{i=await s.je.getUserThread(t,e,n,r)}catch(t){return(0,m._f)(t,a,o),a((0,C.H)(t)),{error:t}}return i&&(i=g(a,o,i,e)),{data:i}}}function v(t,e){t({type:i.TN.ALL_TEAM_THREADS_READ,data:{team_id:e}})}function D(t,e){return async(n,r)=>{try{await s.je.updateThreadsReadForUser(t,e)}catch(t){return(0,m._f)(t,n,r),n((0,C.H)(t)),{error:t}}return v(n,e),{}}}function M(t,e,n,r){return async(a,o)=>{try{await s.je.markThreadAsUnreadForUser(t,e,n,r)}catch(t){return(0,m._f)(t,a,o),a((0,C.H)(t)),{error:t}}return{}}}function U(t,e,n){return async(r,a)=>{const o=(0,y.Zf)();let i=o(a(),n);const s=a(),c=(0,l.bJ)(s,n);return(null==c?void 0:c.reply_count)===i.length-1?r(M(t,e,n,i[0].id)):r((0,h.ct)(n)).then((s=>{let{data:c,error:u}=s;if(c)i=o(a(),n),r(M(t,e,n,i[0].id));else if(u)return{error:u};return{}})),{}}}function P(t,e,n,r){return async(a,o)=>{try{await s.je.updateThreadReadForUser(t,e,n,r)}catch(t){return(0,m._f)(t,a,o),a((0,C.H)(t)),{error:t}}return{}}}function b(t,e,n,r){let{lastViewedAt:a,prevUnreadMentions:o,newUnreadMentions:s,prevUnreadReplies:c,newUnreadReplies:u}=r;return(r,E)=>{const _=E(),d=(0,p.mr)(_,n),f=(0,l.bJ)(_,t);return r({type:i.TN.READ_CHANGED_THREAD,data:{id:t,teamId:e,channelId:n,lastViewedAt:a,prevUnreadMentions:o,newUnreadMentions:s,prevUnreadReplies:c,newUnreadReplies:u,channelType:null==d?void 0:d.type,isUrgent:null==f?void 0:f.is_urgent}})}}function w(t,e,n,r){t({type:i.TN.FOLLOW_CHANGED_THREAD,data:{id:e,team_id:n,following:r}})}function j(t,e,n,r){return async(a,o)=>{w(a,n,e,r);try{await s.je.updateThreadFollowForUser(t,e,n,r)}catch(t){return(0,m._f)(t,a,o),a((0,C.H)(t)),{error:t}}return{}}}function H(t,e,n,r){const a=e(),s=(0,l.Q8)(a,n),c=(0,p.mr)(a,n);if(null==c)return;const u=c.team_id,E=[];for(const t of s)E.push({type:i.TN.READ_CHANGED_THREAD,data:{id:t.id,channelId:n,teamId:u,lastViewedAt:r,newUnreadMentions:0,newUnreadReplies:0,isUrgent:t.is_urgent}});t((0,o.$C)(E))}function V(t){return(e,n)=>{const r=n(),a=(0,l.bJ)(r,t.id);if(!a||!a.unread_replies&&!a.unread_mentions)return{data:!1};const o=(0,p.mr)(r,t.channel_id),s=(null==o?void 0:o.team_id)||(0,d.ev)(r);return e({type:i.TN.DECREMENT_THREAD_COUNTS,teamId:s,replies:a.unread_replies,mentions:a.unread_mentions,channelType:o.type})}}},73396:(t,e,n)=>{"use strict";n.d(e,{xT:()=>Z,w5:()=>pt,Hd:()=>Gt,RZ:()=>Ft,r4:()=>L,CR:()=>Ut,mL:()=>z,Wv:()=>jt,q9:()=>Ht,lg:()=>g,M2:()=>P,AH:()=>Vt,jo:()=>$,C4:()=>w,on:()=>j,cp:()=>b,Ef:()=>H,Wi:()=>V,rw:()=>Q,D7:()=>K,r:()=>B,gV:()=>F,r1:()=>Y,ax:()=>J,PP:()=>G,BN:()=>k,Rx:()=>ut,lR:()=>at,W7:()=>rt,Oi:()=>W,S1:()=>U,PR:()=>X,fJ:()=>Pt,fh:()=>bt,Oc:()=>lt,CX:()=>et,dQ:()=>tt,f9:()=>D,Ak:()=>v,kS:()=>M,qS:()=>Ct,MH:()=>q,bD:()=>ct,h8:()=>Nt,tG:()=>_t,_1:()=>Et,gf:()=>dt,ei:()=>wt,t6:()=>ft,LS:()=>At,zk:()=>Rt,_2:()=>it,QJ:()=>Ot,Tf:()=>ot,w0:()=>Dt,gh:()=>Lt,jh:()=>Mt,HH:()=>vt,Nc:()=>st,DO:()=>yt,oR:()=>x,q0:()=>It,zP:()=>ht,Zy:()=>St,hB:()=>mt,_p:()=>gt,NH:()=>Tt}),n(88674),n(33948),n(19601),n(85827),n(74916),n(23123),n(41817);var r=n(63241),a=n(4215),o=n(28808),i=n(25062),s=n(92743),c=n(74147),u=n(28399),E=n(10386),_=n(33969);function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){p(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function p(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const f=JSON.stringify({query:'\n    query gqlWebCurrentUserInfo {\n        config\n        license\n        user(id: "me") {\n            id\n            create_at: createAt\n            delete_at: deleteAt\n            update_at: updateAt\n            username\n            auth_service: authService\n            email\n            nickname\n            first_name: firstName\n            last_name: lastName\n            position\n            roles {\n                id\n                name\n                permissions\n            }\n            props\n            notify_props: notifyProps\n            last_picture_update: lastPictureUpdate\n            last_password_update: lastPasswordUpdate\n            terms_of_service_id: termsOfServiceId\n            terms_of_service_create_at: termsOfServiceCreateAt\n            locale\n            timezone\n            remote_id: remoteId\n            preferences {\n                name\n                user_id: userId\n                category\n                value\n            }\n            is_bot: isBot\n            bot_description: botDescription\n            mfa_active: mfaActive\n        }\n        teamMembers(userId: "me") {\n            team {\n                id\n                display_name: displayName\n                name\n                create_at: createAt\n                update_at: updateAt\n                delete_at: deleteAt\n                description\n                email\n                type\n                company_name: companyName\n                allowed_domains: allowedDomains\n                invite_id: inviteId\n                last_team_icon_update: lastTeamIconUpdate\n                group_constrained: groupConstrained\n                allow_open_invite: allowOpenInvite\n                scheme_id: schemeId\n                policy_id: policyId\n            }\n            roles {\n                id\n                name\n                permissions\n            }\n            delete_at: deleteAt\n            scheme_guest: schemeGuest\n            scheme_user: schemeUser\n            scheme_admin: schemeAdmin\n        }\n    }\n',operationName:"gqlWebCurrentUserInfo"});function y(t){var e,n;return l(l({},t),{},{position:null!==(e=null==t?void 0:t.position)&&void 0!==e?e:"",roles:(0,c.F$)(null!==(n=null==t?void 0:t.roles)&&void 0!==n?n:[])})}function C(t,e){return t.map((t=>{var n,r,a,o,i,s,u;return{team_id:null!==(n=null==t||null===(r=t.team)||void 0===r?void 0:r.id)&&void 0!==n?n:"",user_id:e||"",delete_at:null!==(a=null==t?void 0:t.delete_at)&&void 0!==a?a:0,roles:(0,c.F$)(null!==(o=null==t?void 0:t.roles)&&void 0!==o?o:[]),scheme_admin:null!==(i=null==t?void 0:t.scheme_admin)&&void 0!==i&&i,scheme_guest:null!==(s=null==t?void 0:t.scheme_guest)&&void 0!==s&&s,scheme_user:null!==(u=null==t?void 0:t.scheme_user)&&void 0!==u&&u,mention_count:0,mention_count_root:0,msg_count:0,msg_count_root:0,thread_count:0,thread_mention_count:0}}))}var m=n(22742),h=n(12707),S=n(89754),I=n(60690),T=n(16794),R=n(3626);function N(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function A(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?N(Object(n),!0).forEach((function(e){O(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function O(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g(t){return(0,u.Vs)({clientFunc:a.je.generateMfaSecret,params:[t]})}function L(t,e,n,r){return async(i,s)=>{let c;try{c=await a.je.createUser(t,e,n,r)}catch(t){return(0,u._f)(t,i,s),i((0,E.H)(t)),{error:t}}const _={[c.id]:c};return i({type:o.bZ.RECEIVED_PROFILES,data:_}),{data:c}}}function v(){return async(t,e)=>{const n=e().entities.general.serverVersion||a.je.getServerVersion();t((0,i.HD)(n));try{await Promise.all([t((0,i.Zb)()),t((0,i.ut)()),t($()),t((0,_.VJ)()),t((0,s.Dc)()),t((0,s.r8)())]);const n=(0,S.ym)(e());await t((0,s.Jw)(n))}catch(e){return t((0,E.H)(e)),{error:e}}return{data:!0}}}function D(){return async(t,e)=>{const n=e().entities.general.serverVersion||a.je.getServerVersion();let s,c,u,_,d,p,m;t((0,i.HD)(n));try{const{data:t,errors:e}=await a.je.fetchWithGraphQL(f);if(e||!t)throw new Error("Error returned in fetching current user info with graphQL");s=Object.assign({},t.license),c=Object.assign({},t.config),u=y(t.user),_=function(t,e){let n=[...t];return e.forEach((t=>{t.roles&&(n=[...n,...t.roles])})),n}(t.user.roles,t.teamMembers),d=[...t.user.preferences],p=t.teamMembers.map((t=>l({},t.team))),m=C(t.teamMembers,t.user.id)}catch(e){return t((0,E.H)(e)),{error:e}}return t((0,r.$C)([{type:o.P.CLIENT_LICENSE_RECEIVED,data:s},{type:o.P.CLIENT_CONFIG_RECEIVED,data:c},{type:o.bZ.RECEIVED_ME,data:u},{type:o.dC.RECEIVED_ROLES,data:_},{type:o.wT.RECEIVED_ALL_PREFERENCES,data:d},{type:o.OU.RECEIVED_TEAMS_LIST,data:p},{type:o.OU.RECEIVED_MY_TEAM_MEMBERS,data:m}])),{data:!0}}}function M(){return async t=>{t({type:o.bZ.LOGOUT_REQUEST,data:null});try{await a.je.logout()}catch(t){}return t({type:o.bZ.LOGOUT_SUCCESS,data:null}),{data:!0}}}function U(){return(0,u.Vs)({clientFunc:a.je.getTotalUsersStats,onSuccess:o.bZ.RECEIVED_USER_STATS})}function P(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return async(n,r)=>{let i;try{i=await a.je.getFilteredUsersStats(t)}catch(t){return(0,u._f)(t,n,r),n((0,E.H)(t)),{error:t}}return e&&n({type:o.bZ.RECEIVED_FILTERED_USER_STATS,data:i}),{data:i}}}function b(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:R.LQ.PROFILE_CHUNK_SIZE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return async(r,i)=>{const{currentUserId:s}=i().entities.users;let c;try{c=await a.je.getProfiles(t,e,n),(0,I.n4)(s,c)}catch(t){return(0,u._f)(t,r,i),r((0,E.H)(t)),{error:t}}return r({type:o.bZ.RECEIVED_PROFILES_LIST,data:c}),{data:c}}}function w(t){return async(e,n)=>{const{profiles:r}=n().entities.users,a=[];return t.forEach((t=>{r[t]||a.push(t)})),a.length>0?(rt(a)(e,n),H(a)(e,n)):{data:[]}}}function j(t){return async(e,n)=>{const{profiles:r}=n().entities.users,a=Object.values(r).reduce(((t,e)=>(t[e.username]=e,t)),{}),o=[];return t.forEach((t=>{a[t]||o.push(t)})),o.length>0?V(o)(e,n):{data:[]}}}function H(t,e){return async(n,r)=>{const{currentUserId:i}=r().entities.users;let s;try{s=await a.je.getProfilesByIds(t,e),(0,I.n4)(i,s)}catch(t){return(0,u._f)(t,n,r),n((0,E.H)(t)),{error:t}}return n({type:o.bZ.RECEIVED_PROFILES_LIST,data:s}),{data:s}}}function V(t){return async(e,n)=>{const{currentUserId:r}=n().entities.users;let i;try{i=await a.je.getProfilesByUsernames(t),(0,I.n4)(r,i)}catch(t){return(0,u._f)(t,e,n),e((0,E.H)(t)),{error:t}}return e({type:o.bZ.RECEIVED_PROFILES_LIST,data:i}),{data:i}}}function F(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:R.LQ.PROFILE_CHUNK_SIZE,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return async(c,_)=>{const{currentUserId:d}=_().entities.users;let l;try{l=await a.je.getProfilesInTeam(t,e,n,i,s)}catch(t){return(0,u._f)(t,c,_),c((0,E.H)(t)),{error:t}}return c((0,r.$C)([{type:o.bZ.RECEIVED_PROFILES_LIST_IN_TEAM,data:l,id:t},{type:o.bZ.RECEIVED_PROFILES_LIST,data:(0,I.n4)(d,[...l])}])),{data:l}}}function G(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:R.LQ.PROFILE_CHUNK_SIZE;return async(s,c)=>{let _;try{_=await a.je.getProfilesNotInTeam(t,e,n,i)}catch(t){return(0,u._f)(t,s,c),s((0,E.H)(t)),{error:t}}const d=e?o.bZ.RECEIVED_PROFILES_LIST_NOT_IN_TEAM_AND_REPLACE:o.bZ.RECEIVED_PROFILES_LIST_NOT_IN_TEAM;return s((0,r.$C)([{type:d,data:_,id:t},{type:o.bZ.RECEIVED_PROFILES_LIST,data:_}])),{data:_}}}function k(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:R.LQ.PROFILE_CHUNK_SIZE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return async(i,s)=>{let c=null;try{c=await a.je.getProfilesWithoutTeam(t,e,n)}catch(t){return(0,u._f)(t,i,s),i((0,E.H)(t)),{error:t}}return i((0,r.$C)([{type:o.bZ.RECEIVED_PROFILES_LIST_WITHOUT_TEAM,data:c},{type:o.bZ.RECEIVED_PROFILES_LIST,data:c}])),{data:c}}}let Z;function Q(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:R.LQ.PROFILE_CHUNK_SIZE,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return async(c,_)=>{const{currentUserId:d}=_().entities.users;let l;try{l=await a.je.getProfilesInChannel(t,e,n,i,s)}catch(t){return(0,u._f)(t,c,_),c((0,E.H)(t)),{error:t}}return c((0,r.$C)([{type:o.bZ.RECEIVED_PROFILES_LIST_IN_CHANNEL,data:l,id:t},{type:o.bZ.RECEIVED_PROFILES_LIST,data:(0,I.n4)(d,[...l])}])),{data:l}}}function B(t){return async(e,n)=>{const{currentUserId:i}=n().entities.users;let s;try{s=await a.je.getProfilesInGroupChannels(t.slice(0,R.LQ.MAX_GROUP_CHANNELS_FOR_PROFILES))}catch(t){return(0,u._f)(t,e,n),e((0,E.H)(t)),{error:t}}const c=[];for(const t in s)if(s.hasOwnProperty(t)){const e=s[t];c.push({type:o.bZ.RECEIVED_PROFILES_LIST_IN_CHANNEL,data:e,id:t},{type:o.bZ.RECEIVED_PROFILES_LIST,data:(0,I.n4)(i,[...e])})}return e((0,r.$C)(c)),{data:s}}}function Y(t,e,n,i){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:R.LQ.PROFILE_CHUNK_SIZE;return async(c,_)=>{const{currentUserId:d}=_().entities.users;let l;try{l=await a.je.getProfilesNotInChannel(t,e,n,i,s)}catch(t){return(0,u._f)(t,c,_),c((0,E.H)(t)),{error:t}}const p=n?o.bZ.RECEIVED_PROFILES_LIST_NOT_IN_CHANNEL_AND_REPLACE:o.bZ.RECEIVED_PROFILES_LIST_NOT_IN_CHANNEL;return c((0,r.$C)([{type:p,data:l,id:e},{type:o.bZ.RECEIVED_PROFILES_LIST,data:(0,I.n4)(d,[...l])}])),{data:l}}}function $(){return async(t,e)=>{const n=(0,u.Vs)({clientFunc:a.je.getMe,onSuccess:o.bZ.RECEIVED_ME}),r=await n(t,e);return"error"in r||"data"in r&&t((0,c.k3)(r.data.roles.split(" "))),r}}function x(t,e){return async(n,r)=>{const i=await n((0,u.Vs)({clientFunc:a.je.updateMyTermsOfServiceStatus,params:[t,e]}));return"data"in i?(e&&n({type:o.bZ.RECEIVED_TERMS_OF_SERVICE_STATUS,data:{terms_of_service_create_at:(new Date).getTime(),terms_of_service_id:e?t:null,user_id:(0,h.rc)(r())}}),{data:i.data}):{error:i.error}}}function K(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:R.LQ.PROFILE_CHUNK_SIZE,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return async(s,c)=>{const{currentUserId:_}=c().entities.users;let d;try{d=await a.je.getProfilesInGroup(t,e,n,i)}catch(t){return(0,u._f)(t,s,c),s((0,E.H)(t)),{error:t}}return s((0,r.$C)([{type:o.bZ.RECEIVED_PROFILES_LIST_IN_GROUP,data:d,id:t},{type:o.bZ.RECEIVED_PROFILES_LIST,data:(0,I.n4)(_,[...d])}])),{data:d}}}function J(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:R.LQ.PROFILE_CHUNK_SIZE;return async(i,s)=>{const{currentUserId:c}=s().entities.users;let _;try{_=await a.je.getProfilesNotInGroup(t,e,n)}catch(t){return(0,u._f)(t,i,s),i((0,E.H)(t)),{error:t}}return i((0,r.$C)([{type:o.bZ.RECEIVED_PROFILES_LIST_NOT_IN_GROUP,data:_,id:t},{type:o.bZ.RECEIVED_PROFILES_LIST,data:(0,I.n4)(c,[..._])}])),{data:_}}}function W(){return(0,u.Vs)({clientFunc:a.je.getTermsOfService})}function q(t){return(0,u.Vs)({clientFunc:a.je.promoteGuestToUser,params:[t]})}function z(t){return(0,u.Vs)({clientFunc:a.je.demoteUserToGuest,params:[t]})}function X(t){return(0,u.Vs)({clientFunc:a.je.getUser,onSuccess:o.bZ.RECEIVED_PROFILE,params:[t]})}function tt(t){return(0,u.Vs)({clientFunc:a.je.getUserByUsername,onSuccess:o.bZ.RECEIVED_PROFILE,params:[t]})}function et(t){return(0,u.Vs)({clientFunc:a.je.getUserByEmail,onSuccess:o.bZ.RECEIVED_PROFILE,params:[t]})}!function(t){t.None="",t.Admin="admin"}(Z||(Z={}));let nt=[];function rt(t){return(0,u.Vs)({clientFunc:a.je.getStatusesByIds,onSuccess:o.bZ.RECEIVED_STATUSES,params:[t]})}function at(t){return(0,u.Vs)({clientFunc:a.je.getStatus,onSuccess:o.bZ.RECEIVED_STATUS,params:[t]})}function ot(t){return async(e,n)=>{try{await a.je.updateStatus(t)}catch(t){return(0,u._f)(t,e,n),e((0,E.H)(t)),{error:t}}return e({type:o.bZ.RECEIVED_STATUS,data:t}),{data:t}}}function it(t){return(0,u.Vs)({clientFunc:a.je.updateCustomStatus,params:[t]})}function st(){return(0,u.Vs)({clientFunc:a.je.unsetCustomStatus})}function ct(t){return(0,u.Vs)({clientFunc:a.je.removeRecentCustomStatus,params:[t]})}function ut(t){return(0,u.Vs)({clientFunc:a.je.getSessions,onSuccess:o.bZ.RECEIVED_SESSIONS,params:[t]})}function Et(t,e){return async(n,r)=>{try{await a.je.revokeSession(t,e)}catch(t){return(0,u._f)(t,n,r),n((0,E.H)(t)),{error:t}}return n({type:o.bZ.RECEIVED_REVOKED_SESSION,sessionId:e,data:null}),{data:!0}}}function _t(t){return async(e,n)=>{try{await a.je.revokeAllSessionsForUser(t)}catch(t){return(0,u._f)(t,e,n),e((0,E.H)(t)),{error:t}}const i={isCurrentUser:t===(0,h.rc)(n())};return e((0,r.$C)([{type:o.bZ.REVOKE_ALL_USER_SESSIONS_SUCCESS,data:i}])),{data:!0}}}function dt(){return async(t,e)=>{try{await a.je.revokeSessionsForAllUsers()}catch(n){return(0,u._f)(n,t,e),t((0,E.H)(n)),{error:n}}return t({type:o.bZ.REVOKE_SESSIONS_FOR_ALL_USERS_SUCCESS,data:null}),{data:!0}}}function lt(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:R.LQ.AUDITS_CHUNK_SIZE;return(0,u.Vs)({clientFunc:a.je.getUserAudits,onSuccess:o.bZ.RECEIVED_AUDITS,params:[t,e,n]})}function pt(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3?arguments[3]:void 0;return async(s,c)=>{s({type:o.bZ.AUTOCOMPLETE_USERS_REQUEST,data:null});const{currentUserId:_}=c().entities.users;let d;try{d=await a.je.autocompleteUsers(t,e,n,i)}catch(t){return(0,u._f)(t,s,c),s({type:o.bZ.AUTOCOMPLETE_USERS_FAILURE,error:t}),s((0,E.H)(t)),{error:t}}let l=[...d.users];d.out_of_channel&&(l=[...l,...d.out_of_channel]),(0,I.n4)(_,l);const p=[{type:o.bZ.RECEIVED_PROFILES_LIST,data:l},{type:o.bZ.AUTOCOMPLETE_USERS_SUCCESS}];return n&&(p.push({type:o.bZ.RECEIVED_PROFILES_LIST_IN_CHANNEL,data:d.users,id:n}),p.push({type:o.bZ.RECEIVED_PROFILES_LIST_NOT_IN_CHANNEL,data:d.out_of_channel||[],id:n})),e&&p.push({type:o.bZ.RECEIVED_PROFILES_LIST_IN_TEAM,data:l,id:e}),s((0,r.$C)(p)),{data:d}}}function ft(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async(n,i)=>{const{currentUserId:s}=i().entities.users;let c;try{c=await a.je.searchUsers(t,e)}catch(t){return(0,u._f)(t,n,i),n((0,E.H)(t)),{error:t}}const _=[{type:o.bZ.RECEIVED_PROFILES_LIST,data:(0,I.n4)(s,[...c])}];return e.in_channel_id&&_.push({type:o.bZ.RECEIVED_PROFILES_LIST_IN_CHANNEL,data:c,id:e.in_channel_id}),e.not_in_channel_id&&_.push({type:o.bZ.RECEIVED_PROFILES_LIST_NOT_IN_CHANNEL,data:c,id:e.not_in_channel_id}),e.team_id&&_.push({type:o.bZ.RECEIVED_PROFILES_LIST_IN_TEAM,data:c,id:e.team_id}),e.not_in_team_id&&_.push({type:o.bZ.RECEIVED_PROFILES_LIST_NOT_IN_TEAM,data:c,id:e.not_in_team_id}),e.in_group_id&&_.push({type:o.bZ.RECEIVED_PROFILES_LIST_IN_GROUP,data:c,id:e.in_group_id}),e.not_in_group_id&&_.push({type:o.bZ.RECEIVED_PROFILES_LIST_NOT_IN_GROUP,data:c,id:e.not_in_group_id}),n((0,r.$C)(_)),{data:c}}}function yt(t){return async e=>{let n;e({type:o.bZ.UPDATE_ME_REQUEST,data:null});try{n=await a.je.patchMe(t)}catch(t){return e({type:o.bZ.UPDATE_ME_FAILURE,error:t}),e((0,E.H)(t)),{error:t}}return e((0,r.$C)([{type:o.bZ.RECEIVED_ME,data:n},{type:o.bZ.UPDATE_ME_SUCCESS}])),e((0,c.k3)(n.roles.split(" "))),{data:n}}}function Ct(t){return async e=>{let n;try{n=await a.je.patchUser(t)}catch(t){return e((0,E.H)(t)),{error:t}}return e({type:o.bZ.RECEIVED_PROFILE,data:n}),{data:n}}}function mt(t,e){return async(n,r)=>{try{await a.je.updateUserRoles(t,e)}catch(t){return{error:t}}const i=r().entities.users.profiles[t];return i&&n({type:o.bZ.RECEIVED_PROFILE,data:A(A({},i),{},{roles:e})}),{data:!0}}}function ht(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return async(r,i)=>{try{await a.je.updateUserMfa(t,e,n)}catch(t){return r((0,E.H)(t)),{error:t}}const s=i().entities.users.profiles[t];return s&&r({type:o.bZ.RECEIVED_PROFILE,data:A(A({},s),{},{mfa_active:e})}),{data:!0}}}function St(t,e,n){return async(r,i)=>{try{await a.je.updateUserPassword(t,e,n)}catch(t){return r((0,E.H)(t)),{error:t}}const s=i().entities.users.profiles[t];return s&&r({type:o.bZ.RECEIVED_PROFILE,data:A(A({},s),{},{last_password_update_at:(new Date).getTime()})}),{data:!0}}}function It(t,e){return async(n,r)=>{try{await a.je.updateUserActive(t,e)}catch(t){return n((0,E.H)(t)),{error:t}}const i=r().entities.users.profiles[t];if(i){const t=e?0:(new Date).getTime();n({type:o.bZ.RECEIVED_PROFILE,data:A(A({},i),{},{delete_at:t})})}return{data:!0}}}function Tt(t){return(0,u.Vs)({clientFunc:a.je.verifyUserEmail,params:[t]})}function Rt(t){return(0,u.Vs)({clientFunc:a.je.sendVerificationEmail,params:[t]})}function Nt(t,e){return(0,u.Vs)({clientFunc:a.je.resetUserPassword,params:[t,e]})}function At(t){return(0,u.Vs)({clientFunc:a.je.sendPasswordResetEmail,params:[t]})}function Ot(t){return async(e,n)=>{try{await a.je.setDefaultProfileImage(t)}catch(t){return e((0,E.H)(t)),{error:t}}const r=n().entities.users.profiles[t];return r&&e({type:o.bZ.RECEIVED_PROFILE,data:A(A({},r),{},{last_picture_update:0})}),{data:!0}}}function gt(t,e){return async(n,r)=>{try{await a.je.uploadProfileImage(t,e)}catch(t){return{error:t}}const i=r().entities.users.profiles[t];return i&&n({type:o.bZ.RECEIVED_PROFILE,data:A(A({},i),{},{last_picture_update:(new Date).getTime()})}),{data:!0}}}function Lt(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return(0,u.Vs)({clientFunc:a.je.switchEmailToOAuth,params:[t,e,n,r]})}function vt(t,e,n){return(0,u.Vs)({clientFunc:a.je.switchOAuthToEmail,params:[t,e,n]})}function Dt(t,e,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return(0,u.Vs)({clientFunc:a.je.switchEmailToLdap,params:[t,e,n,r,o]})}function Mt(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return(0,u.Vs)({clientFunc:a.je.switchLdapToEmail,params:[t,e,n,r]})}function Ut(t,e){return async(n,i)=>{let s;try{s=await a.je.createUserAccessToken(t,e)}catch(t){return(0,u._f)(t,n,i),n((0,E.H)(t)),{error:t}}const c=[{type:o.lj.RECEIVED_USER_ACCESS_TOKEN,data:A(A({},s),{},{token:""})}],{currentUserId:_}=i().entities.users;return t===_&&c.push({type:o.bZ.RECEIVED_MY_USER_ACCESS_TOKEN,data:A(A({},s),{},{token:""})}),n((0,r.$C)(c)),{data:s}}}function Pt(t){return async(e,n)=>{let i;try{i=await a.je.getUserAccessToken(t)}catch(t){return(0,u._f)(t,e,n),e((0,E.H)(t)),{error:t}}const s=[{type:o.lj.RECEIVED_USER_ACCESS_TOKEN,data:i}],{currentUserId:c}=n().entities.users;return i.user_id===c&&s.push({type:o.bZ.RECEIVED_MY_USER_ACCESS_TOKEN,data:i}),e((0,r.$C)(s)),{data:i}}}function bt(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:R.LQ.PROFILE_CHUNK_SIZE;return async(i,s)=>{let c;try{c=await a.je.getUserAccessTokensForUser(t,e,n)}catch(t){return(0,u._f)(t,i,s),i((0,E.H)(t)),{error:t}}const _=[{type:o.lj.RECEIVED_USER_ACCESS_TOKENS_FOR_USER,data:c,userId:t}],{currentUserId:d}=s().entities.users;return t===d&&_.push({type:o.bZ.RECEIVED_MY_USER_ACCESS_TOKENS,data:c}),i((0,r.$C)(_)),{data:c}}}function wt(t){return async(e,n)=>{try{await a.je.revokeUserAccessToken(t)}catch(t){return(0,u._f)(t,e,n),e((0,E.H)(t)),{error:t}}return e({type:o.bZ.REVOKED_USER_ACCESS_TOKEN,data:t}),{data:!0}}}function jt(t){return async(e,n)=>{try{await a.je.disableUserAccessToken(t)}catch(t){return(0,u._f)(t,e,n),e((0,E.H)(t)),{error:t}}return e({type:o.bZ.DISABLED_USER_ACCESS_TOKEN,data:t}),{data:!0}}}function Ht(t){return async(e,n)=>{try{await a.je.enableUserAccessToken(t)}catch(t){return(0,u._f)(t,e,n),e((0,E.H)(t)),{error:t}}return e({type:o.bZ.ENABLED_USER_ACCESS_TOKEN,data:t}),{data:!0}}}function Vt(){return(0,u.Vs)({clientFunc:a.je.getKnownUsers})}function Ft(){return async t=>(t({type:o.bZ.CLEAR_MY_USER_ACCESS_TOKENS,data:null}),{data:!0})}function Gt(){return async(t,e)=>{const n=e(),r=(0,h.Rf)(n),a=n.websocket.lastDisconnectAt,o=(0,m.HF)(n);return(0,T.mu)(o,5,14)?(await t(H(Object.keys(r),{since:a})),{data:!0}):{data:!0}}}(0,u.Ds)((async(t,e)=>{rt([...new Set(nt)])(t,e)}),20,!1,(()=>{nt=[]}))},4215:(t,e,n)=>{"use strict";n.d(e,{Ev:()=>r.DEFAULT_LIMIT_BEFORE,je:()=>a,su:()=>r.DEFAULT_LIMIT_AFTER});var r=n(63014);const a=new r.Client4},85886:(t,e,n)=>{"use strict";n.d(e,{y:()=>r});const r={FAVORITES:"favorites",CHANNELS:"channels",DIRECT_MESSAGES:"direct_messages",CUSTOM:"custom"}},69588:(t,e,n)=>{"use strict";n.d(e,{Ah:()=>m,CT:()=>O,Hj:()=>y,Me:()=>h,_8:()=>T,kb:()=>N,n3:()=>C,on:()=>I}),n(26699),n(32023),n(91058),n(2707),n(33948),n(74916),n(23123);var r=n(38993),a=n.n(r),o=n(39346),i=n(3626),s=n(85886),c=n(9276),u=n(29757),E=n(89754),_=n(12707),d=n(64784),l=n(80555),p=n(23459),f=n(60690);function y(t){return t.entities.channelCategories.byId}function C(t,e){return y(t)[e]}function m(t,e,n){return S(t,(t=>t.type===n&&t.team_id===e))}function h(t,e,n){return S(t,(t=>t.team_id===e&&t.channel_ids.includes(n)))}function S(t,e){const n=y(t);return Object.values(n).find(e)}function I(t,e){return t.entities.channelCategories.orderByTeam[e]}function T(){return(0,o.P1)("makeGetCategoriesForTeam",I,(t=>t.entities.channelCategories.byId),((t,e)=>t?t.map((t=>e[t])):[]))}function R(t,e,n){return(r,a)=>{const o=(0,l.Mm)(n[r.id]),i=(0,l.Mm)(n[a.id]);return o&&!i?1:!o&&i?-1:t(r).localeCompare(t(a),e,{numeric:!0})}}function N(){const t=(0,c.Y7)(),e=A();let n=[];return(r,o)=>{const i=t(r,o.channel_ids),s=e(r,i,o).map((t=>t.id));return a()(s,n)||(n=s),n}}function A(){const t=(0,o.P1)("makeFilterArchivedChannels",((t,e)=>e),c.gO,((t,e)=>{const n=t.filter((t=>t&&(t.id===e||0===t.delete_at)));return n.length===t.length?t:n})),e=(0,o.P1)("makeFilterAutoclosedDMs",((t,e)=>e),((t,e,n)=>n),c.gO,(t=>t.entities.users.profiles),_.rc,c.h4,c.wu,E.nR,E.VJ,E.ym,((t,e,n,r,a,o,c,u,E,_)=>{if(e!==s.y.DIRECT_MESSAGES)return t;const d=(t,e)=>{const n=E[(0,p.g)(t,e)];return parseInt(n?n.value:"0",10)},f=t=>{var e;return Math.max(null===(e=o[t.id])||void 0===e?void 0:e.last_viewed_at,d(i.uP.CATEGORY_CHANNEL_APPROXIMATE_VIEW_TIME,t.id),d(i.uP.CATEGORY_CHANNEL_OPEN_TIME,t.id))};let y=0,C=t.filter((t=>{if(g(t.id,c,o,_))return y++,!0;if(t.id===n)return!0;if(t.type===i.LQ.DM_CHANNEL){const e=(0,l.aU)(a,t.name),n=r[e],o=f(t);if(!n||n.delete_at>o)return!1}return!0}));C.sort(((t,e)=>{if(t.id===n)return-1;if(e.id===n)return 1;if(g(t.id,c,o,_)&&!g(e.id,c,o,_))return-1;if(!g(t.id,c,o,_)&&g(e.id,c,o,_))return 1;const r=f(t)||0,a=f(e)||0;return r>a?-1:a>r?1:0}));const m=Math.max(u,y);C=C.slice(0,m);const h=new Set(C),S=t.filter((t=>h.has(t)));return S.length===t.length?t:S})),n=(0,o.P1)("makeFilterManuallyClosedDMs",((t,e)=>e),E.VJ,c.gO,_.rc,c.h4,c.wu,E.ym,((t,e,n,r,a,o,s)=>{const c=t.filter((t=>{let c;if(t.type!==i.LQ.DM_CHANNEL&&t.type!==i.LQ.GM_CHANNEL)return!0;if(g(t.id,o,a,s))return!0;if(n===t.id)return!0;if(t.type===i.LQ.DM_CHANNEL){const n=(0,l.aU)(r,t.name);c=e[(0,p.g)(i.uP.CATEGORY_DIRECT_CHANNEL_SHOW,n)]}else c=e[(0,p.g)(i.uP.CATEGORY_GROUP_CHANNEL_SHOW,t.id)];return c&&"false"!==c.value}));return c.length===t.length?t:c})),r=function(){const t=(0,o.P1)("makeSortChannelsByName",((t,e)=>e),(t=>(0,u.M)(t)),c.h4,((t,e,n)=>[...t].sort(R((t=>t.display_name),e,n)))),e=(0,o.P1)("makeSortChannelsByNameWithDMs",((t,e)=>e),_.rc,(t=>t.entities.users.profiles),E.kl,(t=>(0,u.M)(t)),c.h4,((t,e,n,r,a,o)=>{const s={};return[...t].sort(R((t=>{if(s[t.id])return s[t.id];let o;if(t.type===i.LQ.DM_CHANNEL){const a=(0,l.aU)(e,t.name),i=n[a];o=(0,f.fw)(i,r,!1)}else if(t.type===i.LQ.GM_CHANNEL){const i=t.display_name.split(", "),s=[];for(const t of i){const a=Object.values(n).find((e=>e.username===t));a&&a.id!==e&&s.push((0,f.fw)(a,r,!1))}o=s.sort(((t,e)=>t.localeCompare(e,a,{numeric:!0}))).join(", ")}else o=t.display_name;return s[t.id]=o,o}),a,o))})),n=(0,o.P1)("makeSortChannelsByRecency",((t,e)=>e),E.ym,((t,e)=>[...t].sort(((t,n)=>{const r=Math.max(e&&t.last_root_post_at||t.last_post_at,t.create_at);return Math.max(e&&n.last_root_post_at||n.last_post_at,n.create_at)-r}))));return(r,a,o)=>{let s=a;return o.sorting===d.r.Recency?s=n(r,s):o.sorting!==d.r.Alphabetical&&o.sorting!==d.r.Default||(s=s.some((t=>t.type===i.LQ.DM_CHANNEL||t.type===i.LQ.GM_CHANNEL))?e(r,s):t(r,s)),s}}();return(a,o,i)=>{let s=o;return s=t(a,s),s=n(a,s),s=e(a,s,i.type),s=r(a,s,i),s}}function O(){const t=T();let e,n,r=[],o={};return(i,s)=>{const u=I(i,s);if(u!==r&&(r=u,o={},e={},n={},u))for(const t of u)e[t]=(0,c.Y7)(),n[t]=A();const E=t(i,s),_={};for(const t of E){const r=e[t.id](i,t.channel_ids);_[t.id]=n[t.id](i,r,t)}return a()(_,o)?o:(o=_,_)}}function g(t,e,n,r){return(0,l.p2)(e[t],n[t],r).showUnread}},9276:(t,e,n)=>{"use strict";n.d(e,{Ag:()=>X,Bw:()=>b,CA:()=>w,D7:()=>j,Dp:()=>Mt,E0:()=>O,Ez:()=>z,Fq:()=>st,GP:()=>J,Gc:()=>rt,HU:()=>c.HU,Hl:()=>Et,IU:()=>I,JC:()=>k,M:()=>Ct,M6:()=>G,Or:()=>P,P6:()=>Rt,PR:()=>Ut,SC:()=>v,TB:()=>M,TT:()=>wt,Vk:()=>bt,Vl:()=>H,WR:()=>Pt,Xn:()=>mt,Y7:()=>D,ZO:()=>Q,ZY:()=>U,Zm:()=>gt,_3:()=>et,am:()=>Dt,bk:()=>Z,e7:()=>R,eB:()=>N,fG:()=>Ot,fQ:()=>B,f_:()=>Lt,fz:()=>It,gO:()=>c.gO,h4:()=>c.h4,iC:()=>W,ii:()=>at,iq:()=>St,j1:()=>T,kL:()=>g,kq:()=>ct,ll:()=>it,mr:()=>L,n0:()=>ut,oQ:()=>ot,p7:()=>q,pb:()=>yt,qB:()=>nt,r4:()=>V,s:()=>lt,wV:()=>tt,wu:()=>F,y2:()=>Tt,zE:()=>K});var r=n(6162),a=n.n(r),o=(n(33948),n(74916),n(15306),n(2707),n(85827),n(26699),n(32023),n(23123),n(86535),n(99244),n(73210),n(41817),n(3626)),i=n(85886),s=n(69588),c=n(61505),u=n(89754),E=n(34111),_=n(5596),d=n(12707),l=n(80555),p=n(16794),f=n(39346),y=n(53672),C=n(81618);function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){S(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function S(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function I(t){return t.entities.channels.channels}const T=(0,f.P1)("getAllDmChannels",I,(t=>{let e={};return Object.values(t).forEach((t=>{t.type===o.LQ.DM_CHANNEL&&(e=h(h({},e),{},{[t.name]:t}))})),e}));function R(t){return t.entities.channels.stats}function N(t){return t.entities.channels.channelsInTeam}const A=(0,f.P1)("getDirectChannelsSet",N,(t=>t?new Set(t[""]):new Set));function O(t){return t.entities.channels.membersInChannel}function g(){return(0,f.P1)("makeGetChannel",d.rc,(t=>t.entities.users.profiles),(t=>t.entities.users.profilesInChannel),((t,e)=>{const n=L(t,e.id);if(!n||!(0,l.I3)(n))return"";const r=(0,d.rc)(t),a=(0,l.aU)(r,n.name);return(0,d.ZO)(t,a)||"offline"}),((t,e)=>L(t,e.id)),u.kl,((t,e,n,r,a,o)=>a?(0,l.E8)(t,e,n,r,o,a):a))}function L(t,e){return I(t)[e]}function v(t,e){return(0,c.h4)(t)[e]}function D(){return(0,f.P1)("makeGetChannelsForIds",I,((t,e)=>e),((t,e)=>e.map((e=>t[e]))))}const M=(0,f.P1)("getCurrentChannel",I,c.gO,(t=>t.entities.users),u.kl,((t,e,n,r)=>{const a=t[e];return a?(0,l.vE)(n,r,a):a})),U=(0,f.P1)("getCurrentChannelNameForSearchShortcut",I,c.gO,(t=>t.entities.users),((t,e,n)=>{const r=t[e];if((null==r?void 0:r.type)===o.LQ.DM_CHANNEL){const t=(0,l.vE)(n,o.uP.DISPLAY_PREFER_USERNAME,r);return"@".concat(t.display_name)}if((null==r?void 0:r.type)===o.LQ.GM_CHANNEL){const t=(0,l.LS)(n,o.uP.DISPLAY_PREFER_USERNAME,r,!1);return"@".concat(t.display_name.replace(/\s/g,""))}return null==r?void 0:r.name})),P=(0,f.P1)("getMyChannelMember",c.h4,((t,e)=>e),((t,e)=>t[e]||null)),b=(0,f.P1)("getCurrentChannelStats",R,c.gO,((t,e)=>t[e]));function w(t){return Mt(t,(0,c.gO)(t))}const j=(0,f.P1)("isCurrentChannelMuted",c.HU,(t=>!!t&&(0,l.Mm)(t))),H=((0,f.P1)("isMutedChannel",((t,e)=>v(t,e)),(t=>!!t&&(0,l.Mm)(t))),(0,f.P1)("isCurrentChannelArchived",M,(t=>0!==t.delete_at))),V=(0,f.P1)("isCurrentChannelDefault",M,(t=>(0,l.s5)(t)));function F(t){return t.entities.channels.messageCounts}function G(t,e){return F(t)[e]}const k=(0,f.P1)("countCurrentChannelUnreadMessages",(function(t){return G(t,(0,c.gO)(t))}),c.HU,u.ym,((t,e,n)=>e?n?t.root-e.msg_count_root:t.total-e.msg_count:0));function Z(){return(0,f.P1)("makeGetChannelUnreadCount",((t,e)=>G(t,e)),((t,e)=>v(t,e)),u.ym,((t,e,n)=>(0,l.p2)(t,e,n)))}function Q(t,e){return(0,l.ZO)(I(t),e)}function B(t,e,n){return Object.values(I(t)).find((t=>t.team_id===e&&t.name===n))}const Y=(0,f.P1)("getChannelSetInCurrentTeam",_.ev,N,((t,e)=>e&&e[t]||[])),$=(0,f.P1)("getChannelSetForAllTeams",I,(t=>{const e=[];return Object.values(t).forEach((t=>{t.type!==o.LQ.GM_CHANNEL&&t.type!==o.LQ.DM_CHANNEL&&e.push(t.id)})),e}));function x(t,e,n){const r=[];return void 0===e?r:(e.forEach((e=>{r.push(t[e])})),r.sort(l.LM.bind(null,n)))}const K=(0,f.P1)("getChannelsInCurrentTeam",I,Y,c.ts,((t,e,n)=>{let r=o.LQ.DEFAULT_LOCALE;return n&&n.locale&&(r=n.locale),x(t,e,r)})),J=(0,f.P1)("getChannelsInAllTeams",I,$,c.ts,((t,e,n)=>x(t,e,(null==n?void 0:n.locale)||o.LQ.DEFAULT_LOCALE))),W=(0,f.P1)("getChannelsNameMapInTeam",I,N,((t,e)=>e),((t,e,n)=>{const r=e[n]||[],a={};return r.forEach((e=>{const n=t[e];a[n.name]=n})),a})),q=(0,f.P1)("getChannelsNameMapInCurrentTeam",I,Y,((t,e)=>{const n={};return e.forEach((e=>{const r=t[e];n[r.name]=r})),n})),z=(0,p.dX)("getChannelNameToDisplayNameMap",I,Y,((t,e)=>{const n={};for(const r of e){const e=t[r];n[e.name]=e.display_name}return n})),X=(0,f.P1)("getAllDirectChannels",I,A,(t=>t.entities.users),u.kl,((t,e,n,r)=>{const a=[];return e.forEach((e=>{a.push((0,l.vE)(n,r,t[e]))})),a})),tt=(0,f.P1)("getAllDirectChannelsNameMapInCurrentTeam",I,A,(t=>t.entities.users),u.kl,((t,e,n,r)=>{const a={};return e.forEach((e=>{const o=t[e];a[o.name]=(0,l.vE)(n,r,o)})),a})),et=(0,f.P1)("getGroupChannels",I,A,(t=>t.entities.users),u.kl,((t,e,n,r)=>{const a=[];return e.forEach((e=>{const i=t[e];i.type===o.LQ.GM_CHANNEL&&a.push((0,l.vE)(n,r,i))})),a})),nt=(0,f.P1)("getMyChannels",K,X,c.h4,((t,e,n)=>[...t,...e].filter((t=>n.hasOwnProperty(t.id))))),rt=(0,f.P1)("getOtherChannels",K,c.h4,(function(t){return!(arguments.length>1&&void 0!==arguments[1])||arguments[1]}),((t,e,n)=>t.filter((t=>!(e.hasOwnProperty(t.id)||t.type!==o.LQ.OPEN_CHANNEL||!n&&0!==t.delete_at))))),at=(0,f.P1)("getMembersInCurrentChannel",c.gO,O,((t,e)=>e[t]));function ot(t){return{isUnread:Boolean(t),unreadMentionCount:"number"==typeof t&&t||0}}const it=(0,f.P1)("getUnreadStatus",I,c.h4,F,c.Rf,d.rc,_.ev,_.Dc,_.gb,u.ym,y.qN,y.dQ,((t,e,n,r,a,i,s,c,u,E,_)=>{const{messages:d,mentions:p}=Object.entries(e).reduce(((s,c)=>{var E;let[_,d]=c;const p=t[_];if(!p||!d)return s;if(p.team_id!==i&&p.type!==o.LQ.DM_CHANNEL&&p.type!==o.LQ.GM_CHANNEL)return s;if(!(p.type===o.LQ.DM_CHANNEL?0===(null===(E=r[(0,l.aU)(a,p.name)])||void 0===E?void 0:E.delete_at):0===p.delete_at))return s;const f=u?d.mention_count_root:d.mention_count;f&&(s.mentions+=f);const y=(0,l.p2)(n[_],e[_],u);return y.showUnread&&(s.messages+=y.messages),s}),{messages:0,mentions:0}),{messages:f,mentions:y}=s.reduce(((t,e)=>{if(i!==e.id){const n=c[e.id];t.messages+=u?n.msg_count_root:n.msg_count,t.mentions+=u?n.mention_count_root:n.mention_count}return t}),{messages:0,mentions:0}),C=d+f;let m=p+y,h=!1;return u&&Object.keys(E).forEach((t=>{const e=E[t];if(t===i){const t=_[i]||0;h=Boolean(t.total_unread_threads),m+=t.total_unread_mentions}else h=h||Boolean(e.total_unread_threads),m+=e.total_unread_mentions})),m||h||Boolean(C)})),st=(0,f.P1)("getTeamsUnreadStatuses",I,c.h4,F,c.Rf,d.rc,u.ym,y.qN,((t,e,n,r,a,i,s)=>{const c=new Set,u=new Map,E=new Map;for(const[r,a]of Object.entries(e)){const e=t[r];if(!e||!a)continue;if((0,l.Mm)(a))continue;if(e.type===o.LQ.DM_CHANNEL||e.type===o.LQ.GM_CHANNEL)continue;if(0!==e.delete_at)continue;const s=(0,l.p2)(n[r],a,i);if(s.showUnread&&c.add(e.team_id),s.mentions>0){const t=u.has(e.team_id)?u.get(e.team_id):0;0===t?u.set(e.team_id,s.mentions):u.set(e.team_id,s.mentions+t)}s.hasUrgent&&(E.has(e.team_id)&&E.get(e.team_id)||E.set(e.team_id,s.hasUrgent))}if(i)for(const t of Object.keys(s)){const e=s[t];if(e.total_unread_threads>0&&c.add(t),e.total_unread_mentions>0){const n=u.has(t)?u.get(t):0;0===n?u.set(t,e.total_unread_mentions):u.set(t,e.total_unread_mentions+n)}e.total_unread_urgent_mentions&&(E.has(t)&&E.get(t)||E.set(t,Boolean(e.total_unread_urgent_mentions)))}return[c,u,E]})),ct=(0,f.P1)("getUnreadStatusInCurrentTeam",c.gO,nt,c.h4,F,c.Rf,d.rc,_.ev,u.ym,y.dQ,C.DG,((t,e,n,r,a,i,s,c,u,E)=>{const{messages:_,mentions:d}=e.reduce(((e,s)=>{var u;const _=n[s.id];if(!_||s.id===t)return e;if(!(s.type===o.LQ.DM_CHANNEL?0===(null===(u=a[(0,l.aU)(i,s.name)])||void 0===u?void 0:u.delete_at):0===s.delete_at))return e;const d=c?_.mention_count_root:_.mention_count;d&&(e.mentions+=d),E&&(e.urgentMentions+=_.urgent_mention_count);const p=(0,l.p2)(r[s.id],_,c);return p.showUnread&&(e.messages+=p.messages),e}),{messages:0,mentions:0,urgentMentions:0});let p=d,f=!1;if(c&&t){const t=u[s];t&&(f=f||Boolean(t.total_unread_threads),p+=t.total_unread_mentions)}return p||f||Boolean(_)})),ut=(0,f.P1)("canManageChannelMembers",M,(t=>(0,E.iM)(t,o.Pl.MANAGE_PRIVATE_CHANNEL_MEMBERS)),(t=>(0,E.iM)(t,o.Pl.MANAGE_PUBLIC_CHANNEL_MEMBERS)),((t,e,n)=>!!t&&0===t.delete_at&&t.type!==o.LQ.DM_CHANNEL&&t.type!==o.LQ.GM_CHANNEL&&t.name!==o.LQ.DEFAULT_CHANNEL&&(t.type===o.LQ.OPEN_CHANNEL?n:t.type!==o.LQ.PRIVATE_CHANNEL||e)));function Et(t){const e=(0,c.h4)(t),n=Object.keys(e),r=(0,_.ev)(t);for(const e of n){const n=L(t,e);if(n&&n.team_id===r){if(n.type===o.LQ.OPEN_CHANNEL&&(0,E.Ai)(t,r,e,o.Pl.MANAGE_PUBLIC_CHANNEL_MEMBERS))return!0;if(n.type===o.LQ.PRIVATE_CHANNEL&&(0,E.Ai)(t,r,e,o.Pl.MANAGE_PRIVATE_CHANNEL_MEMBERS))return!0}}return!1}const _t=(0,p.dX)("getAllDirectChannelIds",A,(t=>Array.from(t))),dt=(0,p.dX)("getChannelIdsInCurrentTeam",_.ev,N,((t,e)=>Array.from(e[t]||[]))),lt=(0,p.dX)("getChannelIdsForCurrentTeam",dt,_t,((t,e)=>[...t,...e])),pt=(0,p.dX)("getChannelIdsInAllTeams",$,(t=>Array.from(t||[]))),ft=(0,p.dX)("getChannelIdsForAllTeams",pt,_t,((t,e)=>[...t,...e])),yt=(0,p.dX)("getUnreadChannelIds",u.ym,c.h4,F,lt,(function(t){return arguments.length>1&&void 0!==arguments[1]?arguments[1]:null}),((t,e,n,r,a)=>{const o=r.filter((r=>(0,l.p2)(n[r],e[r],t).showUnread));return a&&e[a.id]&&!o.includes(a.id)&&o.push(a.id),o})),Ct=(0,p.dX)("getAllTeamsUnreadChannelIds",u.ym,c.h4,F,ft,((t,e,n,r)=>r.filter((r=>(0,l.p2)(n[r],e[r],t).showUnread)))),mt=(0,p.dX)("getUnreadChannels",c.ts,c.Rf,d.ZQ,I,yt,u.kl,((t,e,n,r,a,i)=>t?a.filter((t=>r[t]&&0===r[t].delete_at)).map((a=>{const s=r[a];return s.type===o.LQ.DM_CHANNEL||s.type===o.LQ.GM_CHANNEL?(0,l.xt)(t.id,e,n[a],i,s):s})):[])),ht=(0,f.P1)("getAllTeamsUnreadChannels",c.ts,c.Rf,d.ZQ,I,Ct,u.kl,((t,e,n,r,a,i)=>t?a.filter((t=>r[t]&&0===r[t].delete_at)).map((a=>{const s=r[a];return s.type===o.LQ.DM_CHANNEL||s.type===o.LQ.GM_CHANNEL?(0,l.xt)(t.id,e,n[a],i,s):s})):[])),St=(t,e,n,r)=>{function o(t){return(0,l.Mm)(e[t.id])}function i(t){if(n&&t.id===n.id&&n.hadMentions)return!0;const r=e[t.id];return 0!==(null==r?void 0:r.mention_count)}return[...t].sort(((t,e)=>{if(o(t)&&!o(e))return 1;if(!o(t)&&o(e))return-1;if(i(t)&&!i(e))return-1;if(!i(t)&&i(e))return 1;const n=a()([r?t.last_root_post_at:t.last_post_at,t.create_at])||0;return(a()([r?e.last_root_post_at:e.last_post_at,e.create_at])||0)-n}))},It=(0,f.P1)("getSortedAllTeamsUnreadChannels",ht,c.h4,u.ym,((t,e,n)=>St(t,e,null,n))),Tt=(0,f.P1)("getDirectAndGroupChannels",c.ts,c.Rf,d.ZQ,I,u.kl,((t,e,n,r,a)=>t?Object.keys(r).map((t=>r[t])).filter((t=>Boolean(t))).filter((t=>t.type===o.LQ.DM_CHANNEL||t.type===o.LQ.GM_CHANNEL)).map((r=>(0,l.xt)(t.id,e,n[r.id],a,r))):[])),Rt=(0,f.P1)("getChannelsWithUserProfiles",d.ZQ,c.Rf,et,d.rc,((t,e,n,r)=>n.map((n=>{const a=((t,e,n)=>{const r=[];return e.forEach((e=>{e!==t&&r.push(n[e])})),r})(r,t[n.id]||new Set,e);return h(h({},n),{},{profiles:a})})))),Nt=(0,f.P1)("getDefaultChannelForTeams",I,(t=>{const e={};for(const n of Object.keys(t).map((e=>t[e])))n&&n.name===o.LQ.DEFAULT_CHANNEL&&(e[n.team_id]=n);return e})),At=(0,f.P1)("getMyFirstChannelForTeams",I,c.h4,_.Dc,c.ts,((t,e,n,r)=>{const a=r.locale||o.LQ.DEFAULT_LOCALE,i={};for(const r of n){const n=Object.values(t).filter((t=>t&&t.team_id===r.id&&Boolean(e[t.id]))).sort(l.LM.bind(null,a));0!==n.length&&(i[r.id]=n[0])}return i})),Ot=(t,e)=>{const n=Nt(t)[e],r=(0,E.Rm)(t,e,o.Pl.JOIN_PUBLIC_CHANNELS),a=(0,c.h4)(t);if(Boolean(n&&a[n.id])||r)return o.LQ.DEFAULT_CHANNEL;const i=At(t)[e];return i&&i.name||o.LQ.DEFAULT_CHANNEL};function gt(t,e){return!!e&&Boolean(t.entities.channels.manuallyUnread[e])}function Lt(t,e){return t.entities.channels.channelModerations[e]}const vt={};function Dt(t,e){return t.entities.channels.channelMemberCountsByGroup[e]||vt}function Mt(t,e){const n=L(t,e);if(!n)return!1;const r=(0,s.Ah)(t,n.team_id||(0,_.ev)(t),i.y.FAVORITES);return!!r&&r.channel_ids.includes(n.id)}function Ut(t,e){const n=L(t,e);if(!n)return;const r=n.name.split("__"),a=(0,d.rc)(t);if(2===r.length&&-1!==r.indexOf(a)){if(r[0]===r[1])return(0,d.PR)(t,r[0]);for(const e of r)if(e!==a)return(0,d.PR)(t,e)}}function Pt(){return(0,f.P1)("getChannelMemberCount",d.ZQ,d.rc,((t,e)=>e),((t,e,n)=>{let r=0;if(t&&t[n.id]){const a=t[n.id];r=a.size,a.has(e)&&r--}return r}))}const bt=(0,f.P1)("getMyActiveChannels",nt,(t=>t.flatMap((t=>t.delete_at>0?[]:t.id)))),wt=(0,f.P1)("getRecentProfilesFromDMs",I,c.Rf,c.ts,c.h4,((t,e,n,r)=>{if(!t||!e)return[];const a=Object.values(r).sort(((t,e)=>e.last_viewed_at-t.last_viewed_at)).map((t=>t.channel_id)),i=Object.values(t).filter((t=>t.type===o.LQ.GM_CHANNEL)),s=Object.values(t).filter((t=>t.type===o.LQ.DM_CHANNEL)),c={};s.forEach((t=>{if(t.name){const r=(0,l.aU)(n.id,t.name),a=e[r];a&&(c[t.id]=[a])}})),i.forEach((t=>{if(t.display_name){const r=t.display_name.split(",").map((t=>t.trim())).filter((t=>t!==n.username)).sort().map((t=>Object.values(e).find((e=>e.username===t))));r&&(c[t.id]=r)}}));const u=new Set;return a.forEach((t=>{c[t]&&c[t].forEach((t=>u.add(t)))})),[...u]}))},74327:(t,e,n)=>{"use strict";n.d(e,{RH:()=>c,pI:()=>u,yE:()=>i}),n(33948),n(2707);var r=n(39346),a=n(22742),o=n(16794);const i=t=>{var e;return"true"===(null===(e=(0,a.iE)(t))||void 0===e?void 0:e.EnableCustomEmoji)},s=(0,r.P1)("getCustomEmojis",i,(t=>t.entities.emojis.customEmoji),((t,e)=>t?e:{})),c=((0,r.P1)("getCustomEmojisAsMap",s,(t=>{const e=new Map;return Object.keys(t).forEach((n=>{e.set(n,t[n])})),e})),(0,r.P1)("getCustomEmojisByName",s,(t=>{const e=new Map;return Object.keys(t).forEach((n=>{e.set(t[n].name,t[n])})),e}))),u=(0,o.dX)("getCustomEmojiIdsSortedByName",s,(t=>Object.keys(t).sort(((e,n)=>t[e].name.localeCompare(t[n].name)))))},29757:(t,e,n)=>{"use strict";n.d(e,{M:()=>o});var r=n(3626),a=n(61505);function o(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.LQ.DEFAULT_LOCALE;const n=(0,a.ts)(t);return n&&n.locale||e}},53672:(t,e,n)=>{"use strict";n.d(e,{Il:()=>y,Jf:()=>f,NW:()=>s,Pd:()=>_,Q8:()=>h,SP:()=>p,bJ:()=>l,dQ:()=>E,hr:()=>d,pm:()=>C,qN:()=>u}),n(33948),n(26699),n(32023),n(2707);var r=n(39346),a=n(5596),o=n(48841);function i(t){return t.entities.threads.threadsInTeam}const s=(0,r.P1)("getThreadsInCurrentTeam",a.ev,i,((t,e)=>{var n;return null!==(n=null==e?void 0:e[t])&&void 0!==n?n:[]})),c=(0,r.P1)("getUnreadThreadsInCurrentTeam",a.ev,(function(t){return t.entities.threads.unreadThreadsInTeam}),((t,e)=>{var n;return null!==(n=null==e?void 0:e[t])&&void 0!==n?n:[]}));function u(t){return t.entities.threads.counts}function E(t){return t.entities.threads.countsIncludingDirect}const _=(0,r.P1)("getThreadCountsInCurrentTeam",a.ev,E,((t,e)=>null==e?void 0:e[t]));function d(t){return t.entities.threads.threads}function l(t,e){return e?d(t)[e]:null}function p(){return(0,r.P1)("getThreadOrSynthetic",((t,e)=>e),d,((t,e)=>{var n,r,a;const i=e[t.id];return null!=i&&i.id?i:{id:t.id,type:o.UP.Synthetic,reply_count:t.reply_count,participants:t.participants,last_reply_at:null!==(n=t.last_reply_at)&&void 0!==n?n:0,is_following:null!==(r=null!==(a=null==i?void 0:i.is_following)&&void 0!==a?a:t.is_following)&&void 0!==r?r:null,post:{user_id:t.user_id,channel_id:t.channel_id}}}))}const f=(0,r.P1)("getThreadOrderInCurrentTeam",s,d,((t,e)=>e),((t,e,n)=>{const r=[...t.filter((t=>e[t].is_following))];return n&&!r.includes(n)&&r.push(n),m(r,e)})),y=(0,r.P1)("getNewestThreadInTeam",i,d,((t,e)=>e),((t,e,n)=>{var r;const a=null!==(r=null==t?void 0:t[n])&&void 0!==r?r:[];if(!a)return null;const o=[...a.filter((t=>e[t].is_following))];return e[m(o,e)[0]]})),C=(0,r.P1)("getUnreadThreadOrderInCurrentTeam",c,d,((t,e)=>e),((t,e,n)=>{const r=t.filter((t=>{const n=e[t];return n.is_following&&(n.unread_replies||n.unread_mentions)}));return n&&!r.includes(n)&&r.push(n),m(r,e)}));function m(t,e){return t.filter((t=>0!==e[t].last_reply_at)).sort(((t,n)=>e[n].last_reply_at-e[t].last_reply_at))}(0,r.P1)("getThreadsInChannel",d,((t,e)=>e),((t,e)=>Object.keys(t).filter((n=>t[n].post.channel_id===e))));const h=(0,r.P1)("getThreadItemsInChannel",d,((t,e)=>e),((t,e)=>Object.keys(t).map((e=>t[e])).filter((t=>t.post.channel_id===e))))},54891:(t,e,n)=>{"use strict";n.d(e,{Eq:()=>i,UK:()=>o,fx:()=>a}),n(26699),n(32023),n(33948),n(74916);var r=n(4215);function a(t){return"category"in t?"custom"!==t.category:!("id"in t)}function o(t){if(!a(t)&&"mattermost"===t.id)return r.je.getSystemEmojiImageUrl("mattermost");if(a(t)){var e,n;const a=(null!==(e=null==t||null===(n=t.unified)||void 0===n?void 0:n.toLowerCase())&&void 0!==e?e:"")||t.short_names[0];return r.je.getSystemEmojiImageUrl(a)}return r.je.getEmojiRoute(t.id)+"/image"}function i(t,e,n,r){if(!t.includes(":"))return new Set;const a=/:([A-Za-z0-9_-]+):/gi,o=new Set;let i;for(;null!==(i=a.exec(t));)i&&(e.has(i[1])||r.has(i[1])||n.has(i[1])||o.add(i[1]));return o}},6356:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r}),n(33948),n(85827),n(41817);const r=new class{constructor(){var t,e,n;t=this,n=void 0,(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e="listeners"))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,this.listeners=new Map}addListener(t,e){this.listeners.has(t)||this.listeners.set(t,[]),this.listeners.get(t).push(e)}on(t,e){this.addListener(t,e)}removeListener(t,e){const n=this.listeners.get(t);let r;return!!(n&&n.length&&(r=n.reduce(((t,n,r)=>"function"==typeof n&&n===e?r:t),-1),r>-1))&&(n.splice(r,1),this.listeners.set(t,n),!0)}off(t,e){this.removeListener(t,e)}emit(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];const a=this.listeners.get(t);return!(!a||!a.length||(a.forEach((t=>{t(...n)})),0))}}},64784:(t,e)=>{"use strict";var n;e.r=void 0,(n=e.r||(e.r={})).Alphabetical="alpha",n.Default="",n.Recency="recent",n.Manual="manual"},42896:(t,e)=>{"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.LogLevel=void 0,(n=e.LogLevel||(e.LogLevel={})).Error="ERROR",n.Warning="WARNING",n.Info="INFO",n.Debug="DEBUG"},89658:(t,e,n)=>{"use strict";n.d(e,{s:()=>l}),n(33948),n(41817);var r=n(61060),a=n(52952),o=n(47470),i=n(24988);function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const E=(0,r.createBrowserHistory)({basename:window.basename}),_=(0,o.P)()&&(0,a.l)((0,o.zF)(),"5.0.0");window.addEventListener("message",(function(){let{origin:t,data:{type:e,message:n={}}={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t===window.location.origin&&"browser-history-push-return"===e&&n.pathName){const{pathName:t}=n;E.push(t)}}));const d=c(c({},E),{},{push:function(t){if(_)window.postMessage({type:"browser-history-push",message:{path:"object"==typeof t?t.pathname:t}},window.location.origin);else{for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];E.push(t,...n)}}});function l(){var t;return null!==(t=(0,i.getModule)("utils/browser_history"))&&void 0!==t?t:d}},52952:(t,e,n)=>{"use strict";function r(t,e){if(t===e)return!0;const n=(t||"").split(".").filter((t=>null!==/^[0-9]+$/.exec(t))),r=(e||"").split(".").filter((t=>null!==/^[0-9]+$/.exec(t)));for(let t=0;t<Math.max(n.length,r.length);t++){const e=parseInt(n[t],10)||0,a=parseInt(r[t],10)||0;if(e>a)return!0;if(e<a)return!1}return!0}n.d(e,{l:()=>r}),n(74916),n(23123),n(91058)},84944:(t,e,n)=>{"use strict";var r=n(82109),a=n(6790),o=n(47908),i=n(26244),s=n(19303),c=n(65417);r({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,e=o(this),n=i(e),r=c(e,0);return r.length=a(r,e,e,n,0,void 0===t?1:s(t)),r}})},33792:(t,e,n)=>{n(51223)("flat")},47443:(t,e,n)=>{var r=n(42118);t.exports=function(t,e){return!(null==t||!t.length)&&r(t,e,0)>-1}},1196:t=>{t.exports=function(t,e,n){for(var r=-1,a=null==t?0:t.length;++r<a;)if(n(e,t[r]))return!0;return!1}},56029:(t,e,n)=>{var r=n(33448);t.exports=function(t,e,n){for(var a=-1,o=t.length;++a<o;){var i=t[a],s=e(i);if(null!=s&&(void 0===c?s==s&&!r(s):n(s,c)))var c=s,u=i}return u}},41848:t=>{t.exports=function(t,e,n,r){for(var a=t.length,o=n+(r?1:-1);r?o--:++o<a;)if(e(t[o],o,t))return o;return-1}},53325:t=>{t.exports=function(t,e){return t>e}},42118:(t,e,n)=>{var r=n(41848),a=n(62722),o=n(42351);t.exports=function(t,e,n){return e==e?o(t,e,n):r(t,a,n)}},62722:t=>{t.exports=function(t){return t!=t}},45652:(t,e,n)=>{var r=n(88668),a=n(47443),o=n(1196),i=n(74757),s=n(23593),c=n(21814);t.exports=function(t,e,n){var u=-1,E=a,_=t.length,d=!0,l=[],p=l;if(n)d=!1,E=o;else if(_>=200){var f=e?null:s(t);if(f)return c(f);d=!1,E=i,p=new r}else p=e?[]:l;t:for(;++u<_;){var y=t[u],C=e?e(y):y;if(y=n||0!==y?y:0,d&&C==C){for(var m=p.length;m--;)if(p[m]===C)continue t;e&&p.push(C),l.push(y)}else E(p,C,n)||(p!==l&&p.push(C),l.push(y))}return l}},23593:(t,e,n)=>{var r=n(58525),a=n(50308),o=n(21814),i=r&&1/o(new r([,-0]))[1]==1/0?function(t){return new r(t)}:a;t.exports=i},42351:t=>{t.exports=function(t,e,n){for(var r=n-1,a=t.length;++r<a;)if(t[r]===e)return r;return-1}},6162:(t,e,n)=>{var r=n(56029),a=n(53325),o=n(6557);t.exports=function(t){return t&&t.length?r(t,o,a):void 0}},50308:t=>{t.exports=function(){}},7710:t=>{"use strict";class e extends Error{constructor(t){super(e._prepareSuperMessage(t)),Object.defineProperty(this,"name",{value:"NonError",configurable:!0,writable:!0}),Error.captureStackTrace&&Error.captureStackTrace(this,e)}static _prepareSuperMessage(t){try{return JSON.stringify(t)}catch{return String(t)}}}const n=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0}],r=Symbol(".toJSON called"),a=({from:t,seen:e,to_:o,forceEnumerable:i})=>{const s=o||(Array.isArray(t)?[]:{});if(e.push(t),"function"==typeof t.toJSON&&!0!==t[r])return(t=>{t[r]=!0;const e=t.toJSON();return delete t[r],e})(t);for(const[n,r]of Object.entries(t))"function"==typeof Buffer&&Buffer.isBuffer(r)?s[n]="[object Buffer]":"function"!=typeof r&&(r&&"object"==typeof r?e.includes(t[n])?s[n]="[Circular]":s[n]=a({from:t[n],seen:e.slice(),forceEnumerable:i}):s[n]=r);for(const{property:e,enumerable:r}of n)"string"==typeof t[e]&&Object.defineProperty(s,e,{value:t[e],enumerable:!!i||r,configurable:!0,writable:!0});return s};t.exports={serializeError:t=>"object"==typeof t&&null!==t?a({from:t,seen:[],forceEnumerable:!0}):"function"==typeof t?`[Function: ${t.name||"anonymous"}]`:t,deserializeError:t=>{if(t instanceof Error)return t;if("object"==typeof t&&null!==t&&!Array.isArray(t)){const e=new Error;return a({from:t,seen:[],to_:e}),e}return new e(t)}}}}]);
//# sourceMappingURL=9769.c9f91fa8b3e53b09c99a.js.map