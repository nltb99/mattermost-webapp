"use strict";(self.webpackChunkmattermost_webapp=self.webpackChunkmattermost_webapp||[]).push([[5309],{96512:(e,t,a)=>{a.d(t,{Z:()=>d});var r=a(48431),s=a.n(r),n=a(54156),i=a.n(n),l=a(21005),o=a(24897),m=a(94184),c=a.n(m);const u=e=>{let{url:t,className:a,onClick:r}=e;const{formatMessage:s}=(0,l.useIntl)();return i().createElement("div",{id:"back_button",className:c()("signup-header",a)},i().createElement(o.Link,{onClick:r,to:t},i().createElement("span",{id:"back_button_icon",className:"fa fa-1x fa-angle-left",title:s({id:"generic_icons.back",defaultMessage:"Back Icon"})}),i().createElement(l.FormattedMessage,{id:"web.header.back",defaultMessage:"Back"})))};u.propTypes={url:s().string,className:s().string,onClick:s().func},u.defaultProps={url:"/"};const d=u},78453:(e,t,a)=>{a.d(t,{Z:()=>i}),a(19601);var r=a(54156),s=a.n(r),n=a(22826);const i=function(e){return t=>{const a=(0,n.Z)();return s().createElement(e,Object.assign({usageDeltas:a},t))}}},22826:(e,t,a)=>{a.d(t,{Z:()=>l});var r=a(54156),s=a(48448),n=a(44831);const i=(e,t)=>t?null!=e?e:Number.MAX_VALUE:0;function l(){const e=(0,s.Z)(),t=(0,n.Z)(),a=t[0],l=t[1];return(0,r.useMemo)((()=>{var t,r,s;return{files:{totalStorage:e.files.totalStorage-i(null===(t=a.files)||void 0===t?void 0:t.total_storage,l),totalStorageLoaded:e.files.totalStorageLoaded},messages:{history:e.messages.history-i(null===(r=a.messages)||void 0===r?void 0:r.history,l),historyLoaded:e.messages.historyLoaded},teams:{active:e.teams.active-i(null===(s=a.teams)||void 0===s?void 0:s.active,l),cloudArchived:e.teams.cloudArchived,teamsLoaded:e.teams.teamsLoaded}}}),[e,a])}},37635:(e,t,a)=>{a.d(t,{Z:()=>m});var r=a(48431),s=a.n(r),n=(a(41817),a(54156)),i=a.n(n),l=a(21005);function o(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class m extends i().PureComponent{render(){const{customDescriptionText:e,siteName:t}=this.props;let a=null;return a=e||i().createElement(l.FormattedMessage,{id:"web.root.signup_info",defaultMessage:"All team communication in one place, searchable and accessible anywhere"}),i().createElement(i().Fragment,null,i().createElement("h1",{id:"site_name"},t),i().createElement("h3",{id:"site_description",className:"color--light"},a))}}o(m,"propTypes",{customDescriptionText:s().string,siteName:s().string}),o(m,"defaultProps",{siteName:"Mattermost"})},85309:(e,t,a)=>{a.r(t),a.d(t,{default:()=>D});var r=a(64323),s=a(97779),n=a(22742),i=a(9276),l=a(5596),o=a(6498),m=a(78453),c=a(47424),u=a(48431),d=a.n(u),p=(a(74916),a(4723),a(19601),a(41817),a(54156)),h=a.n(p),g=a(24897),f=a(21005),E=a(39345),v=a(96512),_=(a(73210),a(59925)),b=a(71124),y=a(12266),N=a(1138),M=a(86040);function T(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class w extends h().PureComponent{constructor(e){var t;super(e),T(this,"submitNext",(e=>{e.preventDefault(),(0,_.L9)("display_name","click_next");const t=this.state.teamDisplayName.trim();if(!t)return void this.setState({nameError:h().createElement(f.FormattedMessage,{id:"create_team.display_name.required",defaultMessage:"This field is required"})});if(t.length<b.ZP.MIN_TEAMNAME_LENGTH||t.length>b.ZP.MAX_TEAMNAME_LENGTH)return void this.setState({nameError:h().createElement(f.FormattedMessage,{id:"create_team.display_name.charLength",defaultMessage:"Name must be {min} or more characters up to a maximum of {max}. You can add a longer team description later.",values:{min:b.ZP.MIN_TEAMNAME_LENGTH,max:b.ZP.MAX_TEAMNAME_LENGTH}})});const a=this.props.state;a.wizard="team_url",a.team.display_name=t,a.team.name=(0,y.oK)(t),this.props.updateParent(a)})),T(this,"handleFocus",(e=>{e.preventDefault(),e.currentTarget.select()})),T(this,"handleDisplayNameChange",(e=>{this.setState({teamDisplayName:e.target.value})})),this.state={teamDisplayName:(null===(t=this.props.state.team)||void 0===t?void 0:t.display_name)||""}}componentDidMount(){(0,_.L9)("signup","signup_team_01_name")}render(){let e=null,t="form-group";return this.state.nameError&&(e=h().createElement("label",{className:"control-label"},this.state.nameError),t+=" has-error"),h().createElement("div",null,h().createElement("form",null,h().createElement("img",{alt:"signup logo",className:"signup-team-logo",src:N.Z}),h().createElement("h5",null,h().createElement(f.FormattedMessage,{id:"create_team.display_name.teamName",tagName:"strong",defaultMessage:"Team Name"})),h().createElement("div",{className:t},h().createElement("div",{className:"row"},h().createElement("div",{className:"col-sm-9"},h().createElement("input",{id:"teamNameInput",type:"text",className:"form-control",placeholder:"",maxLength:128,value:this.state.teamDisplayName,autoFocus:!0,onFocus:this.handleFocus,onChange:this.handleDisplayNameChange,spellCheck:"false"}))),e),h().createElement("div",null,h().createElement(f.FormattedMessage,{id:"create_team.display_name.nameHelp",defaultMessage:"Name your team in any language. Your team name shows in menus and headings."})),h().createElement("button",{id:"teamNameNextButton",type:"submit",className:"btn btn-primary mt-8",onClick:this.submitNext},h().createElement(f.FormattedMessage,{id:"create_team.display_name.next",defaultMessage:"Next"}),h().createElement(M.Z,null))))}}T(w,"propTypes",{state:d().shape({wizard:d().string.isRequired}).isRequired,updateParent:d().func.isRequired});var L=a(37635),P=a(92743),S=(a(88674),a(94687)),x=a(15558),k=a(89959);function C(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class F extends h().PureComponent{constructor(e){var t;super(e),C(this,"submitBack",(e=>{e.preventDefault(),(0,_.L9)("signup","click_back");const t=this.props.state;t.wizard="display_name",this.props.updateParent(t)})),C(this,"submitNext",(async e=>{e.preventDefault(),(0,_.L9)("signup","click_finish");const t=this.state.teamURL.trim(),a=y.oK(t),{actions:{checkIfTeamExists:r,createTeam:s}}=this.props;if(!t)return void this.setState({nameError:h().createElement(f.FormattedMessage,{id:"create_team.team_url.required",defaultMessage:"This field is required"})});if(a.length<b.ZP.MIN_TEAMNAME_LENGTH||a.length>b.ZP.MAX_TEAMNAME_LENGTH)return void this.setState({nameError:h().createElement(f.FormattedMessage,{id:"create_team.team_url.charLength",defaultMessage:"Name must be {min} or more characters up to a maximum of {max}",values:{min:b.ZP.MIN_TEAMNAME_LENGTH,max:b.ZP.MAX_TEAMNAME_LENGTH}})});if(a!==t||!/^[a-z]+([a-z\-0-9]+|(__)?)[a-z0-9]+$/g.test(t))return void this.setState({nameError:h().createElement(f.FormattedMessage,{id:"create_team.team_url.regex",defaultMessage:"Use only lower case letters, numbers and dashes. Must start with a letter and can't end in a dash."})});for(let e=0;e<b.ZP.RESERVED_TEAM_NAMES.length;e++)if(0===a.indexOf(b.ZP.RESERVED_TEAM_NAMES[e]))return void this.setState({nameError:h().createElement(f.FormattedMessage,{id:"create_team.team_url.taken",defaultMessage:"This URL <link>starts with a reserved word</link> or is unavailable. Please try another.",values:{link:e=>h().createElement("a",{href:"https://docs.mattermost.com/help/getting-started/creating-teams.html#team-url",target:"_blank",rel:"noreferrer"},e)}})});this.setState({isLoading:!0});const n=JSON.parse(JSON.stringify(this.props.state));if(n.team.type="O",n.team.name=t,(await r(t)).data)return this.setState({nameError:h().createElement(f.FormattedMessage,{id:"create_team.team_url.unavailable",defaultMessage:"This URL is taken or unavailable. Please try another."})}),void this.setState({isLoading:!1});const i=await s(n.team),l=i.data,o=i.error;l?(this.props.history.push("/"+l.name+"/channels/"+b.ZP.DEFAULT_CHANNEL),(0,_.L9)("signup","signup_team_03_complete")):o&&(this.setState({nameError:o.message}),this.setState({isLoading:!1}))})),C(this,"handleFocus",(e=>{e.preventDefault(),e.currentTarget.select()})),C(this,"handleTeamURLInputChange",(e=>{this.setState({teamURL:e.target.value})})),this.state={nameError:"",isLoading:!1,teamURL:null===(t=e.state.team)||void 0===t?void 0:t.name}}componentDidMount(){(0,_.L9)("signup","signup_team_02_url")}render(){let e=null,t="form-group";this.state.nameError&&(e=h().createElement("label",{className:"control-label"},this.state.nameError),t+=" has-error");const a="".concat(y.fO(),"/"),r=h().createElement(k.Z,{id:"urlTooltip"},a);let s=h().createElement(f.FormattedMessage,{id:"create_team.team_url.finish",defaultMessage:"Finish"});return this.state.isLoading&&(s=h().createElement(f.FormattedMessage,{id:"create_team.team_url.creatingTeam",defaultMessage:"Creating team..."})),h().createElement("div",null,h().createElement("form",null,h().createElement("img",{alt:"signup team logo",className:"signup-team-logo",src:N.Z}),h().createElement("h5",null,h().createElement(f.FormattedMessage,{id:"create_team.team_url.teamUrl",tagName:"strong",defaultMessage:"Team URL"})),h().createElement("div",{className:t},h().createElement("div",{className:"row"},h().createElement("div",{className:"col-sm-11"},h().createElement("div",{className:"input-group input-group--limit"},h().createElement(x.Z,{delayShow:b.ZP.OVERLAY_TIME_DELAY,placement:"top",overlay:r},h().createElement("span",{className:"input-group-addon"},a)),h().createElement("input",{id:"teamURLInput",type:"text",className:"form-control",placeholder:"",maxLength:128,value:this.state.teamURL,autoFocus:!0,onFocus:this.handleFocus,onChange:this.handleTeamURLInputChange,spellCheck:"false"})))),e),h().createElement("p",null,h().createElement(f.FormattedMessage,{id:"create_team.team_url.webAddress",defaultMessage:"Choose the web address of your new team:"})),h().createElement("ul",{className:"color--light"},h().createElement("li",null,h().createElement(f.FormattedMessage,{id:"create_team.team_url.hint1",defaultMessage:"Short and memorable is best"})),h().createElement("li",null,h().createElement(f.FormattedMessage,{id:"create_team.team_url.hint2",defaultMessage:"Use lowercase letters, numbers and dashes"})),h().createElement("li",null,h().createElement(f.FormattedMessage,{id:"create_team.team_url.hint3",defaultMessage:"Must start with a letter and can't end in a dash"}))),h().createElement("div",{className:"mt-8"},h().createElement(S.Button,{id:"teamURLFinishButton",type:"submit",bsStyle:"primary",disabled:this.state.isLoading,onClick:e=>this.submitNext(e)},s)),h().createElement("div",{className:"mt-8"},h().createElement("a",{href:"#",onClick:this.submitBack},h().createElement(f.FormattedMessage,{id:"create_team.team_url.back",defaultMessage:"Back to previous step"})))))}}C(F,"propTypes",{state:d().shape({wizard:d().string.isRequired}).isRequired,updateParent:d().func.isRequired,actions:d().shape({checkIfTeamExists:d().func.isRequired,createTeam:d().func.isRequired}).isRequired,history:d().shape({}).isRequired});const R=(0,r.connect)(null,(function(e){return{actions:(0,s.bindActionCreators)({checkIfTeamExists:P.iw,createTeam:P.Cm},e)}}))(F);function A(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Z extends h().PureComponent{constructor(e){super(e),A(this,"updateParent",(e=>{this.setState(e),this.props.history.push("/create_team/"+e.wizard)})),this.state={team:{},wizard:"display_name"}}render(){const{currentChannel:e,currentTeam:t,customDescriptionText:a,match:r,siteName:s,isCloud:n,isFreeTrial:i,usageDeltas:{teams:{active:l}}}=this.props,o=n&&!i&&l>=0;let m="/select_team";return t&&(m="/".concat(t.name),e&&(m+="/channels/".concat(e.name))),h().createElement("div",null,h().createElement(E.Z,null),h().createElement(v.Z,{url:m}),h().createElement("div",{className:"col-sm-12"},h().createElement("div",{className:"signup-team__container"},h().createElement(L.Z,{customDescriptionText:a,siteName:s}),h().createElement("div",{className:"signup__content"},o?h().createElement(h().Fragment,null,h().createElement("h5",null,h().createElement(f.FormattedMessage,{id:"create_team.createTeamRestricted.title",tagName:"strong",defaultMessage:"Professional feature"})),h().createElement("div",null,h().createElement(f.FormattedMessage,{id:"create_team.createTeamRestricted.message",defaultMessage:"Your workspace plan has reached the limit on the number of teams. Create unlimited teams with a free 30-day trial. Contact your System Administrator."}))):h().createElement(g.Switch,null,h().createElement(g.Route,{path:"".concat(this.props.match.url,"/display_name"),render:e=>h().createElement(w,Object.assign({state:this.state,updateParent:this.updateParent},e))}),h().createElement(g.Route,{path:"".concat(this.props.match.url,"/team_url"),render:e=>h().createElement(R,Object.assign({state:this.state,updateParent:this.updateParent},e))}),h().createElement(g.Redirect,{to:"".concat(r.url,"/display_name")}))))))}}A(Z,"propTypes",{customDescriptionText:d().string.isRequired,siteName:d().string.isRequired,match:d().shape({url:d().string.isRequired}).isRequired,isCloud:d().bool.isRequired,isFreeTrial:d().bool.isRequired});const D=(0,s.compose)((0,r.connect)((function(e){const t=(0,n.iE)(e),a=(0,i.TB)(e),r=(0,l.kA)(e),s=t.CustomDescriptionText,m=t.SiteName,u=(0,o.oR)(e),d=(0,n.lJ)(e);return{currentChannel:a,currentTeam:r,customDescriptionText:s,siteName:m,isCloud:(0,c.Ht)(d),isFreeTrial:"true"===(null==u?void 0:u.is_free_trial)}})),m.Z)(Z)},86040:(e,t,a)=>{a.d(t,{Z:()=>c});var r=a(48431),s=a.n(r),n=(a(41817),a(54156)),i=a.n(n),l=a(68492),o=a(87993);function m(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class c extends i().PureComponent{render(){const e="fa fa-1x fa-angle-right"+(this.props.additionalClassName?" "+this.props.additionalClassName:"");return i().createElement(l.Z,{className:e,title:{id:(0,o.t)("generic_icons.next"),defaultMessage:"Next Icon"}})}}m(c,"propTypes",{additionalClassName:s().oneOfType([s().string,s().oneOf([null])])}),m(c,"defaultProps",{additionalClassName:null})},1138:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"files/39c2163d5de35bab3d90af64b48736cb.png"}}]);
//# sourceMappingURL=5309.1312d4b19fa6ebefd9ea.js.map